!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=246)}({0:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},i=Math.max;var o=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),u=Array(a);++s<a;)u[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(u),r(e,this,c)}},s=n(4);function a(e,t){return o(e,t,s.a)}},1:function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LoggerConstructor=void 0;const r=n(5),i=n(32),o={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0,Verbose:!0,LocalOnly:!1},s={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0},a=n(43);t.LoggerConstructor=function(e){const i=this;let u;i.RouterClient=e&&e.RouterClient;let c=!1,l=!1;const f=i;let d,p,h=0,m=0;this.startupTime=0;let y=[];if("undefined"==typeof window)return;let g=r.System.Window.getCurrent().name;window.top!==window&&(g+=".Frame"),this.onLogStateChangeCallback=[];const v="finsemble.logger.client."+g;let b={console:s,dev:o,system:o,perf:o};function _(e,t,n){this.category=e,!u&&r.System.isBrowserView()&&(u=r.System.getViewId()),this.logClientName=u?`${g}: view-${u}`:g,this.logType=t,this.logData=n,this.logTimestamp=window.performance.timing.navigationStart+window.performance.now()+h}function w(e,t){e&&e.dev&&(b=e,i.onLogStateChangeCallback.forEach(t=>{t(e)})),function(e){f.system.debug("Logger updateQueueBasedOnState",e,h,"QUEUE LENGTH",y.length,b);const t=[];for(let n=0,{length:r}=y;n<r;n++)if(b[y[n].category][y[n].logType]&&!b[y[n].category].LocalOnly)e&&(y[n].logTimestamp=y[n].logTimestamp+h),t.push(y[n]);else if(b[y[n].category][y[n].logType]&&b[y[n].category].LocalOnly){const e=y[n];console.log(e.category,e.logType,e.logTimestamp-window.performance.timing.navigationStart,e.logData,"(Previously queued!)")}y=t}(t)}function S(){const{stack:e}=function(){try{throw Error("")}catch(e){return e}}(),t=(n="\n",r=4,e.split(n,r).join(n).length);var n,r;return"Log Stack: \n"+e.substring(t).substr(1)}this.onStateChanged=e=>{-1===this.onLogStateChangeCallback.indexOf(e)&&this.onLogStateChangeCallback.push(e)},this.setClientName=function(e){g=e},this.getClientName=function(){return g},this.clearMessageList=function(){y=[]},this.callStack=function(){return S()},this.setting=function(){return b};const C=console.error,E=console.warn,T=console.info,O=console.log,A=console.debug;function R(e,t){try{e.apply(console,function e(t){return t.reduce((t,n)=>t.concat(Array.isArray(n)?e(n):n),[])}(t))}catch(e){(t=[]).push(S())}}let I=()=>{y.length>0&&(i.RouterClient.transmit("logger.service.logMessages",y),f.clearMessageList())};function L(e,n,r){let i,o=!1,s=!0;"forceObjectsToLogger"===r[0]&&(o=!0,s=!1,r.splice(0,1)),r=r.map(e=>{if(s){if(function(e){const t=[],n=[e];let r=0,i=0;for(;n.length&&i<1e3;){i++;const e=n.pop();if("boolean"==typeof e)r+=4;else if("string"==typeof e)r+=2*e.length;else if("number"==typeof e)r+=8;else if("object"==typeof e&&-1===t.indexOf(e)){t.push(e);for(const t in e)n.push(e[t])}}return r}(e)>5e4)return R(T,["Message too large to send to the logger.",r]),"Log argument greater than 50KB. Check local Console to see output of the object."}return e});try{for(let e=0;e<r.length;e++)r[e]instanceof Error&&(r[e]=r[e].toString());i=new _(e,n,JSON.stringify(r))}catch(t){r.splice(0,r.length),r.push(S()),i=new _(e,n,"*** Logging Error: "+JSON.stringify(r))}if(o||!function(e){return!0===e.logData.includes("Finsemble.heartbeat")}(i))!function(e){if(y.length<2e4)y.push(e);else{console.error("Logging Queue Overflowed! Dumping queue here then continuing.",y.length);let e,n=0;for(;e=y.shift();)console.log("Message "+n++,e);t.Logger.system.error("Logging Queue Overflowed! Dumping queue in client then continuing.")}}(i);else if(++m<=5){R(T,[`"Filtered Logger Message (${m} of first 5 shown)`,i])}l&&I()}function j(){!u&&r.System.isBrowserView()&&(u=r.System.getViewId()),f.system.debug("logger.service.registering",g),i.RouterClient.query("logger.service.register",{clientName:g,clientChannel:v,uuid:r.System.Window.getCurrent().uuid,windowName:r.System.Window.getCurrent().name,viewId:u},(e,t)=>{if(e)setTimeout(j,750);else{for(const e of y)e.viewId=u;l=!0,f.system.debug("logger.service.registered"),d=t.data,"routerService"!==g?(h=p,w(d,!0)):w(d,!1),L("system","Debug",["Logger Registered"]),I()}}),i.RouterClient.addListener(v,(e,t)=>{f.system.debug("logger.client.setLogState",t.data),d=t.data,w(d,!1)})}I=a(I,"routerService"===g?100:250,{leading:!1}),this.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),b.dev.Error&&!b.dev.LocalOnly&&L("dev","Error",e),e.unshift(`dev error (${window.performance.now()}):`),R(C,e)},this.warn=function(){if(b.dev.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),b.dev.Warn&&!b.dev.LocalOnly&&L("dev","Warn",e),b.dev.Warn&&b.dev.LocalOnly&&(e.unshift(`dev warn (${window.performance.now()}):`),R(E,e))}},this.info=function(){if(b.dev.Info){const e=Array.prototype.slice.call(arguments);0,b.dev.Info&&!b.dev.LocalOnly&&L("dev","Info",e),b.dev.Info&&b.dev.LocalOnly&&(e.unshift(`dev info (${window.performance.now()}):`),R(T,e))}},this.log=function(){if(b.dev.Log){const e=Array.prototype.slice.call(arguments);0,b.dev.Log&&!b.dev.LocalOnly&&L("dev","Log",e),b.dev.Log&&b.dev.LocalOnly&&(e.unshift(`dev log (${window.performance.now()}):`),R(O,e))}},this.debug=function(){if(b.dev.Debug){const e=Array.prototype.slice.call(arguments);0,b.dev.Debug&&!b.dev.LocalOnly&&L("dev","Debug",e),b.dev.Debug&&b.dev.LocalOnly&&(e.unshift(`dev debug (${window.performance.now()}):`),R(A,e))}},this.verbose=function(){if(b.dev.Verbose){const e=Array.prototype.slice.call(arguments);0,b.dev.Verbose&&!b.dev.LocalOnly&&L("dev","Verbose",e),b.dev.Verbose&&b.dev.LocalOnly&&(e.unshift(`dev verbose (${window.performance.now()}):`),R(A,e))}},this.system={},this.system.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),b.system.Error&&!b.system.LocalOnly&&L("system","Error",e),e.unshift(`system error (${window.performance.now()}):`),R(C,e)},this.system.warn=function(){if(b.system.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),b.system.Warn&&!b.system.LocalOnly&&L("system","Warn",e),b.system.Warn&&b.system.LocalOnly&&(e.unshift(`system warn (${window.performance.now()}):`),R(E,e))}},this.system.info=function(){if(b.system.Info){const e=Array.prototype.slice.call(arguments);0,b.system.Info&&!b.system.LocalOnly&&L("system","Info",e),b.system.Info&&b.system.LocalOnly&&(e.unshift(`system info (${window.performance.now()}):`),R(T,e))}},this.system.log=function(){if(b.system.Log){const e=Array.prototype.slice.call(arguments);0,b.system.Log&&!b.system.LocalOnly&&L("system","Log",e),b.system.Log&&b.system.LocalOnly&&(e.unshift(`system log (${window.performance.now()}):`),R(O,e))}},this.system.debug=function(){if(b.system.Debug){const e=Array.prototype.slice.call(arguments);0,b.system.Debug&&!b.system.LocalOnly&&L("system","Debug",e),b.system.Debug&&b.system.LocalOnly&&(e.unshift(`system debug (${window.performance.now()}):`),R(A,e))}},this.system.verbose=function(){if(b.system.Verbose){var e=Array.prototype.slice.call(arguments);0,b.system.Verbose&&!b.system.LocalOnly&&L("system","Verbose",e),b.system.Verbose&&b.system.LocalOnly&&((e=Array.prototype.slice.call(arguments)).unshift(`system log (${window.performance.now()}):`),R(A,e))}},this.perf={},this.perf.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),b.perf.Error&&!b.perf.LocalOnly&&L("perf","Error",e),e.unshift(`perf error (${window.performance.now()}):`),R(C,e)},this.perf.warn=function(){if(b.perf.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),b.perf.Warn&&!b.perf.LocalOnly&&L("perf","Warn",e),b.perf.Warn&&b.perf.LocalOnly&&(e.unshift(`perf warn (${window.performance.now()}):`),R(E,e))}},this.perf.info=function(){if(b.perf.Info){const e=Array.prototype.slice.call(arguments);0,b.perf.Info&&!b.perf.LocalOnly&&L("perf","Info",e),b.perf.Info&&b.perf.LocalOnly&&(e.unshift(`perf info (${window.performance.now()}):`),R(T,e))}},this.perf.log=function(){if(b.perf.Log){const e=Array.prototype.slice.call(arguments);0,b.perf.Log&&!b.perf.LocalOnly&&L("perf","Log",e),b.perf.Log&&b.perf.LocalOnly&&(e.unshift(`perf log (${window.performance.now()}):`),R(O,e))}},this.perf.debug=function(){if(b.perf.Debug){const e=Array.prototype.slice.call(arguments);0,b.perf.Debug&&!b.perf.LocalOnly&&L("perf","Debug",e),b.perf.Debug&&b.perf.LocalOnly&&(e.unshift(`perf debug (${window.performance.now()}):`),R(A,e))}},this.perf.verbose=function(){if(b.perf.Verbose){const e=Array.prototype.slice.call(arguments);0,b.perf.Verbose&&!b.perf.LocalOnly&&L("perf","Verbose",e),b.perf.Verbose&&b.perf.LocalOnly&&(e.unshift(`perf verbose (${window.performance.now()}):`),R(A,e))}},this.unregisterClient=function(e=null,t=Function.prototype){f.system.debug("logger.service.unregister",g,e,u),I();const n=e||{clientName:g,viewId:u};i.RouterClient.query("logger.service.unregister",n,t)},this.isLogMessage=function(e){return"logger.service.logMessages"===e},this.status="offline",this.setRouterClient=e=>{this.RouterClient=e},this.start=function(){let e;function t(){i.status="online",f.system.debug("Logger onReady",g),i.RouterClient.calibrateTimeWithRouterService(e=>{p=e,c||(i.startupTime=performance.now()-i.startupTime,j(),c=!0)})}this.startupTime=performance.now(),i.RouterClient||(console.log("No instance of the RouterClient found for this instance of the Logger. Dynamically requiring it."),i.RouterClient=n(6).default);const o=()=>{e=i.RouterClient.subscribe("Finsemble.Service.State.loggerService",(n,r)=>{"ready"===r.data.state&&(t(),i.RouterClient.unsubscribe(e))})};"routerService"===window.name?i.RouterClient.query("logger.service.register",{},e=>{e?setTimeout(o,750):o()}):i.RouterClient.onReady(o),r.System.isBrowserView()&&window.addEventListener("beforeunload",()=>{i.unregisterClient()})}},t.Logger="undefined"!=typeof window?new t.LoggerConstructor:new i.LocalLogger,t.default=t.Logger},10:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(55));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var o=new function(){function e(e,t,n){const r=function(){try{throw Error("")}catch(e){return e}}(),i=r.stack.split("\n")[5],o=i.indexOf("at "),s=i.slice(o+2,i.length),a=r.stack.split("\n")[6],u=a.indexOf("at "),c=a.slice(u+2,a.length);console.warn(`parameter validation failed: parameter ${e} is of type '${typeof t}' but should be of type '${n}' in${s} called by${c}`)}this.args=function(){let t=!0;if(i.default.validationEnabled()){const n=arguments.length;if((n+1)%2!=0)for(let r=0;r<n;r+=2){let n=!1;const i=arguments[r];let o=arguments[r+1];if("="===o.slice(-1)&&(o=o.slice(0,-1),n=!0),typeof i!==o&&!(n&&void 0===i||void 0!==i&&"any"===o)){e(r/2+1,i,o),t=!1;break}}else console.warn("validate.args requires even number of parameters: "+JSON.stringify(arguments))}return t},this.args2=function(){let t=!0;if(i.default.validationEnabled()){const n=arguments.length;if((n+1)%3!=0)for(let r=0;r<n;r+=3){let n=!1;const i=arguments[r],o=arguments[r+1];let s=arguments[r+2];if("="===s.slice(-1)&&(s=s.slice(0,-1),n=!0),typeof o!==s&&!(n&&void 0===o||void 0!==o&&"any"===s)){e(i,o,s),t=!1;break}}else console.warn("validate.args requires even number of parameters: "+JSON.stringify(arguments))}return t}};t.default=o,e.exports=t.default},11:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.clone=c,t.getContainerVersion=function(e=Function.prototype){return new Promise(t=>{o.System.getVersion(n=>{const r=n.split(".").map(Number),i={major:r[0],chromium:r[1],minor:r[2],patch:r[3]};e(i),t({versionObject:i})})})},t.castToPromise=function(e){return function(){return new Promise((t,n)=>{const r=e.apply(null,Array.from(arguments));try{return r.then(t,n)}catch(e){e instanceof TypeError?t(r):n(e)}})}},t.isPercentage=function(e){if("string"!=typeof e)return!1;return-1!==e.indexOf("%")},t.crossDomain=function(e){const t=document.createElement("a");t.href=e;const n=window.location.hostname===t.hostname,r=window.location.protocol===t.protocol,i=void 0!==window.location.port?window.location.port:80,o=void 0!==t.port?t.port:80,s=i===o,u=!(n&&s&&r);return a.default.system.debug(`Launcher crossDomain=${u} (${n}:${r}:${s})`),u},t.getMonitorFromWindow=d,t.getFinWindow=p,t.getWindowDescriptor=h,t.findMonitor=m,t.getWhichMonitor=y,t.getMonitor=g,t.getMonitorFromCommand=function(e,t,n){return new Promise(r=>{g(t,t=>{u.getAllMonitors(i=>{y({commandMonitor:e,monitors:i,launchingMonitorPosition:t.position},e=>{n&&n(e),r(e)})})})})},t.windowOnMonitor=function(e,t){if(e.left>=t.left&&e.left<t.right||e.right<=t.right&&e.right>t.left)return!0;return!1},t.getMonitorByDescriptor=function(e,t){return new Promise(n=>{d(e,e=>{t&&t(e),n(e)})})},t.getMyWindowIdentifier=function(e){const t=o.System.Window.getCurrent();return new Promise(n=>{t.getOptions(r=>{let i=null;const{customData:o}=r;o&&o.component&&(i=o.component.type);const s={windowName:t.name,uuid:t.uuid,componentType:i};e&&e(s),n(s)})})},t.camelCase=function(){let e="";for(let t=0;t<arguments.length;t++)e=`${e} ${arguments[t]}`;return e.replace(/\s(.)/g,e=>e.toUpperCase()).replace(/\s/g,"").replace(/^(.)/,e=>e.toLowerCase())},t.guuid=function(){return(0,i.default)()},t.injectJS=function(e,t){const n=document.createElement("script");n.onload=t,n.type="text/javascript",n.async=!0,n.src=e;const r=document.getElementsByTagName("head")[0],i=r.getElementsByTagName("script")[0];r.insertBefore(n,i)},t.openSharedData=function(e,t){const n=FSBL.Clients.LauncherClient,r=FSBL.Clients.LinkerClient;e.multipleOpenerHandler||(e.multipleOpenerHandler=function(e){let t,n=0;for(const r of Object.keys(e))e[r].length>n&&(t=r,n=e[r].length);return[t]});const i=[],o={};n.getComponentsThatCanReceiveDataTypes({dataTypes:Object.keys(e.data)},(s,u)=>{for(const e of Object.keys(u))if(u[e].componentTypes.length)for(const t of u[e].componentTypes)o[t]?o[t].push(e):o[t]=[e];else{const t="No Components Available to Handle the type: "+e;i.push(t),a.default.system.error(t)}let c=Object.keys(o);if(c.length){c.length>1&&(c=e.multipleOpenerHandler(o));const s=Object.keys(r.channels);if(s.length){if(r.getLinkedComponents({componentTypes:c,windowIdentifier:r.windowIdentifier()}).length||e.publishOnly)r.publish({dataType:"Finsemble.DragAndDropClient",data:e.data}),t&&t(i.length?i:null,"Data published");else{for(const t of c)n.spawn(t,{data:{sharedData:e.data,linker:{channels:s}},addToWorkspace:!0});t&&t(i.length?i:null,"Linked Window(s) spawned with data")}}else if(!e.publishOnly){for(const t of c)n.spawn(t,{data:{sharedData:e.data},addToWorkspace:!0});t&&t(i.length?i:null,"New Window(s) spawned with data")}}else t&&t(i.length?i:null,null)})},t.getNewBoundsWhenMovedToMonitor=function(e,t,n="availableRect"){const r=e[n]||e.availableRect||e.monitorRect,i=c(t);t.top<r.top?i.top=r.top:t.top>r.bottom-t.height&&(i.top=r.bottom-t.height);t.left<r.left?i.left=r.left:t.left>r.right-t.width&&(i.left=r.right-t.width);i.bottom=i.top+i.height,i.right=i.left+i.width,i.right>r.right&&(i.right=r.right);i.top<r.top&&(i.top=r.top);i.left<r.left&&(i.left=r.left);i.bottom>r.bottom&&(i.bottom=r.bottom);i.height=i.bottom-i.top,i.width=i.right-i.left;const o=Math.sqrt((t.left-i.left)**2+(t.top-i.top)**2);return{newBounds:i,distanceMoved:o,monitor:e}},t.isOnAMonitor=function(e){return this.Monitors.allMonitors.some(t=>{const{monitorRect:n}=t;return e.left>=n.left&&e.left<=n.right&&e.right>=n.left&&e.right<=n.right&&e.top>=n.top&&e.top<=n.bottom&&e.bottom>=n.top&&e.bottom<=n.bottom})},t.adjustBoundsToBeOnMonitor=function(e,t="availableRect"){if(this.isOnAMonitor(e))return a.default.system.info("Launcher.adjustWindowDescriptorBoundsToBeOnMonitor: on monitor."),e;const n=this.Monitors.allMonitors.map(n=>{let r=n.rawMonitor?n.rawMonitor:n;return this.getNewBoundsWhenMovedToMonitor(r,e,t)}).sort((e,t)=>e.distanceMoved-t.distanceMoved)[0];return a.default.system.info("Launcher.adjustWindowDescriptorBoundsToBeOnMonitor: not on monitor.  bounds",e,"monitor name",n.monitor.name,"newBounds",n.newBounds),n.newBounds},t.isWindows=async function(e=Function.prototype){const t=(await o.System.getHostSpecs()).name.toUpperCase().includes("WINDOWS");return e(t),t},t.getWindowType=function(e){if(e.windowType&&!["assimilation","assimilated","native","application","NativeWindow","FinsembleNativeWindow","CompoundWindow","WebWindow","WebApplication","StackedWindow"].includes(e.windowType))return a.default.system.error(`Invalid windowType: ${e.windowType}, defaulting to windowType: WebWindow`),"WebWindow";let t=e.windowType||"WebWindow";switch(e.windowType){case"assimilation":case"assimilated":t="NativeWindow";break;case"native":t="FinsembleNativeWindow";break;case"application":t="WebApplication";break;case"Web":t="WebWindow";break;case"StackedWindow":t="StackedWindow"}e.native&&(t="NativeWindow");e.compound&&(t="CompoundWindow");return t},t.getMonitorFromXY=t.getAllMonitors=t.Monitors=void 0;var i=r(n(29)),o=n(5),s=r(n(42)),a=r(n(1));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const u=new s.default(Function.prototype,Function.prototype,{System:o.System});function c(e,t){if(null===e||"object"!=typeof e)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(const n in e)t[n]=void 0===t[n]?c(e[n],null):t[n];return t}t.Monitors=u;var{getAllMonitors:l}=u;t.getAllMonitors=l;var f=u.getMonitorFromScaledXY;function d(e,t){const n=Number.isFinite(e.x)?e.x:e.defaultLeft,r=Number.isFinite(e.y)?e.y:e.defaultTop,i=n+e.defaultWidth,o=r+e.defaultHeight;return new Promise((e,s)=>{u.getMonitorFromScaledXY(n,r,l=>{if(!l)return a.default.system.debug("getMonitorFromWindow - top-left is off screen, trying bottom right"),void u.getMonitorFromScaledXY(i,o,i=>{if(!i)return a.default.system.debug("getMonitorFromWindow - bottom-right is off screen, getting primary"),void u.getAllMonitors(n=>{n[0]?(t&&t(n[0]),e(n[0])):(s(new Error("Cannot find monitor for window.")),t&&t(null))});i=c(i);const{monitorRect:o}=i;(o.left<n||o.right<r)&&(i.straddling=!0),t&&t(i),e(i)});l=c(l);const{monitorRect:f}=l;(f.right>i||f.bottom>o)&&(l.straddling=!0),t&&t(l),e(l)})})}function p(e,t){return new Promise((n,r)=>{const i=o.System.Window.getCurrent();i.getOptions(s=>{if(e&&e.windowName){e.uuid||(e.uuid=s.uuid);const i=o.System.Window.wrap(e.uuid,e.windowName);i.getInfo(()=>{t&&t(i),n(i)},()=>{t&&t(null),r(`Window ${e.windowName} not found. UUID: ${e.uuid}`),console.debug(`util.getFinWindow: Window ${e.windowName} not found`)})}else if(e&&e.componentType)if(void 0!==window.LauncherService){const i=window.LauncherService.componentFinder(e);i?(n(i),t&&t(i)):(r(`util.getFinWindow: Component ${e.componentType} not found.`),t&&t(null))}else r("getFinWindow by componentType is currently only operable within LaunchService"),t&&t(null);else t&&t(i),n(i)})})}function h(e,t){return new Promise((n,r)=>{p(e).then(e=>{e.getOptions(e=>{t&&t(e),n(e)})}).catch(e=>{console.warn(e),t&&t(null),r(e)})})}function m(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];if(i[t]===n)return i}return null}function y(e,t){let n;arguments.length>2&&(e={commandMonitor:arguments[0],monitors:arguments[1],launchingMonitorPosition:arguments[2]},t=null);let{commandMonitor:r,monitors:i,launchingMonitorPosition:o}=e;const s=r&&""!==r||0===r;if("primary"===r)n=m(i,"whichMonitor","primary");else if("next"===r){let e=o+1;e>=i.length&&(e=0),n=i[e]}else if("previous"===r){let e=o-1;e<0&&(e=i.length-1),n=i[e]}else if("mine"===r){var a=!0;activeWindows.getWindow(e.windowIdentifier.windowName)._getBounds((e,r)=>{e?(n=i[0],t(n)):u.getMonitorFromScaledXY(r.left,r.top,e=>{t(e)})})}else s?(r>=i.length&&(r=i.length-1),n=i.filter(e=>e.position===r)[0]):o&&(n=i[o]);if(n||(n=i[0]),!a){if(!t)return n;t(n)}}function g(e,t){return new Promise((n,r)=>{h(e,e=>{e?d(e,e=>{t&&t(e),n(e)}):r("util.getMonitor: Can't locate windowDescriptor.")})})}t.getMonitorFromXY=f},12:function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6)),o=r(n(1)),s=n(56),a=n(34),u=n(57);const c=new class{publishBootStatus(e,t,n){console.log("publishStartingStatus",e,n),o.default.system.debug("publishBootStatus",e,t,n),i.default.publish(u.statusChannel(e),{name:e,type:t,state:n})}waitForBootStage(e,t,n=Function.prototype){return new Promise((r,u)=>{o.default.system.debug("SystemManagerClient.waitForBootStage entry",e,t);const c=s.ALL_BOOT_STAGES.indexOf(e);"microkernel"===e&&"stageEntered"===t&&o.default.system.error("Cannot wait on `stageEntered` for microkernel because router isn't up yet. So will instead wait for microkernal stage complete.");const l=i.default.subscribe(a.STAGE_CHANNEL,(a,f)=>{if(o.default.system.debug("SystemManagerClient.waitForBootStage new stage",f.data.stage,l),a)o.default.system.error("SystemManagerClient.waitForBootStage subscribe error",a),n(a),u(a);else if(-1===c)a="illegal stage argument",o.default.system.debug("SystemManagerClient.waitForBootStage subscribe error",a,e),n(a),u(a);else{const a=s.ALL_BOOT_STAGES.indexOf(f.data.stage);o.default.system.debug("SystemManagerClient.waitForBootStage new stage",f.data,l),"stageEntered"===t&&a+1>=c?(o.default.system.debug("SystemManagerClient.waitForBootStage stageEntered",e,l,n.name),n(),r(),i.default.unsubscribe(l)):"stageCompleted"===t&&a>=c?(o.default.system.debug("SystemManagerClient.waitForBootStage completed",e,l),n(),r(),i.default.unsubscribe(l)):o.default.system.debug(`SystemManagerClient.waitForBootStage else currentStageIndex=${a} stageIndex=${c} `,a,c,e,l)}})})}waitForStartup(e,t=Function.prototype){return new Promise((n,r)=>{o.default.system.debug("SystemManagerClient.waitForStartup."+e,e);const s=i.default.subscribe(u.statusChannel(e),(a,u)=>{o.default.system.debug("SystemManagerClient.waitForStartup subscribe",e,a,u),a?(o.default.system.error("SystemManagerClient.waitForStartup subscribe error",a),t(a),r()):u.data.name===e&&"completed"===u.data.state&&(o.default.system.debug("SystemManagerClient.waitForStartup completed",e),t(),n(),i.default.unsubscribe(s))})})}publishCheckpointState(e,t,n){console.log("publishCheckpoint",e,t,n,u.checkpointChannel(e,t)),o.default.system.debug("publishCheckpoint",e,t,n,u.checkpointChannel(e,t)),i.default.publish(u.checkpointChannel(e,t),{windowName:e,checkpointName:t,state:n})}showSystemLog(){o.default.system.debug("SystemManagerClient.showSystemLog"),i.default.transmit(a.SHOW_SYSLOG_CHANNEL,!0)}systemLog(e,t){o.default.system.debug("SystemManagerClient.systemLog",e,t),i.default.transmit(a.SYSLOG_CHANNEL,{params:e,logMessage:t})}};t.default=c},13:function(e,t,n){"use strict";n.r(t),n.d(t,"applyEach",(function(){return se})),n.d(t,"applyEachSeries",(function(){return le})),n.d(t,"apply",(function(){return fe})),n.d(t,"asyncify",(function(){return de})),n.d(t,"auto",(function(){return _e})),n.d(t,"autoInject",(function(){return Xe})),n.d(t,"cargo",(function(){return rt})),n.d(t,"compose",(function(){return at})),n.d(t,"concat",(function(){return ct})),n.d(t,"concatSeries",(function(){return ft})),n.d(t,"constant",(function(){return dt})),n.d(t,"detect",(function(){return yt})),n.d(t,"detectLimit",(function(){return gt})),n.d(t,"detectSeries",(function(){return vt})),n.d(t,"dir",(function(){return _t})),n.d(t,"doDuring",(function(){return wt})),n.d(t,"doUntil",(function(){return Ct})),n.d(t,"doWhilst",(function(){return St})),n.d(t,"during",(function(){return Et})),n.d(t,"each",(function(){return Ot})),n.d(t,"eachLimit",(function(){return At})),n.d(t,"eachOf",(function(){return ne})),n.d(t,"eachOfLimit",(function(){return X})),n.d(t,"eachOfSeries",(function(){return it})),n.d(t,"eachSeries",(function(){return Rt})),n.d(t,"ensureAsync",(function(){return It})),n.d(t,"every",(function(){return jt})),n.d(t,"everyLimit",(function(){return Mt})),n.d(t,"everySeries",(function(){return kt})),n.d(t,"filter",(function(){return Wt})),n.d(t,"filterLimit",(function(){return xt})),n.d(t,"filterSeries",(function(){return Ut})),n.d(t,"forever",(function(){return Bt})),n.d(t,"log",(function(){return $t})),n.d(t,"map",(function(){return oe})),n.d(t,"mapLimit",(function(){return ue})),n.d(t,"mapSeries",(function(){return ce})),n.d(t,"mapValues",(function(){return qt})),n.d(t,"mapValuesLimit",(function(){return Vt})),n.d(t,"mapValuesSeries",(function(){return Ht})),n.d(t,"memoize",(function(){return zt})),n.d(t,"nextTick",(function(){return Yt.a})),n.d(t,"parallel",(function(){return Kt})),n.d(t,"parallelLimit",(function(){return Jt})),n.d(t,"priorityQueue",(function(){return en})),n.d(t,"queue",(function(){return Zt})),n.d(t,"race",(function(){return tn})),n.d(t,"reduce",(function(){return ot})),n.d(t,"reduceRight",(function(){return rn})),n.d(t,"reflect",(function(){return on})),n.d(t,"reflectAll",(function(){return un})),n.d(t,"reject",(function(){return an})),n.d(t,"rejectLimit",(function(){return cn})),n.d(t,"rejectSeries",(function(){return ln})),n.d(t,"retry",(function(){return dn})),n.d(t,"retryable",(function(){return pn})),n.d(t,"seq",(function(){return st})),n.d(t,"series",(function(){return hn})),n.d(t,"setImmediate",(function(){return Xt})),n.d(t,"some",(function(){return mn})),n.d(t,"someLimit",(function(){return yn})),n.d(t,"someSeries",(function(){return gn})),n.d(t,"sortBy",(function(){return vn})),n.d(t,"timeout",(function(){return bn})),n.d(t,"times",(function(){return En})),n.d(t,"timesLimit",(function(){return Cn})),n.d(t,"timesSeries",(function(){return Tn})),n.d(t,"transform",(function(){return On})),n.d(t,"unmemoize",(function(){return An})),n.d(t,"until",(function(){return In})),n.d(t,"waterfall",(function(){return Ln})),n.d(t,"whilst",(function(){return Rn})),n.d(t,"all",(function(){return jt})),n.d(t,"allLimit",(function(){return Mt})),n.d(t,"allSeries",(function(){return kt})),n.d(t,"any",(function(){return mn})),n.d(t,"anyLimit",(function(){return yn})),n.d(t,"anySeries",(function(){return gn})),n.d(t,"find",(function(){return yt})),n.d(t,"findLimit",(function(){return gt})),n.d(t,"findSeries",(function(){return vt})),n.d(t,"forEach",(function(){return Ot})),n.d(t,"forEachSeries",(function(){return Rt})),n.d(t,"forEachLimit",(function(){return At})),n.d(t,"forEachOf",(function(){return ne})),n.d(t,"forEachOfSeries",(function(){return it})),n.d(t,"forEachOfLimit",(function(){return X})),n.d(t,"inject",(function(){return ot})),n.d(t,"foldl",(function(){return ot})),n.d(t,"foldr",(function(){return rn})),n.d(t,"select",(function(){return Wt})),n.d(t,"selectLimit",(function(){return xt})),n.d(t,"selectSeries",(function(){return Ut})),n.d(t,"wrapSync",(function(){return de}));var r=n(0),i=function(e){return Object(r.a)((function(t){var n=t.pop();e.call(this,t,n)}))};function o(e){return Object(r.a)((function(t,n){var r=i((function(n,r){var i=this;return e(t,(function(e,t){e.apply(i,n.concat(t))}),r)}));return n.length?r.apply(this,n):r}))}var s=n(15).a.Symbol,a=Object.prototype,u=a.hasOwnProperty,c=a.toString,l=s?s.toStringTag:void 0;var f=function(e){var t=u.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=c.call(e);return r&&(t?e[l]=n:delete e[l]),i},d=Object.prototype.toString;var p=function(e){return d.call(e)},h=s?s.toStringTag:void 0;var m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?f(e):p(e)};var y=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var g=function(e){if(!y(e))return!1;var t=m(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var v=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var b=function(e){return null!=e&&v(e.length)&&!g(e)},_={};var w=function(){};function S(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var C="function"==typeof Symbol&&Symbol.iterator;var E=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var T=function(e){return null!=e&&"object"==typeof e};var O=function(e){return T(e)&&"[object Arguments]"==m(e)},A=Object.prototype,R=A.hasOwnProperty,I=A.propertyIsEnumerable,L=O(function(){return arguments}())?O:function(e){return T(e)&&R.call(e,"callee")&&!I.call(e,"callee")},j=Array.isArray,M=n(35),k=/^(?:0|[1-9]\d*)$/;var N=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&k.test(e))&&e>-1&&e%1==0&&e<t},P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1;var D=function(e){return T(e)&&v(e.length)&&!!P[m(e)]};var F=function(e){return function(t){return e(t)}},W=n(21),x=W.a&&W.a.isTypedArray,U=x?F(x):D,B=Object.prototype.hasOwnProperty;var $=function(e,t){var n=j(e),r=!n&&L(e),i=!n&&!r&&Object(M.a)(e),o=!n&&!r&&!i&&U(e),s=n||r||i||o,a=s?E(e.length,String):[],u=a.length;for(var c in e)!t&&!B.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||N(c,u))||a.push(c);return a},V=Object.prototype;var q=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||V)};var H=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),G=Object.prototype.hasOwnProperty;var z=function(e){if(!q(e))return H(e);var t=[];for(var n in Object(e))G.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Y=function(e){return b(e)?$(e):z(e)};function Q(e){if(b(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,i,o=function(e){return C&&e[C]&&e[C]()}(e);return o?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(o):(n=Y(t=e),r=-1,i=n.length,function(){var e=n[++r];return r<i?{value:t[e],key:e}:null})}function K(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function J(e){return function(t,n,r){if(r=S(r||w),e<=0||!t)return r(null);var i=Q(t),o=!1,s=0;function a(e,t){if(s-=1,e)o=!0,r(e);else{if(t===_||o&&s<=0)return o=!0,r(null);u()}}function u(){for(;s<e&&!o;){var t=i();if(null===t)return o=!0,void(s<=0&&r(null));s+=1,n(t.value,t.key,K(a))}}u()}}function X(e,t,n,r){J(t)(e,n,r)}function Z(e,t){return function(n,r,i){return e(n,t,r,i)}}function ee(e,t,n){n=S(n||w);var r=0,i=0,o=e.length;function s(e,t){e?n(e):++i!==o&&t!==_||n(null)}for(0===o&&n(null);r<o;r++)t(e[r],r,K(s))}var te=Z(X,1/0),ne=function(e,t,n){(b(e)?ee:te)(e,t,n)};function re(e){return function(t,n,r){return e(ne,t,n,r)}}function ie(e,t,n,r){r=r||w;var i=[],o=0;e(t=t||[],(function(e,t,r){var s=o++;n(e,(function(e,t){i[s]=t,r(e)}))}),(function(e){r(e,i)}))}var oe=re(ie),se=o(oe);function ae(e){return function(t,n,r,i){return e(J(n),t,r,i)}}var ue=ae(ie),ce=Z(ue,1),le=o(ce),fe=Object(r.a)((function(e,t){return Object(r.a)((function(n){return e.apply(null,t.concat(n))}))}));function de(e){return i((function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}y(r)&&"function"==typeof r.then?r.then((function(e){n(null,e)}),(function(e){n(e.message?e:new Error(e))})):n(null,r)}))}var pe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var he=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===n(o[u],u,o))break}return t}}();var me=function(e,t){return e&&he(e,t,Y)};var ye=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1};var ge=function(e){return e!=e};var ve=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var be=function(e,t,n){return t==t?ve(e,t,n):ye(e,ge,n)},_e=function(e,t,n){"function"==typeof t&&(n=t,t=null),n=S(n||w);var i=Y(e).length;if(!i)return n(null);t||(t=i);var o={},s=0,a=!1,u=Object.create(null),c=[],l=[],f={};function d(e,t){c.push((function(){!function(e,t){if(a)return;var i=K(Object(r.a)((function(t,r){if(s--,r.length<=1&&(r=r[0]),t){var i={};me(o,(function(e,t){i[t]=e})),i[e]=r,a=!0,u=Object.create(null),n(t,i)}else o[e]=r,c=u[e]||[],pe(c,(function(e){e()})),p();var c})));s++;var c=t[t.length-1];t.length>1?c(o,i):c(i)}(e,t)}))}function p(){if(0===c.length&&0===s)return n(null,o);for(;c.length&&s<t;){c.shift()()}}function h(t){var n=[];return me(e,(function(e,r){j(e)&&be(e,t,0)>=0&&n.push(r)})),n}me(e,(function(t,n){if(!j(t))return d(n,[t]),void l.push(n);var r=t.slice(0,t.length-1),i=r.length;if(0===i)return d(n,t),void l.push(n);f[n]=i,pe(r,(function(o){if(!e[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+r.join(", "));!function(e,t){var n=u[e];n||(n=u[e]=[]);n.push(t)}(o,(function(){0===--i&&d(n,t)}))}))})),function(){var e,t=0;for(;l.length;)e=l.pop(),t++,pe(h(e),(function(e){0==--f[e]&&l.push(e)}));if(t!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};var we=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Se=function(e){return"symbol"==typeof e||T(e)&&"[object Symbol]"==m(e)},Ce=s?s.prototype:void 0,Ee=Ce?Ce.toString:void 0;var Te=function e(t){if("string"==typeof t)return t;if(j(t))return we(t,e)+"";if(Se(t))return Ee?Ee.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var Oe=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var Ae=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Oe(e,t,n)};var Re=function(e,t){for(var n=e.length;n--&&be(t,e[n],0)>-1;);return n};var Ie=function(e,t){for(var n=-1,r=e.length;++n<r&&be(t,e[n],0)>-1;);return n};var Le=function(e){return e.split("")},je=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Me=function(e){return je.test(e)},ke="[\\ud800-\\udfff]",Ne="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pe="\\ud83c[\\udffb-\\udfff]",De="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="(?:"+Ne+"|"+Pe+")"+"?",Ue="[\\ufe0e\\ufe0f]?"+xe+("(?:\\u200d(?:"+[De,Fe,We].join("|")+")[\\ufe0e\\ufe0f]?"+xe+")*"),Be="(?:"+[De+Ne+"?",Ne,Fe,We,ke].join("|")+")",$e=RegExp(Pe+"(?="+Pe+")|"+Be+Ue,"g");var Ve=function(e){return e.match($e)||[]};var qe=function(e){return Me(e)?Ve(e):Le(e)};var He=function(e){return null==e?"":Te(e)},Ge=/^\s+|\s+$/g;var ze=function(e,t,n){if((e=He(e))&&(n||void 0===t))return e.replace(Ge,"");if(!e||!(t=Te(t)))return e;var r=qe(e),i=qe(t),o=Ie(r,i),s=Re(r,i)+1;return Ae(r,o,s).join("")},Ye=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Qe=/,/,Ke=/(=.+)?(\s*)$/,Je=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function Xe(e,t){var n={};me(e,(function(e,t){var r,i;if(j(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?o:e);else if(1===e.length)n[t]=e;else{if(r=i=(i=(i=(i=(i=e).toString().replace(Je,"")).match(Ye)[2].replace(" ",""))?i.split(Qe):[]).map((function(e){return ze(e.replace(Ke,""))})),0===e.length&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");r.pop(),n[t]=r.concat(o)}function o(t,n){var i=we(r,(function(e){return t[e]}));i.push(n),e.apply(null,i)}})),_e(n,t)}var Ze=n(2);function et(){this.head=this.tail=null,this.length=0}function tt(e,t){e.length=1,e.head=e.tail=t}function nt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function i(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(c.started=!0,j(e)||(e=[e]),0===e.length&&c.idle())return Object(Ze.a)((function(){c.drain()}));for(var r=0,i=e.length;r<i;r++){var o={data:e[r],callback:n||w};t?c._tasks.unshift(o):c._tasks.push(o)}Object(Ze.a)(c.process)}function o(e){return Object(r.a)((function(t){s-=1;for(var n=0,r=e.length;n<r;n++){var i=e[n],o=be(a,i,0);o>=0&&a.splice(o),i.callback.apply(i,t),null!=t[0]&&c.error(t[0],i.data)}s<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()}))}var s=0,a=[],u=!1,c={_tasks:new et,concurrency:t,payload:n,saturated:w,unsaturated:w,buffer:t/4,empty:w,drain:w,error:w,started:!1,paused:!1,push:function(e,t){i(e,!1,t)},kill:function(){c.drain=w,c._tasks.empty()},unshift:function(e,t){i(e,!0,t)},process:function(){if(!u){for(u=!0;!c.paused&&s<c.concurrency&&c._tasks.length;){var t=[],n=[],r=c._tasks.length;c.payload&&(r=Math.min(r,c.payload));for(var i=0;i<r;i++){var l=c._tasks.shift();t.push(l),n.push(l.data)}0===c._tasks.length&&c.empty(),s+=1,a.push(t[0]),s===c.concurrency&&c.saturated();var f=K(o(t));e(n,f)}u=!1}},length:function(){return c._tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return c._tasks.length+s===0},pause:function(){c.paused=!0},resume:function(){!1!==c.paused&&(c.paused=!1,Object(Ze.a)(c.process))}};return c}function rt(e,t){return nt(e,1,t)}et.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},et.prototype.empty=et,et.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},et.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},et.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):tt(this,e)},et.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):tt(this,e)},et.prototype.shift=function(){return this.head&&this.removeLink(this.head)},et.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var it=Z(X,1);function ot(e,t,n,r){r=S(r||w),it(e,(function(e,r,i){n(t,e,(function(e,n){t=n,i(e)}))}),(function(e){r(e,t)}))}var st=Object(r.a)((function(e){return Object(r.a)((function(t){var n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=w,ot(e,t,(function(e,t,i){t.apply(n,e.concat(Object(r.a)((function(e,t){i(e,t)}))))}),(function(e,t){i.apply(n,[e].concat(t))}))}))})),at=Object(r.a)((function(e){return st.apply(null,e.reverse())}));function ut(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(e,t){i=i.concat(t||[]),r(e)}))}),(function(e){r(e,i)}))}var ct=re(ut);var lt,ft=(lt=ut,function(e,t,n){return lt(it,e,t,n)}),dt=Object(r.a)((function(e){var t=[null].concat(e);return i((function(e,n){return n.apply(this,t)}))})),pt=n(4);function ht(e,t){return function(n,r,i,o){o=o||w;var s,a=!1;n(r,(function(n,r,o){i(n,(function(r,i){r?o(r):e(i)&&!s?(a=!0,s=t(!0,n),o(null,_)):o()}))}),(function(e){e?o(e):o(null,a?s:t(!1))}))}}function mt(e,t){return t}var yt=re(ht(pt.a,mt)),gt=ae(ht(pt.a,mt)),vt=Z(gt,1);function bt(e){return Object(r.a)((function(t,n){t.apply(null,n.concat(Object(r.a)((function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&pe(n,(function(t){console[e](t)})))}))))}))}var _t=bt("dir");function wt(e,t,n){n=K(n||w);var i=Object(r.a)((function(e,r){if(e)return n(e);r.push(o),t.apply(this,r)}));function o(t,r){return t?n(t):r?void e(i):n(null)}o(null,!0)}function St(e,t,n){n=K(n||w);var i=Object(r.a)((function(r,o){return r?n(r):t.apply(this,o)?e(i):void n.apply(null,[null].concat(o))}));e(i)}function Ct(e,t,n){St(e,(function(){return!t.apply(this,arguments)}),n)}function Et(e,t,n){function r(t){if(t)return n(t);e(i)}function i(e,i){return e?n(e):i?void t(r):n(null)}n=K(n||w),e(i)}function Tt(e){return function(t,n,r){return e(t,r)}}function Ot(e,t,n){ne(e,Tt(t),n)}function At(e,t,n,r){J(t)(e,Tt(n),r)}var Rt=Z(At,1);function It(e){return i((function(t,n){var r=!0;t.push((function(){var e=arguments;r?Object(Ze.a)((function(){n.apply(null,e)})):n.apply(null,e)})),e.apply(this,t),r=!1}))}function Lt(e){return!e}var jt=re(ht(Lt,Lt)),Mt=ae(ht(Lt,Lt)),kt=Z(Mt,1);var Nt=function(e){return function(t){return null==t?void 0:t[e]}};function Pt(e,t,n,r){var i=new Array(t.length);e(t,(function(e,t,r){n(e,(function(e,n){i[t]=!!n,r(e)}))}),(function(e){if(e)return r(e);for(var n=[],o=0;o<t.length;o++)i[o]&&n.push(t[o]);r(null,n)}))}function Dt(e,t,n,r){var i=[];e(t,(function(e,t,r){n(e,(function(n,o){n?r(n):(o&&i.push({index:t,value:e}),r())}))}),(function(e){e?r(e):r(null,we(i.sort((function(e,t){return e.index-t.index})),Nt("value")))}))}function Ft(e,t,n,r){(b(t)?Pt:Dt)(e,t,n,r||w)}var Wt=re(Ft),xt=ae(Ft),Ut=Z(xt,1);function Bt(e,t){var n=K(t||w),r=It(e);!function e(t){if(t)return n(t);r(e)}()}var $t=bt("log");function Vt(e,t,n,r){r=S(r||w);var i={};X(e,t,(function(e,t,r){n(e,t,(function(e,n){if(e)return r(e);i[t]=n,r()}))}),(function(e){r(e,i)}))}var qt=Z(Vt,1/0),Ht=Z(Vt,1);function Gt(e,t){return t in e}function zt(e,t){var n=Object.create(null),o=Object.create(null);t=t||pt.a;var s=i((function(i,s){var a=t.apply(null,i);Gt(n,a)?Object(Ze.a)((function(){s.apply(null,n[a])})):Gt(o,a)?o[a].push(s):(o[a]=[s],e.apply(null,i.concat(Object(r.a)((function(e){n[a]=e;var t=o[a];delete o[a];for(var r=0,i=t.length;r<i;r++)t[r].apply(null,e)})))))}));return s.memo=n,s.unmemoized=e,s}var Yt=n(20);function Qt(e,t,n){n=n||w;var i=b(t)?[]:{};e(t,(function(e,t,n){e(Object(r.a)((function(e,r){r.length<=1&&(r=r[0]),i[t]=r,n(e)})))}),(function(e){n(e,i)}))}function Kt(e,t){Qt(ne,e,t)}function Jt(e,t,n){Qt(J(t),e,n)}var Xt=Ze.a,Zt=function(e,t){return nt((function(t,n){e(t[0],n)}),t,1)},en=function(e,t){var n=Zt(e,t);return n.push=function(e,t,r){if(null==r&&(r=w),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,j(e)||(e=[e]),0===e.length)return Xt((function(){n.drain()}));t=t||0;for(var i=n._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,s=e.length;o<s;o++){var a={data:e[o],priority:t,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}Xt(n.process)},delete n.unshift,n};function tn(e,t){if(t=S(t||w),!j(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)e[n](t)}var nn=Array.prototype.slice;function rn(e,t,n,r){ot(nn.call(e).reverse(),t,n,r)}function on(e){return i((function(t,n){return t.push(Object(r.a)((function(e,t){if(e)n(null,{error:e});else{var r=null;1===t.length?r=t[0]:t.length>1&&(r=t),n(null,{value:r})}}))),e.apply(this,t)}))}function sn(e,t,n,r){Ft(e,t,(function(e,t){n(e,(function(e,n){t(e,!n)}))}),r)}var an=re(sn);function un(e){var t;return j(e)?t=we(e,on):(t={},me(e,(function(e,n){t[n]=on.call(this,e)}))),t}var cn=ae(sn),ln=Z(cn,1);var fn=function(e){return function(){return e}};function dn(e,t,n){var r=5,i=0,o={times:r,intervalFunc:fn(i)};function s(e,t){if("object"==typeof t)e.times=+t.times||r,e.intervalFunc="function"==typeof t.interval?t.interval:fn(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||r}}if(arguments.length<3&&"function"==typeof e?(n=t||w,t=e):(s(o,e),n=n||w),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var a=1;function u(){t((function(e){e&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(u,o.intervalFunc(a)):n.apply(null,arguments)}))}u()}var pn=function(e,t){return t||(t=e,e=null),i((function(n,r){function i(e){t.apply(null,n.concat(e))}e?dn(e,i,r):dn(i,r)}))};function hn(e,t){Qt(it,e,t)}var mn=re(ht(Boolean,pt.a)),yn=ae(ht(Boolean,pt.a)),gn=Z(yn,1);function vn(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}oe(e,(function(e,n){t(e,(function(t,r){if(t)return n(t);n(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,we(t.sort(r),Nt("value")))}))}function bn(e,t,n){var r,o,s=!1;function a(){s||(r.apply(null,arguments),clearTimeout(o))}function u(){var t=e.name||"anonymous",i=new Error('Callback function "'+t+'" timed out.');i.code="ETIMEDOUT",n&&(i.info=n),s=!0,r(i)}return i((function(n,i){r=i,o=setTimeout(u,t),e.apply(null,n.concat(a))}))}var _n=Math.ceil,wn=Math.max;var Sn=function(e,t,n,r){for(var i=-1,o=wn(_n((t-e)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=e,e+=n;return s};function Cn(e,t,n,r){ue(Sn(0,e,1),t,n,r)}var En=Z(Cn,1/0),Tn=Z(Cn,1);function On(e,t,n,r){3===arguments.length&&(r=n,n=t,t=j(e)?[]:{}),r=S(r||w),ne(e,(function(e,r,i){n(t,e,r,i)}),(function(e){r(e,t)}))}function An(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function Rn(e,t,n){if(n=K(n||w),!e())return n(null);var i=Object(r.a)((function(r,o){return r?n(r):e()?t(i):void n.apply(null,[null].concat(o))}));t(i)}function In(e,t,n){Rn((function(){return!e.apply(this,arguments)}),t,n)}var Ln=function(e,t){if(t=S(t||w),!j(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;!function i(o){if(n===e.length)return t.apply(null,[null].concat(o));var s=K(Object(r.a)((function(e,n){if(e)return t.apply(null,[e].concat(n));i(n)})));o.push(s),e[n++].apply(null,o)}([])};t.default={applyEach:se,applyEachSeries:le,apply:fe,asyncify:de,auto:_e,autoInject:Xe,cargo:rt,compose:at,concat:ct,concatSeries:ft,constant:dt,detect:yt,detectLimit:gt,detectSeries:vt,dir:_t,doDuring:wt,doUntil:Ct,doWhilst:St,during:Et,each:Ot,eachLimit:At,eachOf:ne,eachOfLimit:X,eachOfSeries:it,eachSeries:Rt,ensureAsync:It,every:jt,everyLimit:Mt,everySeries:kt,filter:Wt,filterLimit:xt,filterSeries:Ut,forever:Bt,log:$t,map:oe,mapLimit:ue,mapSeries:ce,mapValues:qt,mapValuesLimit:Vt,mapValuesSeries:Ht,memoize:zt,nextTick:Yt.a,parallel:Kt,parallelLimit:Jt,priorityQueue:en,queue:Zt,race:tn,reduce:ot,reduceRight:rn,reflect:on,reflectAll:un,reject:an,rejectLimit:cn,rejectSeries:ln,retry:dn,retryable:pn,seq:st,series:hn,setImmediate:Xt,some:mn,someLimit:yn,someSeries:gn,sortBy:vn,timeout:bn,times:En,timesLimit:Cn,timesSeries:Tn,transform:On,unmemoize:An,until:In,waterfall:Ln,whilst:Rn,all:jt,any:mn,forEach:Ot,forEachSeries:Rt,forEachLimit:At,forEachOf:ne,forEachOfSeries:it,forEachOfLimit:X,inject:ot,foldl:ot,foldr:rn,select:Wt,selectLimit:xt,selectSeries:Ut,wrapSync:de}},14:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},15:function(e,t,n){"use strict";var r=n(16),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.a||i||Function("return this")();t.a=o},16:function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(3))},17:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkDeprecatedConfigs=t.isEqualIgnoringArrayOrder=t.sleep=t.checkIfBoundsAreEqual=t.removeKeys=t.toRecord=t.isStackedWindow=t.wrapWithTimeout=t.timeoutPromise=t.getRandomWindowName=t.getUniqueName=t.getProp=t.composeRL=t.instrumentPromise=t.promisify=t.identity=t.isNumber=t.chunkArray=t.Timeout=t.mockLogger=t.capitalizeFirst=t.clone=t.isServiceInWindow=t.iAmAServiceWindow=t.guuid=void 0;const i=n(24),o=r(n(27)),s=r(n(53)),a=r(n(33)),u=r(n(54)),c=n(9),l=r(n(1)),f=window;function d(e,t){if(Array.isArray(e))return e.slice();try{return JSON.parse(JSON.stringify(e))}catch(e){return t("clone error",e),e}}t.guuid=function(){return i.v1()},t.iAmAServiceWindow=function(){return!(!f.finsembleServices||!f.finsembleServices.length)},t.isServiceInWindow=function(e){return f.finsembleServices&&f.finsembleServices.find(t=>t.name===e)},t.clone=d,t.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.mockLogger=new class{constructor({debug:e}={debug:!0}){e?(this.system=console,this.system.debug=console.log):this.system={warn:Function.prototype,debug:Function.prototype,log:Function.prototype,info:Function.prototype,error:console.error}}isLogMessage(){return!0}start(){}};function p(e="RouterClient"){return`${e}-${Math.floor(100*Math.random())}-${Math.floor(1e4*Math.random())}`}function h(e,t){return new Promise((n,r)=>{const i=setTimeout(()=>{clearTimeout(i),r(t)},e)})}function m(e,t,n){return`${e}.${t}.${n}`}function y(e,t,n){const r=""+m(e.baseString,e.newPath,e.newValue);l.default.system.warn(`${m(e.baseString,t,n)} has been deprecated in favor of ${r}`)}t.Timeout=class{constructor(e,t){this.fired=!1,this.id=setTimeout(()=>{e(),this.fired=!0},t),this.clear=this.clear.bind(this),this.didFire=this.didFire.bind(this)}clear(){this.fired||clearTimeout(this.id)}didFire(){return this.fired}},t.chunkArray=function(e,t){if(e<=0)throw new Error("Can't chunk array by number less than 0");return t.reduce((n,r,i)=>{if(i%e==0){const r=[];for(let n=i;n<i+e;n++)n<t.length&&r.push(t[n]);n.push(r)}return n},[])},t.isNumber=function(e){return!(!e||Number.isNaN(Number(e)))&&Number(e)},t.identity=function(e){return e},t.promisify=function(e,t){return function(){const n=Array.prototype.slice.call(arguments);return new Promise((r,i)=>{n.push((e,t)=>e?i(e):r(t)),e.apply(t,n)})}},t.instrumentPromise=async(e,t,n)=>{const r=t+" end";return e(t+" start"),n.then(()=>e(r))},t.composeRL=(...e)=>e.reduce((e,t)=>(...n)=>e(t(...n))),t.getProp=function e(t,n,r){const i=Array.isArray(n)?n:n.split(".").filter(e=>e.length);return i.length?e(t[i.shift()],i,r):void 0===t?r:t},t.getUniqueName=p,t.getRandomWindowName=function(e,t){return`${p(e)}-${t}`},t.timeoutPromise=h,t.wrapWithTimeout=function(e,t,n){return Promise.race([e,h(t,n)])},t.isStackedWindow=function(e){return e&&"StackedWindow"===(o.default(e,"windowIdentifier.windowType")||e.windowType)},t.toRecord=function(e,t){const n="string"==typeof e?t=>t[e]:e;return t.reduce((e,t)=>(e[n(t)]=t,e),{})},t.removeKeys=function(e,t){if(!e)return e;const n=Object.keys(e).filter(e=>!t.includes(e));return s.default(e,n)},t.checkIfBoundsAreEqual=function(e,t){if(!e||!t)return!1;const n=["left","right","top","bottom","width","height"],r=s.default(e,n),i=s.default(t,n);return!!a.default(r,i)},t.sleep=function(e,t=!1){return new Promise((n,r)=>{t?setTimeout(()=>{try{r("timeout expired")}catch(e){}},e):setTimeout(n,e)})},t.isEqualIgnoringArrayOrder=function(e,t){const n=d(e,Function.prototype),r=d(t,Function.prototype);return u.default(n,r,(e,t)=>{if(Array.isArray(e)&&Array.isArray(t))return u.default(e.sort(),t.sort())})},t.checkDeprecatedConfigs=function(e,t,n){const{baseString:r,oldPath:i,newPath:o,oldValue:s,newValue:a}=t;let u=c.ConfigUtilInstance.getDefault(e,m(r,o,a),null);return null===u&&(u=c.ConfigUtilInstance.getDefault(e,m(r,o,s),null),u?y(t,o,s):(u=c.ConfigUtilInstance.getDefault(e,m(r,i,a),null),u?y(t,i,a):(u=c.ConfigUtilInstance.getDefault(e,m(r,i,s),null),u?y(t,i,s):u=n))),u}},18:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._BaseClient=void 0;
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const i=r(n(6)),o=r(n(10)),s=r(n(1)),a=n(5),u=r(n(37)),c=n(28);class l extends u.default{constructor(e){super({name:e.name,sourceType:e.name.replace("Client","")}),this.status="offline",this.startupTime=0,this.initialized=!1,this.startupDependencies={services:[],clients:[]},this.finsembleWindow=null,this.windowName="",this.clientReadyQueue=[],this.processClientReadyQueue=()=>{for(const e of this.clientReadyQueue)e();this.clientReadyQueue=[]},this.onReady=e=>{this.clientReadyQueue.push(e),"online"===this.status&&this.processClientReadyQueue()},this.setClientOnline=()=>{this.status="online";const e=`STARTUP:CLIENT ONLINE:${this.finWindow.name}:${this.name}`;this.startupTime=window.performance.now()-this.startupTime;const t=()=>{this.logger.system.debug(e),this.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(this.name)};this._onReady?this._onReady(t):t()},this.initialize=(e=Function.prototype)=>{this.initialized||(this.initialized=!0,this.startupTime=performance.now(),this.routerClient.onReady(()=>{this.finWindow=a.System.Window.getCurrent(),this.windowName=this.finWindow.name,this.logger.system.debug("Baseclient Init Router Ready",this.name),c.FSBLDependencyManagerSingleton.startup.waitFor(this.startupDependencies,()=>{e(),this.setClientOnline()})}))},this.onClose=e=>{this.cleanup(),e&&e()},this.name=e.name,this._onReady=e.onReady,this.startupDependencies=e.startupDependencies||{services:[],clients:[]},this.logger=s.default,this.routerClient=i.default}addEventListener(e,t){super.addEventListener(e,t)}}t._BaseClient=l;t.default=function(e){o.default.args(e,"object=");const t=this;let n,r="offline";this.startupTime=0,e&&(e.onReady&&({onReady:n}=e),this.name=e.name),this.initialized=!1,this.startupDependencies=e.startupDependencies||{services:[],clients:[]},this.routerClient=i.default,this.finWindow=null,this.finsembleWindow=null,this.windowName="",this.requiredServices=[],this.requiredClients=[],this.clientReadyQueue=[],this.processClientReadyQueue=function(){for(let e=0;e<this.clientReadyQueue.length;e++){const t=this.clientReadyQueue[e];"function"==typeof t&&t()}this.clientReadyQueue=[]},this.onReady=function(e){this.clientReadyQueue.push(e),"online"===r&&this.processClientReadyQueue()},this.setClientOnline=function(){r="online";const e=`STARTUP:CLIENT ONLINE:${t.finWindow.name}:${t.name}`;t.startupTime=performance.now()-t.startupTime,n?n(()=>{s.default.system.debug(e),t.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(t.name)}):(s.default.system.debug(e),t.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(t.name))},this.initialize=function(e=Function.prototype){t.initialized||(t.initialized=!0,t.setClientOnline=t.setClientOnline.bind(t),t.startupTime=performance.now(),t.routerClient.onReady(()=>{t.finWindow=a.System.Window.getCurrent(),t.windowName=t.finWindow.name,s.default.system.debug("Baseclient Init Router Ready",t.name),c.FSBLDependencyManagerSingleton.startup.waitFor({clients:t.startupDependencies.clients||[]},()=>{e(),t.setClientOnline()})}))},this.onClose=function(){}}},19:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},2:function(e,t,n){"use strict";(function(e,r){n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return c}));var i,o=n(0),s="function"==typeof e&&e,a="object"==typeof r&&"function"==typeof r.nextTick;function u(e){setTimeout(e,0)}function c(e){return Object(o.a)((function(t,n){e((function(){t.apply(null,n)}))}))}i=s?e:a?r.nextTick:u,t.a=c(i)}).call(this,n(26).setImmediate,n(14))},20:function(e,t,n){"use strict";(function(e,r){var i,o=n(2);i=o.c?e.nextTick:o.d?r:o.b,t.a=Object(o.e)(i)}).call(this,n(14),n(26).setImmediate)},21:function(e,t,n){"use strict";(function(e){var r=n(16),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.a.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=a}).call(this,n(25)(e))},22:function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(13),o=r(n(10)),s=n(18),a=r(n(12)),u=r(n(1));class c extends s._BaseClient{constructor(e){super(e),this.listeners=[],this.changeSub=e=>{this.subs||(this.subs={}),this.subs[e]||(this.routerClient.query("configService.addListener",e,t=>{t&&u.default.system.error("Error adding listener to config service",t),this.routerClient.subscribe(e,this.handleChanges)}),this.subs[e]=!0)},this.handleChanges=(e,t)=>{e&&u.default.system.error(e),t.data.field||(t.data.field=null);const n=t.data.storeData?t.data.storeData:t.data.value;this.triggerListeners(t.data.field?t.data.field:"configService",n)},this.triggerListeners=(e,t)=>{if(this.listeners[e])for(let n=0;n<this.listeners[e].length;n++)"function"==typeof this.listeners[e][n]?this.listeners[e][n](null,{field:e,value:t}):u.default.system.warn("ConfigClient:triggerListeners: listener is not a function",e)},this.set=(e,t)=>{u.default.system.debug("ConfigClient.Set",e),"function"==typeof e?(t=e,o.default.args(t,"function"),e={}):o.default.args(e,"object",t,"function"),this.routerClient.query("config.set",e,(e,n)=>{t(e,n?n.data:null)})},this.processAndSet=this.processAndSet.bind(this),this.getValue=this.getValue.bind(this),this.getValues=this.getValues.bind(this),this.setValue=this.setValue.bind(this),this.setValues=this.setValues.bind(this),this.removeValue=this.removeValue.bind(this),this.removeValues=this.removeValues.bind(this),this.addListener=this.addListener.bind(this),this.addListeners=this.addListeners.bind(this),this.removeListener=this.removeListener.bind(this),this.removeListeners=this.removeListeners.bind(this),this.setPreference=this.setPreference.bind(this),this.getPreferences=this.getPreferences.bind(this)}getValue(e,t=Function.prototype){"string"==typeof e&&(e={field:e});return new Promise((n,r)=>{if(!e.field){const e="no field provided";return r(e),t(e)}this.routerClient.query("configService.getValue",{field:e.field},(e,i)=>e?(r(e),t(e)):(n({err:e,data:i.data}),t(e,i.data)))})}getValues(e,t=Function.prototype){if("function"==typeof e&&(t=e,e=null),e&&!Array.isArray(e))return this.getValue(e,t);return new Promise(n=>{this.routerClient.query("configService.getValues",{fields:e},(e,r)=>e?t(e):(n({err:e,data:r.data}),t(e,r.data)))})}setValue(e,t){const n={field:e.field,value:e.value};return this.routerClient.query("configService.setValue",n,e=>t?t(e):null)}setValues(e,t){return e?Array.isArray(e)?this.routerClient.query("configService.setValues",e,e=>t?t(e):null):u.default.system.error("ConfigClient.SetValues. Params must be an array"):u.default.system.error("ConfigClient.SetValues. No params given")}removeValue(e,t=Function.prototype){if(void 0!==e){if(e.field||"string"!=typeof e)return t("no field provided");e={field:e}}return e.value=null,this.setValue(e,t)}removeValues(e,t=Function.prototype){if(!Array.isArray(e))return t("The passed in parameter needs to be an array");i.map(e,this.removeValue,(e,n)=>t(e,n))}addListener(e,t,n){let r=null;"function"==typeof e&&(t=e,e={field:r}),({field:r}=e);const i="configService"+(r?"."+r:"");return this.listeners[i]?this.listeners[i].push(t):this.listeners[i]=[t],this.changeSub(i),n?n():null}addListeners(e,t,n){if(!Array.isArray(e))return this.addListener({field:e.field},t,n);for(let n=0;n<e.length;n++){let i=null;const o=e[n];var r;"string"==typeof o?i=o:o.field&&(({field:i}=o),r=o.listener);const s="configService"+(i?"."+i:"");r||t&&"function"==typeof t&&(r=t),this.listeners[s]?this.listeners[s].push(r):this.listeners[s]=[r],this.changeSub(s)}return n?n():null}removeListener(e,t,n){let r=null;"function"==typeof e&&(n=t,t=e,e={field:r}),({field:r}=e);const i=this.name+(r?"."+r:"");if(this.listeners[i])for(let e=0;e<this.listeners[i].length;e++)if(this.listeners[i][e]===t)return this.listeners[i].pop(e),n?n(null,!0):null;return n?n(null,!1):null}removeListeners(e,t,n){if(!Array.isArray(e))return"function"==typeof e?this.removeListener({},e,n):e.field&&this.removeListener(e,t,n),n("missing fields");let r=0;for(let n=0;n<e.length;n++){let o=null;const s=e[n];var i;"string"==typeof s?o=s:s.field&&(({field:o}=s),i=e[n].listener);const a="configService"+(o?"."+o:"");if(!i){if(!t||"function"!=typeof t)continue;i=t}for(let e=0;e<this.listeners[a].length;e++)this.listeners[a][e]===i&&(this.listeners[a].pop(n),r++)}return r<e.length?n("All listeners could not be found",!1):n?n(null,!0):null}get(e,t){u.default.system.debug("ConfigClient.Get",e),u.default.system.warn("This functionality has been deprecated. It will be removed in Finsemble version 3.0. Use getValue instead.",e),1===arguments.length?(t=e,o.default.args(t,"function"),e={}):o.default.args(e,"object",t,"function"),this.routerClient.query("config.get",e,(e,n)=>{t(e,n?n.data:null)})}processAndSet(e,t){if(u.default.system.debug("ConfigClient.processAndSet",e),o.default.args(e,"object",t,"function=")&&o.default.args2("params.newConfig",e.newConfig,"object","params.overwrite",e.overwrite,"boolean=","params.replace",e.replace,"boolean="),!e.overwrite&&e.replace){const e="cannot use replace option unless overwrite is also true";u.default.system.warn("ConfigClient.processAndSet:",e),t&&t(e,null)}else this.routerClient.query("config.processAndSet",e,(e,n)=>{t&&t(e,n?n.data:null)})}setPreference(e,t){this.routerClient.query("PreferencesService.setPreference",e,(e,n)=>{t&&t(e,n?n.data:null)})}async getPreferences(e,t){u.default.system.debug("ConfigClient.getPreferences",e),"function"==typeof e&&(t=e,e=null),await a.default.waitForStartup("preferencesService"),this.routerClient.query("PreferencesService.getPreferences",e,(e,n)=>{u.default.system.debug("ConfigClient.getPreferences response",n),t&&t(e,n?n.data:null)})}}const l=new c({startupDependencies:{services:["configService"]},onReady(e){e&&e()},name:"configClient"});t.default=l},23:function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var i,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):y(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)o(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,o,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},24:function(e,t,n){var r=n(29),i=n(40),o=i;o.v1=r,o.v4=i,e.exports=o},246:function(e,t,n){e.exports=n(99)},25:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},26:function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(46),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},27:function(e,t,n){(function(t){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,i=/^\./,o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=/^\[object .+?Constructor\]$/,u="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")();var f,d=Array.prototype,p=Function.prototype,h=Object.prototype,m=l["__core-js_shared__"],y=(f=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",g=p.toString,v=h.hasOwnProperty,b=h.toString,_=RegExp("^"+g.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=l.Symbol,S=d.splice,C=N(l,"Map"),E=N(Object,"create"),T=w?w.prototype:void 0,O=T?T.toString:void 0;function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function L(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}function j(e,t){for(var i,o=0,s=(t=function(e,t){if(W(e))return!1;var i=typeof e;if("number"==i||"symbol"==i||"boolean"==i||null==e||U(e))return!0;return r.test(e)||!n.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:W(i=t)?i:P(i)).length;null!=e&&o<s;)e=e[D(t[o++])];return o&&o==s?e:void 0}function M(e){return!(!x(e)||(t=e,y&&y in t))&&(function(e){var t=x(e)?b.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:a).test(function(e){if(null!=e){try{return g.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function k(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return M(n)?n:void 0}A.prototype.clear=function(){this.__data__=E?E(null):{}},A.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},A.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return v.call(t,e)?t[e]:void 0},A.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:v.call(t,e)},A.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?"__lodash_hash_undefined__":t,this},R.prototype.clear=function(){this.__data__=[]},R.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0)&&(n==t.length-1?t.pop():S.call(t,n,1),!0)},R.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},R.prototype.has=function(e){return L(this.__data__,e)>-1},R.prototype.set=function(e,t){var n=this.__data__,r=L(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},I.prototype.clear=function(){this.__data__={hash:new A,map:new(C||R),string:new A}},I.prototype.delete=function(e){return k(this,e).delete(e)},I.prototype.get=function(e){return k(this,e).get(e)},I.prototype.has=function(e){return k(this,e).has(e)},I.prototype.set=function(e,t){return k(this,e).set(e,t),this};var P=F((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(U(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return i.test(e)&&n.push(""),e.replace(o,(function(e,t,r,i){n.push(r?i.replace(s,"$1"):t||e)})),n}));function D(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(F.Cache||I),n}F.Cache=I;var W=Array.isArray;function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==b.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:j(e,t);return void 0===r?n:r}}).call(this,n(3))},28:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FSBLDependencyManagerSingleton=t.FSBLDependencyManager=void 0;const i=n(23),o=r(n(6)),s=n(8),a=r(n(12)),u=r(n(1));class c extends i.EventEmitter{constructor(e){super(),this.callback=e.callback,this.dependencies=e.dependencies,this.startupTimer=null,this.setStartupTimer=this.setStartupTimer.bind(this),this.clearStartupTimer=this.clearStartupTimer.bind(this),this.setStartupTimer()}clearStartupTimer(){clearTimeout(this.startupTimer),delete this.startupTimer}setStartupTimer(){const e=this;this.startupTimer=+setTimeout(()=>{e.emit("timeout")},1e4)}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}class f{constructor(){this.servicesAreAllOnline={},this.clientsAreAllOnline={},this.onlineClients=[],this.dependencies={},this.startupTimers={},this.startupTimerFired=!1,this.bindCorrectContext()}waitFor(e,t){const n=l();e.clients||(e.clients=[]),e.clients.length&&(e.clients=e.clients.map(e=>e.charAt(0).toLowerCase()+e.slice(1)));const r=new c({dependencies:e,callback:t});return r.on("timeout",()=>{this.onDependencyTimeout(r)}),this.dependencies[n]=r,this.checkDependencies(),r}onDependencyTimeout(e){const t=this.getOfflineClients();let n="APPLICATION LIFECYCLE:STARTUP:Dependency not online after 10 seconds.";t.length&&(n=`${n} Waiting for these clients: ${t.join(", ")}.`),e.emit("err",n)}checkDependencies(){for(const e in this.dependencies){const t=this.dependencies[e],{dependencies:n,callback:r}=t;(!n.clients.length||this.clientsAreAllOnline[e]||(this.clientsAreAllOnline[e]=this.checkClients(n.clients),this.clientsAreAllOnline[e]))&&(delete this.dependencies[e],t.clearStartupTimer(),r&&r())}}getOfflineClients(){let e=[];for(const t in this.dependencies){const{dependencies:n}=this.dependencies[t];e=e.concat(n.clients.filter(e=>!this.onlineClients.includes(e)))}return e.filter((t,n)=>e.indexOf(t)===n)}checkClients(e){return e.every(e=>this.onlineClients.includes(e))}setClientOnline(e){this.onlineClients.includes(e)||(this.onlineClients.push(e),this.checkDependencies())}getOnlineClients(){return this.onlineClients}bindCorrectContext(){this.checkDependencies=this.checkDependencies.bind(this),this.checkClients=this.checkClients.bind(this),this.getOfflineClients=this.getOfflineClients.bind(this),this.onDependencyTimeout=this.onDependencyTimeout.bind(this),this.waitFor=this.waitFor.bind(this)}}class d{constructor(){this.offlineServices=[],this.dependencies={},this.checkDependencies=this.checkDependencies.bind(this)}waitFor(e,t){u.default.system.debug("DependencyManager:waitFor",e),e.services||(e.services=[]);const n=l();this.dependencies[n]={dependencies:e,callback:t}}checkDependencies(){if(console.debug("checkDependencies",this.dependencies),Object.keys(this.dependencies))for(const e in this.dependencies){const{dependencies:t,callback:n}=this.dependencies[e];if(u.default.system.debug("DependencyManager:checkDependency",t.services,this.offlineServices),t.services.length){if(!this.checkServices(t.services))continue}console.debug("checkDependencies callback"),delete this.dependencies[e],n&&n()}}checkServices(e){return e.every(e=>this.offlineServices.includes(e))}setServiceOffline(e){u.default.system.debug("setServiceOffline",e),console.debug("setServiceOffline",e),this.offlineServices.push(e),this.checkDependencies()}}class p extends i.EventEmitter{constructor(){super(),this.startup=new f,this.shutdown=new d,this.RouterClient=o.default,this.AuthorizationCompleted=!1,this.bindCorrectContext(),this.onAuthorizationCompleted(this.startup.checkDependencies),o.default.onReady(this.listenForServices)}bindCorrectContext(){this.listenForServices=this.listenForServices.bind(this),this.onAuthorizationCompleted=this.onAuthorizationCompleted.bind(this)}setClientOnline(e){this.startup.setClientOnline(e)}onServiceStateChange(e){Object.keys(e).forEach(t=>{const{state:n}=e[t];"closed"===n&&this.shutdown.setServiceOffline(t)})}listenForServices(){u.default.system.debug("DependencyManager:listenForServices before wait"),a.default.waitForBootStage("kernel","stageEntered",()=>{u.default.system.debug("DependencyManager:listenForServices after wait"),this.RouterClient.subscribe(s.SERVICES_STATE_CHANNEL,(e,t)=>{u.default.system.debug("DependencyManager:listenForServices SERVICES_STATE_CHANNEL",t.data),this.onServiceStateChange(t.data)}),this.RouterClient.addListener(s.SERVICE_CLOSED_CHANNEL,(e,t)=>{u.default.system.debug("DependencyManager:listenForServices SERVICE_CLOSED_CHANNEL",t.data);const n={};n[t.data.name]={state:"closed"},this.onServiceStateChange(n)}),this.RouterClient.subscribe(s.APPLICATION_STATE_CHANNEL,(e,t)=>{switch(t.data.state){case"authenticated":case"ready":break;case"closing":this.shutdown.checkDependencies()}})})}onAuthorizationCompleted(e){this.AuthorizationCompleted?e():this.addListener("AuthorizationCompleted",e)}}t.FSBLDependencyManager=p,t.FSBLDependencyManagerSingleton=new p,t.default=t.FSBLDependencyManagerSingleton},29:function(e,t,n){var r=n(30),i=n(31),o=r(),s=[1|o[0],o[1],o[2],o[3],o[4],o[5]],a=16383&(o[6]<<8|o[7]),u=0,c=0;e.exports=function(e,t,n){var r=t&&n||0,o=t||[],l=void 0!==(e=e||{}).clockseq?e.clockseq:a,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:c+1,p=f-u+(d-c)/1e4;if(p<0&&void 0===e.clockseq&&(l=l+1&16383),(p<0||f>u)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=d,a=l;var h=(1e4*(268435455&(f+=122192928e5))+d)%4294967296;o[r++]=h>>>24&255,o[r++]=h>>>16&255,o[r++]=h>>>8&255,o[r++]=255&h;var m=f/4294967296*1e4&268435455;o[r++]=m>>>8&255,o[r++]=255&m,o[r++]=m>>>24&15|16,o[r++]=m>>>16&255,o[r++]=l>>>8|128,o[r++]=255&l;for(var y=e.node||s,g=0;g<6;++g)o[r+g]=y[g];return t||i(o)}},3:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},30:function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(this,n(3))},31:function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}},32:function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.LocalLogger=void 0;const{debug:r,warn:i,log:o,error:s}=console,a=()=>{},u=a,c={warn:i,info:a,log:o,debug:r,error:s,verbose:u},l={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0,Verbose:!0,LocalOnly:!1},f={console:{Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0},dev:l,system:l,perf:l};function d(e){return"logger.service.logMessages"===e}t.LocalLogger=class{constructor(){this.start=()=>{},this.isLogMessage=d,this.setting=()=>f,this.callStack=()=>function(){const{stack:e}=function(){try{throw Error("")}catch(e){return e}}(),t=(n="\n",r=4,e.split(n,r).join(n).length);var n,r;return"Log Stack: \n"+e.substring(t).substr(1)}(),this.unregisterClient=()=>{},this.setRouterClient=()=>{},this.warn=i,this.info=a,this.log=o,this.debug=r,this.error=s,this.verbose=u,this.system=c,this.perf=c}}},33:function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=t&&!t.nodeType&&t,h=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===p,y=m&&l.process,g=function(){try{return y&&y.binding&&y.binding("util")}catch(e){}}(),v=g&&g.isTypedArray;function b(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S,C,E,T=Array.prototype,O=Function.prototype,A=Object.prototype,R=d["__core-js_shared__"],I=O.toString,L=A.hasOwnProperty,j=(S=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",M=A.toString,k=RegExp("^"+I.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=m?d.Buffer:void 0,P=d.Symbol,D=d.Uint8Array,F=A.propertyIsEnumerable,W=T.splice,x=P?P.toStringTag:void 0,U=Object.getOwnPropertySymbols,B=N?N.isBuffer:void 0,$=(C=Object.keys,E=Object,function(e){return C(E(e))}),V=ge(d,"DataView"),q=ge(d,"Map"),H=ge(d,"Promise"),G=ge(d,"Set"),z=ge(d,"WeakMap"),Y=ge(Object,"create"),Q=we(V),K=we(q),J=we(H),X=we(G),Z=we(z),ee=P?P.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new re(e);this.size=t.size}function ae(e,t){var n=Ee(e),r=!n&&Ce(e),i=!n&&!r&&Te(e),o=!n&&!r&&!i&&Le(e),s=n||r||i||o,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var c in e)!t&&!L.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_e(c,u))||a.push(c);return a}function ue(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":x&&x in Object(e)?function(e){var t=L.call(e,x),n=e[x];try{e[x]=void 0;var r=!0}catch(e){}var i=M.call(e);r&&(t?e[x]=n:delete e[x]);return i}(e):function(e){return M.call(e)}(e)}function le(e){return Ie(e)&&ce(e)==r}function fe(e,t,n,a,u){return e===t||(null==e||null==t||!Ie(e)&&!Ie(t)?e!=e&&t!=t:function(e,t,n,a,u,c){var l=Ee(e),f=Ee(t),d=l?"[object Array]":be(e),p=f?"[object Array]":be(t),h=(d=d==r?o:d)==o,m=(p=p==r?o:p)==o,y=d==p;if(y&&Te(e)){if(!Te(t))return!1;l=!0,h=!1}if(y&&!h)return c||(c=new se),l||Le(e)?he(e,t,n,a,u,c):function(e,t,n,r,o,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new D(e),new D(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=_;case s:var l=1&r;if(c||(c=w),e.size!=t.size&&!l)return!1;var f=u.get(e);if(f)return f==t;r|=2,u.set(e,t);var d=he(c(e),c(t),r,o,a,u);return u.delete(e),d;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,d,n,a,u,c);if(!(1&n)){var g=h&&L.call(e,"__wrapped__"),v=m&&L.call(t,"__wrapped__");if(g||v){var b=g?e.value():e,S=v?t.value():t;return c||(c=new se),u(b,S,n,a,c)}}if(!y)return!1;return c||(c=new se),function(e,t,n,r,i,o){var s=1&n,a=me(e),u=a.length,c=me(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var f=a[l];if(!(s?f in t:L.call(t,f)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var p=!0;o.set(e,t),o.set(t,e);var h=s;for(;++l<u;){f=a[l];var m=e[f],y=t[f];if(r)var g=s?r(y,m,f,t,e,o):r(m,y,f,e,t,o);if(!(void 0===g?m===y||i(m,y,n,r,o):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,a,u,c)}(e,t,n,a,fe,u))}function de(e){return!(!Re(e)||function(e){return!!j&&j in e}(e))&&(Oe(e)?k:a).test(we(e))}function pe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||A,t!==r)return $(e);var t,n,r,i=[];for(var o in Object(e))L.call(e,o)&&"constructor"!=o&&i.push(o);return i}function he(e,t,n,r,i,o){var s=1&n,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,d=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++l<a;){var p=e[l],h=t[l];if(r)var m=s?r(h,p,l,t,e,o):r(p,h,l,e,t,o);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!b(t,(function(e,t){if(s=t,!d.has(s)&&(p===e||i(p,e,n,r,o)))return d.push(t);var s}))){f=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function me(e){return function(e,t,n){var r=t(e);return Ee(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,je,ve)}function ye(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ge(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}ne.prototype.clear=function(){this.__data__=Y?Y(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(Y){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return L.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return Y?void 0!==t[e]:L.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Y&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=ue(t,e);return!(n<0)&&(n==t.length-1?t.pop():W.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=ue(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return ue(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=ue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||re),string:new ne}},ie.prototype.delete=function(e){var t=ye(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ye(this,e).get(e)},ie.prototype.has=function(e){return ye(this,e).has(e)},ie.prototype.set=function(e,t){var n=ye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new re,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var ve=U?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}(U(e),(function(t){return F.call(e,t)})))}:function(){return[]},be=ce;function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function we(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Se(e,t){return e===t||e!=e&&t!=t}(V&&"[object DataView]"!=be(new V(new ArrayBuffer(1)))||q&&be(new q)!=i||H&&"[object Promise]"!=be(H.resolve())||G&&be(new G)!=s||z&&"[object WeakMap]"!=be(new z))&&(be=function(e){var t=ce(e),n=t==o?e.constructor:void 0,r=n?we(n):"";if(r)switch(r){case Q:return"[object DataView]";case K:return i;case J:return"[object Promise]";case X:return s;case Z:return"[object WeakMap]"}return t});var Ce=le(function(){return arguments}())?le:function(e){return Ie(e)&&L.call(e,"callee")&&!F.call(e,"callee")},Ee=Array.isArray;var Te=B||function(){return!1};function Oe(e){if(!Re(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Re(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var Le=v?function(e){return function(t){return e(t)}}(v):function(e){return Ie(e)&&Ae(e.length)&&!!c[ce(e)]};function je(e){return null!=(t=e)&&Ae(t.length)&&!Oe(t)?ae(e):pe(e);var t}n.exports=function(e,t){return fe(e,t)}}).call(this,n(3),n(19)(e))},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHECKPOINT_CHANNEL_BASE=t.STAGE_CHANNEL=t.STATUS_CHANNEL_BASE=t.SHOW_SYSLOG_CHANNEL=t.SYSLOG_CHANNEL=t.CRITICAL_BOOT_STAGES=t.ALL_BOOT_STAGES=void 0,t.ALL_BOOT_STAGES=["microkernel","kernel","authentication","preuser","earlyuser","user"],t.CRITICAL_BOOT_STAGES=["microkernel","kernel","authentication"],t.SYSLOG_CHANNEL="systemManager.systemlog",t.SHOW_SYSLOG_CHANNEL="systemManager.showSystemlog",t.STATUS_CHANNEL_BASE="systemManager.boot.status",t.STAGE_CHANNEL="systemManager.boot.stage",t.CHECKPOINT_CHANNEL_BASE="systemManager.checkpoint"},35:function(e,t,n){"use strict";(function(e){var r=n(15),i=n(36),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.a.Buffer:void 0,u=(a?a.isBuffer:void 0)||i.a;t.a=u}).call(this,n(25)(e))},36:function(e,t,n){"use strict";t.a=function(){return!1}},37:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6)),o=r(n(1)),s=r(n(58));t.default=class{constructor(e){this.eventList=[],this.eventHandlerMap={},this.eventGuidMap={},this.name=e.name,this.sourceType=e.sourceType,window.addEventListener("beforeunload",()=>{this.cleanup()})}addListener(e,t){return this.addEventListener(e,t)}removeListener(e,t){return this.removeEventListener(e,t)}addEventListener(e,t){if(!t)return console.error("no handler",e);if(o.default.system.debug("addEventListener:",e),this.eventHandlerMap[e]||(this.eventHandlerMap[e]=[],this.eventGuidMap[e]=[]),!this.eventHandlerMap[e].includes(t)){const n=`${window.name}_public_${Date.now()}_${Math.random()}`;this.eventHandlerMap[e].push(t),this.eventGuidMap[e].push(n),i.default.transmit("Finsemble.RegisterInterruptibleEvent."+this.name,{event:e,listenerGuid:n}),i.default.addResponder("Finsemble.Interrupt."+n,(r,i)=>{new s.default({source:this.name,sourceType:this.sourceType,listenerGuid:n,handler:t,event:e},i)})}}removeEventListener(e,t){if(o.default.system.debug("removeEventListener:",e),!this.eventHandlerMap[e])return o.default.system.warn("not found");let n=this.eventHandlerMap[e].indexOf(t);if(-1!==n){const t=this.eventGuidMap[e][n];this.eventHandlerMap[e].splice(n,1),this.eventGuidMap[e].splice(n,1),i.default.transmit("Finsemble.UnregisterInterruptibleEvent."+window.name,{event:e,guid:t}),i.default.removeResponder("Finsemble.Interrupt."+t)}}cleanup(){for(var e of Object.keys(this.eventHandlerMap))for(var t of this.eventHandlerMap[e])this.removeEventListener(e,t)}}},39:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1)),o=n(9),s=n(5),a=r(n(12));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
let u=null;var c=new function(){const e={},t={};let r=null;this.getDefaultTemplateURL=function(e){r?setTimeout(()=>{e(r)},0):(u||(u=n(22).default),u.get({field:"finsemble"},(t,n)=>{r=o.ConfigUtilInstance.getDefault(n,"finsemble.notificationURL",n.moduleRoot+"/components/system/notification/notification.html"),e(r)}))},this.alert=function(e,t,n,r,i){const o=this;i&&i.url?this.alertInternal(e,t,n,r,i,i.url):this.getDefaultTemplateURL(s=>{o.alertInternal(e,t,n,r,i,s)})},this.alertInternal=function(n,r,o,u,c,l){let f=!1;const d="UserNotification.alert."+o,p=(c=c||{}).duration||864e5;switch(r){case"ONCE-SINCE-STARTUP":d in e?f=!1:(f=!0,e[d]=!0);break;case"MAX-COUNT":{let e=0;const n=c.maxCount||1;d in t&&(e=t[d]),t[d]=++e,e<=n&&(f=!0);break}default:f=!0}if(i.default.log("UserNotification.alert",n,f,r,o,u,c),f){const e={url:l,message:u,timeout:p};a.default.systemLog({notification:!0},"Notification: "+u),new s.System.Notification(e)}}};t.default=c,e.exports=t.default},4:function(e,t,n){"use strict";t.a=function(e){return e}},40:function(e,t,n){var r=n(30),i=n(31);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||i(s)}},41:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(9),o=r(n(1)),s=n(5),a={activeTransports:{},addTransport(e,t){this.activeTransports[e]=t,o.default.system.log(`RouterTransport ${e} added to activeTransports`)},getActiveTransports(e){const t=[];function n(e){-1===t.indexOf(e)&&t.push(e)}return s.System.InterApplicationBus&&n("IPCBus"),"Electron"===s.System.container&&n("FinsembleTransport"),SharedWorker&&n("SharedWorker"),n(e.sameDomainTransport),n(e.crossDomainTransport),o.default.system.log("getActiveTransports",t),t},getDefaultTransport:(e,t,n,r)=>a.getTransport(e,"IPCBus",t,n,r),getRecommendedTransport(e,t,n,r){const i=function(){const{sameDomainTransport:t}=e,{crossDomainTransport:n}=e;let r=t;return function(){const t=document.createElement("a");t.href=e.routerDomainRoot;const n=window.location.hostname===t.hostname,r=window.location.protocol===t.protocol,i=(void 0!==window.location.port?window.location.port:80)===(void 0!==t.port?t.port:80),s=!(n&&i&&r);return o.default.system.debug(`Transport crossDomain=${s} (${n}:${r}:${i})`),s}()&&(r=n),o.default.system.log(`Transport Info: Selected=${r} SameDomainDefault=${t} CrossDomainDefault=${n}`),console.log(`Transport Info: Selected=${r} SameDomainDefault=${t} CrossDomainDefault=${n}`),r}();return a.getTransport(e,i,t,n,r)},getTransport(e,t,n,r,i){const o=this;return new Promise((s,a)=>{const u=o.activeTransports[t];u?new u(e,n,r,i,e=>{s(e)}):a("unknown router transport name: "+t)})}};const u={SharedWorkerTransport:function(e,t,n,r,i){let s;const a=this;this.send=function(e,t){1===arguments.length?(t=arguments[0],e=null):(e=arguments[0],t=arguments[1]),o.default.system.verbose("SharedWorkerTransport Outgoing Transport",t);try{s.port.postMessage([e,t])}catch(e){o.default.system.error("SharedWorkerTransport: post message failed: "+JSON.stringify(e),"Probable cause is sending illegal data type (e.g. function).")}},this.identifier=function(){return"SharedWorker"};const u=e.transportSettings.SharedWorker&&e.transportSettings.SharedWorker.workerPath?e.transportSettings.SharedWorker.workerPath:e.routerDomainRoot+"/common/routerSharedWorker.js";o.default.system.log(`SharedWorker Transport Initializing for ${n} using ${u}`),console.log(`SharedWorker Transport Initializing for ${n} using ${u}`),s=new SharedWorker(u,{name:"Finsemble",credentials:"include"}),s.port.onmessage=function(e){const n=e.data[0],r=e.data[1],i={transportID:a.identifier(),port:n};o.default.system.verbose("SharedWorkerTransport Incoming Transport",i,"Message",r),t(i,r)},s.onerror=function(e){o.default.system.error("SharedWorkerTransport Transport Error"+JSON.stringify(e))},s.port.start(),"RouterService"===n&&s.port.postMessage({data:"connect",source:"RouterService"}),i(this)},IPCTransport:function(e,t,n,r,i){const{uuid:a}=s.System.Application.getCurrent(),u=this;this.send=function(e,t){let n;1===arguments.length?(n=r,t=arguments[0]):(n=e.name,t=arguments[1]),o.default.system.verbose("IPCTransport Outgoing Transport",a,n,"Message",t),s.System.InterApplicationBus.publish(n,t,()=>{},()=>{})},this.identifier=function(){return"IPCBus"},o.default.system.log("IPCBus Transport Initializing for "+n),console.log("IPCBus Transport Initializing for "+n),s.System.InterApplicationBus.subscribe("*",n,(function(e,n){const r={transportID:u.identifier(),senderUuid:n,name:e.header.origin};o.default.system.verbose("IPCTransport Incoming Transport",r,"Message",e),t(r,e)}),null,(function(e){o.default.system.error("IPCBus Subscribe Failure: "+e)})),i(this)},FinsembleTransport:function(e,t,n,r,s){const a=i.ConfigUtilInstance.getDefault(e,"params.IAC.serverAddress","ws://127.0.0.1:3376"),u=i.ConfigUtilInstance.getDefault(e,"params.transportSettings.FinsembleTransport.serverAddress",a)+"/router",c=this;let l;function f(e){const n={transportID:c.identifier(),client:e.clientMessage.header.origin};o.default.system.verbose("FinsembleTransport Incoming Transport",n,"Message",e),t(n,e.clientMessage)}function d(){o.default.system.error("FinsembleTransport Connection Timeout for "+n),s(c)}function p(){o.default.system.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),console.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),u.startsWith("ws:")||u.startsWith("wss:")||console.error("wss not found as SOCKET_SERVER_ADDRESS.  Use wss!",u),l=new WebSocket(u);const e=setTimeout(d,3e3);l.addEventListener("open",()=>{clearTimeout(e),o.default.system.log("FinsembleTransport Connected to Server"),console.log("FinsembleTransport Connected to Server"),l.addEventListener("message",e=>{const t=JSON.parse(e.data);("RouterService"===n&&"ROUTER_SERVICE"==t.dest||n===t.message.client)&&f(t.message)}),s(c)})}this.send=function(e,t){let n,r;1===arguments.length?(n="ROUTER_SERVICE",r={clientMessage:t=arguments[0]}):(n="ROUTER_CLIENT",t=arguments[1],r={client:e.client,clientMessage:t}),o.default.system.verbose("FinsembleTransport Outgoing Transport",n,"NewMessage",r),l.readyState===WebSocket.OPEN&&l.send(JSON.stringify({dest:n,message:r})),l.readyState===WebSocket.CONNECTING&&l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))}),l.readyState===WebSocket.CLOSED&&(p(),l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))})),l.readyState===WebSocket.CLOSING&&(l.onclose=()=>{p(),l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))})})},this.identifier=function(){return"FinsembleTransport"},p(),o.default.system.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),console.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),(u.startsWith("ws:")||u.startsWith("wss:"))&&console.error("wss not found as SOCKET_SERVER_ADDRESS.  Use wss!",u)},FinsembleCloudTransport:function(e,t,n,r,s){let a;const u=i.ConfigUtilInstance.getDefault(e,"params.transportSettings.FinsembleCloudTransport.serverAddress",e.applicationRoot),{FinsembleUUID:c}=e;a="/"===u.substr(u.length-1)?u.substring(0,u.length-1):u;const l=a+"/router",f=this;let d;function p(e){const n={transportID:f.identifier(),client:e.clientMessage.header.origin};o.default.system.verbose("FinsembleCloudTransport Incoming Transport",n,"Message",e),t(n,e.clientMessage)}this.send=function(e,t){let n,r;1===arguments.length?(n="ROUTER_SERVICE",r={FinsembleUUID:c,clientMessage:t=arguments[0]}):(n="ROUTER_CLIENT",t=arguments[1],r={FinsembleUUID:c,client:e.client,clientMessage:t}),o.default.system.verbose("FinsembleCloudTransport Outgoing Transport",n,"NewMessage",r),d.emit(n,r)},this.identifier=function(){return"FinsembleCloudTransport"},o.default.system.log(`FinsembleCloudTransport Transport Initializing for ${n} using ${l}`),console.log(`FinsembleCloudTransport Transport Initializing for ${n} using ${l}`),-1!==l.indexOf("ws:")||console.error("SOCKET_SERVER_ADDRESS not wss!",l),d=new WebSocket(l);const h=setTimeout((function(){o.default.system.error("FinsembleCloudTransport Connection Timeout for "+n),s(f)}),3e3);d.on("connect",()=>{clearTimeout(h),o.default.system.log("FinsembleCloudTransport Connected to Server",c),console.log("FinsembleCloudTransport Connected to Server"),"RouterService"===n?(o.default.system.debug("Setting Up Socket Connection","ROUTER_SERVICE_IN"+c),console.log("Setting Up Socket Connection","ROUTER_SERVICE_IN"+c),d.on("ROUTER_SERVICE_IN"+c,e=>{p(e)})):(o.default.system.debug("Setting Up Socket Connection",n+c),console.log("SETTING UP Socket CONNECTION",n+c),d.on(n+c,e=>{p(e)})),s(f)})}};a.addTransport("SharedWorker",u.SharedWorkerTransport),a.addTransport("IPCBus",u.IPCTransport),a.addTransport("FinsembleTransport",u.FinsembleTransport);var c=a;t.default=c,e.exports=t.default},42:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(23),o=r(n(1)),s=(r(n(33)),r(n(44))),a=r(n(45)),u=n(17);let c;class l extends i.EventEmitter{constructor(e,t,n){if(super(),!n||!n.System)throw new Error("Monitors class requires dependency injection. Ensure that System is being passed in.");({System:c}=n),this.cachedMonitorInfo=null,this.limitedMonitorRefreshQueue=new s.default({concurrency:1}),this.bindAllFunctions(),this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(e)),c.addEventListener("monitor-info-changed",()=>{this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(t))}),c.addEventListener("session-changed",e=>{e&&("object"!=typeof e||!e.hasOwnProperty("reason")||"unlock"!==e.reason&&"remote-connect"!==e.reason&&"unknown"!==e.reason)||this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(t))})}bindAllFunctions(){let e=this;for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(e))){let n=e[t];n instanceof Function&&n!==l&&(e[t]=e[t].bind(e))}}asyncIt(e,t){return t(e),e}rationalizeMonitor(e){e.monitorRect.width=e.monitorRect.right-e.monitorRect.left,e.monitorRect.height=e.monitorRect.bottom-e.monitorRect.top,e.availableRect.width=e.availableRect.right-e.availableRect.left,e.availableRect.height=e.availableRect.bottom-e.availableRect.top}calculateMonitorScale(e,t){return(t.right-t.left)/(e.right-e.left)}monitorInfoIsChanged(e,t){if(!e||!t)return!0;if(e.nonPrimaryMonitors.length!==t.nonPrimaryMonitors.length)return!0;if(!(0,u.checkIfBoundsAreEqual)(e.primaryMonitor.availableRect,t.primaryMonitor.availableRect))return!0;if(!(0,u.checkIfBoundsAreEqual)(e.primaryMonitor.monitorRect,t.primaryMonitor.monitorRect))return!0;e.nonPrimaryMonitors.sort((e,t)=>e.deviceName>t.deviceName?1:e.deviceName<t.deviceName?-1:0),t.nonPrimaryMonitors.sort((e,t)=>e.deviceName>t.deviceName?1:e.deviceName<t.deviceName?-1:0);let n=!1;return e.nonPrimaryMonitors.forEach((e,r)=>{const i=t.nonPrimaryMonitors[r];(0,u.checkIfBoundsAreEqual)(e.availableRect,i.availableRect)&&(0,u.checkIfBoundsAreEqual)(e.monitorRect,i.monitorRect)||(n=!0)}),n}async refreshMonitors(e=Function.prototype){this.limitedMonitorRefreshQueue.clear();const t=await c.getMonitorInfo();if(!this.monitorInfoIsChanged(this.cachedMonitorInfo,t))return o.default.system.info("Skipped refreshMonitors because monitors do not change."),e(this.allMonitors);this.allMonitors=[];let{primaryMonitor:n}=t;if(Object.entries(n).length){n.whichMonitor="primary",n.position=0,this.allMonitors.push(Object.assign({},n));for(let e=0;e<t.nonPrimaryMonitors.length;e++){let n=t.nonPrimaryMonitors[e];n.whichMonitor=e,n.position=e+1,this.allMonitors.push(n)}for(let e=0;e<this.allMonitors.length;e++){let t=this.allMonitors[e];this.rationalizeMonitor(t)}this.cachedMonitorInfo=(0,a.default)(t),e(this.allMonitors),this.ready=!0,1===this.limitedMonitorRefreshQueue.pending&&this.emit("monitors-changed",{monitors:this.allMonitors})}else o.default.system.info("There is no primary monitor in 'monitorInfo' - the system is still in the process of updating the monitor information. Returning from monitorsAndScaling -> refreshMonitors")}getAllMonitors(e=Function.prototype){return this.ready?this.asyncIt(JSON.parse(JSON.stringify(this.allMonitors)),e):e?void this.refreshMonitors(e):"not ready"}getMonitorFromScaledXY(e,t,n=Function.prototype){return new Promise(r=>{if(!this.ready)return this.refreshMonitors(()=>{this.getMonitorFromScaledXY(e,t,n)}),"not ready";let i=null;for(var o=this.allMonitors,s=0;s<o.length;s++){var a=o[s],{monitorRect:u}=a;if(e>=u.left&&e<u.right&&t>=u.top&&t<u.bottom){i=a;break}}r(i),n(i)})}getMonitorFromUnscaledXY(e,t,n=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.getMonitorFromUnscaledXY(e,t,n)}),"not ready";for(var r=this.allMonitors,i=0;i<r.length;i++){var o=r[i],s=o.monitor.scaledRect;if(e>=s.left&&e<s.right&&t>=s.top&&t<s.bottom)return this.asyncIt(o,n)}return this.asyncIt(null,n)}async translatePointFromScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translatePointFromScaled(e,t)}),"not ready";var n;e.point?({point:n}=e):n=e;var{monitor:r}=e;if(!r){r=(await this.getMonitorFromScaledXY(n.x,n.y)).data}let i=null;if(r){var o=n.x-r.monitorRect.left,s=n.y-r.monitorRect.top,a=o*r.deviceScaleFactor,u=s*r.deviceScaleFactor;i={x:a+r.monitor.scaledRect.left,y:u+r.monitor.scaledRect.top}}return t(i),Promise.resolve(i)}translatePointToScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translatePointToScaled(e,t)}),"not ready";var n;e.point?({point:n}=e):n=e;var r=e.monitor||this.getMonitorFromUnscaledXY(n.x,n.y);if(!r)return this.asyncIt(null,t);var i=n.x-r.monitor.scaledRect.left,o=n.y-r.monitor.scaledRect.top,s=i/r.deviceScaleFactor,a=o/r.deviceScaleFactor,u={x:s+r.monitorRect.left,y:a+r.monitorRect.top};return this.asyncIt(u,t)}async translateRectToScaled(e,t=Function.prototype){let n;if(!this.ready)return this.refreshMonitors(()=>{this.translateRectToScaled(e,t)}),"not ready";var r=this.translatePointToScaled({x:e.left,y:e.top}),i=this.translatePointToScaled({x:e.right,y:e.bottom});return!r&&i&&(n=await this.getMonitorFromScaledXY(i),r=this.translatePointToScaled({monitor:n,point:{x:e.left,y:e.top}})),!i&&r&&(n=await this.getMonitorFromScaledXY(i),i=this.translatePointToScaled({monitor:n,point:{x:e.right,y:e.bottom}})),this.asyncIt({top:r?r.y:null,left:r?r.x:null,bottom:i?i.y:null,right:i?i.x:null,height:r&&i?i.y-r.y:null,width:r&&i?i.x-r.x:null},t)}translateRectFromScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translateRectFromScaled(e,t)}),"not ready";var n=this.translatePointFromScaled({x:e.left,y:e.top}),r=this.translatePointFromScaled({x:e.right,y:e.bottom});return!n&&r&&(n=this.translatePointFromScaled({monitor:this.getMonitorFromUnscaledXY(r),point:{x:e.left,y:e.top}})),!r&&n&&(r=this.translatePointFromScaled({monitor:this.getMonitorFromUnscaledXY(n),point:{x:e.right,y:e.bottom}})),this.asyncIt({top:n?n.y:null,left:n?n.x:null,bottom:r?r.y:null,right:r?r.x:null,height:n&&r?r.y-n.y:null,width:n&&r?r.x-n.x:null},t)}}var f=l;t.default=f,e.exports=t.default},43:function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=a||u||Function("return this")(),l=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return c.Date.now()};function h(e,t,n){var r,i,o,s,a,u,c=0,l=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,c=t,s=e.apply(o,n)}function b(e){return c=e,a=setTimeout(w,t),l?v(e):s}function _(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-c>=o}function w(){var e=p();if(_(e))return S(e);a=setTimeout(w,function(e){var n=t-(e-u);return h?d(n,o-(e-c)):n}(e))}function S(e){return a=void 0,g&&r?v(e):(r=i=void 0,s)}function C(){var e=p(),n=_(e);if(r=arguments,i=this,u=e,n){if(void 0===a)return b(u);if(h)return a=setTimeout(w,t),v(u)}return void 0===a&&(a=setTimeout(w,t)),s}return t=y(t)||0,m(n)&&(l=!!n.leading,o=(h="maxWait"in n)?f(y(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=i=a=void 0},C.flush=function(){return void 0===a?s:S(p())},C}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=i.test(e);return a||o.test(e)?s(e.slice(2),a?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return m(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),h(e,t,{leading:r,maxWait:t,trailing:i})}}).call(this,n(3))},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(48),i=n(49),o=n(51),s=()=>{},a=new i.TimeoutError;t.default=class extends r{constructor(e){if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,r)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)});n(await o)}catch(e){r(e)}this._next()},t),this._tryToStartAnother()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(e){this._timeout=e}get timeout(){return this._timeout}}},45:function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",s="[object Map]",a="[object Set]",u=/\w*$/,c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[r]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[s]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[a]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[i]=f["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,h=d||p||Function("return this")(),m=t&&!t.nodeType&&t,y=m&&"object"==typeof n&&n&&!n.nodeType&&n,g=y&&y.exports===m;function v(e,t){return e.set(t[0],t[1]),e}function b(e,t){return e.add(t),e}function _(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function w(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function C(e,t){return function(n){return e(t(n))}}function E(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var T,O=Array.prototype,A=Function.prototype,R=Object.prototype,I=h["__core-js_shared__"],L=(T=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"",j=A.toString,M=R.hasOwnProperty,k=R.toString,N=RegExp("^"+j.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g?h.Buffer:void 0,D=h.Symbol,F=h.Uint8Array,W=C(Object.getPrototypeOf,Object),x=Object.create,U=R.propertyIsEnumerable,B=O.splice,$=Object.getOwnPropertySymbols,V=P?P.isBuffer:void 0,q=C(Object.keys,Object),H=ye(h,"DataView"),G=ye(h,"Map"),z=ye(h,"Promise"),Y=ye(h,"Set"),Q=ye(h,"WeakMap"),K=ye(Object,"create"),J=we(H),X=we(G),Z=we(z),ee=we(Y),te=we(Q),ne=D?D.prototype:void 0,re=ne?ne.valueOf:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){this.__data__=new oe(e)}function ue(e,t){var n=Ce(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ee(e)}(e)&&M.call(e,"callee")&&(!U.call(e,"callee")||k.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],i=n.length,o=!!i;for(var s in e)!t&&!M.call(e,s)||o&&("length"==s||be(s,i))||n.push(s);return n}function ce(e,t,n){var r=e[t];M.call(e,t)&&Se(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function le(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function fe(e,t,n,c,l,d,p){var h;if(c&&(h=d?c(e,l,d,p):c(e)),void 0!==h)return h;if(!Ae(e))return e;var m=Ce(e);if(m){if(h=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&M.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,h)}else{var y=ve(e),g=y==i||y==o;if(Te(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==y||y==r||g&&!d){if(w(e))return d?e:{};if(h=function(e){return"function"!=typeof e.constructor||_e(e)?{}:(t=W(e),Ae(t)?x(t):{});var t}(g?{}:e),!t)return function(e,t){return he(e,ge(e),t)}(e,function(e,t){return e&&he(t,Re(t),e)}(h,e))}else{if(!f[y])return d?e:{};h=function(e,t,n,r){var i=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case s:return function(e,t,n){return _(t?n(S(e),!0):S(e),v,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,u.exec(e));return t.lastIndex=e.lastIndex,t}(e);case a:return function(e,t,n){return _(t?n(E(e),!0):E(e),b,new e.constructor)}(e,r,n);case"[object Symbol]":return o=e,re?Object(re.call(o)):{}}var o}(e,y,fe,t)}}p||(p=new ae);var C=p.get(e);if(C)return C;if(p.set(e,h),!m)var T=n?function(e){return function(e,t,n){var r=t(e);return Ce(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Re,ge)}(e):Re(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(T||e,(function(r,i){T&&(r=e[i=r]),ce(h,i,fe(r,t,n,c,i,e,p))})),h}function de(e){return!(!Ae(e)||(t=e,L&&L in t))&&(Oe(e)||w(e)?N:c).test(we(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new F(t).set(new F(e)),t}function he(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],a=r?r(n[s],e[s],s,n,e):void 0;ce(n,s,void 0===a?e[s]:a)}return n}function me(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}ie.prototype.clear=function(){this.__data__=K?K(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return M.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:M.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():B.call(t,n,1),!0)},oe.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return le(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},se.prototype.clear=function(){this.__data__={hash:new ie,map:new(G||oe),string:new ie}},se.prototype.delete=function(e){return me(this,e).delete(e)},se.prototype.get=function(e){return me(this,e).get(e)},se.prototype.has=function(e){return me(this,e).has(e)},se.prototype.set=function(e,t){return me(this,e).set(e,t),this},ae.prototype.clear=function(){this.__data__=new oe},ae.prototype.delete=function(e){return this.__data__.delete(e)},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!G||r.length<199)return r.push([e,t]),this;n=this.__data__=new se(r)}return n.set(e,t),this};var ge=$?C($,Object):function(){return[]},ve=function(e){return k.call(e)};function be(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function _e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||R)}function we(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Se(e,t){return e===t||e!=e&&t!=t}(H&&"[object DataView]"!=ve(new H(new ArrayBuffer(1)))||G&&ve(new G)!=s||z&&"[object Promise]"!=ve(z.resolve())||Y&&ve(new Y)!=a||Q&&"[object WeakMap]"!=ve(new Q))&&(ve=function(e){var t=k.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?we(n):void 0;if(r)switch(r){case J:return"[object DataView]";case X:return s;case Z:return"[object Promise]";case ee:return a;case te:return"[object WeakMap]"}return t});var Ce=Array.isArray;function Ee(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Oe(e)}var Te=V||function(){return!1};function Oe(e){var t=Ae(e)?k.call(e):"";return t==i||t==o}function Ae(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Re(e){return Ee(e)?ue(e):function(e){if(!_e(e))return q(e);var t=[];for(var n in Object(e))M.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return fe(e,!1,!0)}}).call(this,n(3),n(19)(e))},46:function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,s,a,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[u]=i,r(u),u++},d.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(14))},47:function(e,t,n){"use strict";(function(e){
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RouterClientConstructor=void 0;const a=s(n(41)),u=o(n(11)),c=n(9),l=s(n(10)),f=s(n(39)),d=n(5),p=n(1),h=n(32),m=n(24),y=[],g=e;let v=p.Logger;g.FSBLData=g.FSBLData||{},g.FSBLData.RouterClients=g.FSBLData.RouterClients||{},t.RouterClientConstructor=function(e){l.default.args(e,"object")&&l.default.args2("params.clientName",e.clientName,"string","params.transportName",e.transportName,"string=");const t=e.clientName,{transportName:n}=e;let r,i;const o={},s={},p={},b={},_={},w={},S={},C={},E={},T={};let O,A=null,R=!1;const I=[],L=this;function j(){this.header={origin:O,type:"initialHandshake"}}function M(e,t){this.header={origin:O,type:"timeCalibration"},this.clientBaseTime=e,this.serviceBaseTime=t}function k(e){this.header={origin:O,type:"addListener",channel:e}}function N(e,t,n){this.header={origin:O,type:"transmit",channel:e},this.data=t,this.options=n}function P(e){this.header={origin:O,type:"removeListener",channel:e}}function D(e){this.header={origin:O,type:"addResponder",channel:e}}function F(e,t,n){this.header={origin:O,type:"query",queryID:e,channel:t},this.data=n}function W(e,t,n){this.header={origin:O,type:"queryResponse",queryID:e,error:t},this.data=n}function x(e){this.header={origin:O,type:"removeResponder",channel:e}}function U(e,t){this.header={origin:O,type:"subscribe",subscribeID:e,topic:t}}function B(e,t){this.header={origin:O,type:"unsubscribe",subscribeID:e,topic:t}}function $(e,t){this.header={origin:O,type:"publish",topic:e},this.data=t}function V(e,t,n,r){this.header={origin:O,type:"notify",subscribeID:e,topic:t,error:n},this.data=r}function q(e,t,n){this.header={origin:O,type:"addPubSubResponder",topic:e,handleOnServer:n},this.data=t}function H(e){this.header={origin:O,type:"removePubSubResponder",topic:e}}function G(){for(L.startupTime=performance.now()-L.startupTime,v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient Ready"),R=!0;I.length>0;){v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient parentReady invoked");I.shift()()}}function z(e){!A||A instanceof Promise?(v.system.warn("RouterClient: Queuing message since router initialization not complete",e),y.push(e)):A.send(e)}function Y(){return this.header.origin===this.header.lastClient}function Q(e,t){v.system.info("RouterClient: outgoing query response","CHANNEL",this.header.channel,"RESPONSE DATA",t,"QUERY ID",this.header.queryID),z(new W(this.header.queryID,e,t))}function K(e,t){const n=e[t.header.channel];void 0===n?v.system.warn(`RouterClient: no query responder define on channel ${t.header.channel} incoming from ${t.header.origin}`,t):t.header.error?(v.system.warn("RouterClient: queryResponder error",t),n(t.header.error,null),delete e[t.header.channel]):(t.originatedHere=Y,t.sendQueryResponse=Q.bind(t),v.system.info("RouterClient: incoming query","CHANNEL",t.header.channel,"FROM",t.header.origin,"QUERY MESSAGE",t),n(null,t))}function J(e,t){const n=e[t.header.queryID];void 0===n?v.system.warn("RouterClient: no handler for incoming query response","QUERY ID",t.header.queryID):(!function(e,t){const n=e[t];void 0!==n&&clearTimeout(n)}(T,t.header.queryID),t.header.error?(v.system.debug("RouterClient: incoming queryResponse error",t.header,"QUERY ID",t.header.queryID),n(t.header.error,t)):(v.system.info("RouterClient: incoming query response","RESPONSE MESSAGE",t,"QUERY ID",t.header.queryID),n(null,t)),delete e[t.header.queryID])}function X(e,t){if(e)v.system.warn("RouterClient: income publish rejected by pubsub responder",e,t);else{b[this.header.topic]=t;const n=w[this.header.topic];if(void 0!==n)for(let r=0;r<n.length;r++)v.system.info("RouterClient: sending pubsub notify","TOPIC",this.header.topic,"NOTIFY DATA",t),z(new V(n[r],this.header.topic,e,t))}}function Z(e,t){var n,r,i;(function(e){let t=!1;return void 0===e&&(t=!0),t})(t)||z(new V(this.header.subscribeID,this.header.topic,e,t)),e?v.system.warn("RouterClient: incoming subscription rejected by pubsub responder","TOPIC",this.header.topic,"MESSAGE",this):(n=w,r=this.header.topic,i=this.header.subscribeID,r in n?n[r].push(i):n[r]=[i],v.system.info("RouterClient: incoming subscription added","TOPIC",this.header.topic,"MESSAGE",this))}function ee(){!function(e,t,n){let r=!1;if(t in e){const i=w[t];for(let o=0;o<i.length;o++)if(n===i[o]){i.splice(o,1),0===i.length&&delete e[t],r=!0,v.system.info("RouterClient: PubSub removeListener","TOPIC",t,"FROM",n);break}}r||v.system.warn(`RouterClient: tried to remove non-existent listener on ${t} from ${JSON.stringify(n)}`)}(w,this.header.topic,this.header.subscribeID)}function te(e){switch(v.system.verbose("Incoming Message Type",e.header.type,e),e.header.type){case"transmit":!function(e,t){const n=e[t.header.channel]||[],r=[];if(Array.isArray(n)&&0!==n.length){t.originatedHere=Y,n.forEach(e=>{r.push(e)});for(let e=0;e<r.length;e++)v.isLogMessage(t.header.channel)||v.system.info("RouterClient: incoming transmit","CHANNEL",t.header.channel,"FROM",t.header.origin,"MESSAGE",t),r[e](null,t)}else v.system.warn(`RouterClient: no listener for incoming transmit on channel ${t.header.channel} from ${t.header.origin}`,t)}(o,e);break;case"query":K(s,e);break;case"queryResponse":J(E,e);break;case"notify":!function(e,t){const n=e[t.header.subscribeID];void 0===n?v.system.warn("RouterClient: no subscription handler defined for incoming notify for subscriberID",t.header.subscribeID,t):t.header.error?(v.system.info("RouterClient: incoming PubSub notify error for subscriberID","SUBSCRIBER ID",t.header.subscribeID,"NOTIFY MESSAGE",t),n(t.header.error,t)):(t.originatedHere=Y,v.system.info("RouterClient: incoming PubSub notify","SUBSCRIBER ID",t.header.subscribeID,"NOTIFY MESSAGE",t),n(null,t))}(S,e);break;case"publish":!function(e){let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];break}void 0===t?v.system.warn("RouterClient: no pubsub responder defined for incoming publish","TOPIC",e.header.topic,"PUBLISH MESSAGE",e):(e.sendNotifyToAllSubscribers=X,t.publishCallback?(v.system.info("RouterClient: incoming PubSub publish callback invoked","TOPIC",e.header.topic,"PUBLISH MESSAGE",e),t.publishCallback(null,e)):(v.system.info("RouterClient: incoming PubSub publish","TOPIC",e.header.topic,"PUBLISH MESSAGE",e),e.sendNotifyToAllSubscribers(null,e.data)))}(e);break;case"subscribe":!function(e){v.system.info("RouterClient: PubSub subscribe","TOPIC",e.header.topic);let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];let r=b[e.header.topic];void 0===r&&(r=b[n]),b[e.header.topic]=r;break}void 0===t?v.system.warn("RouterClient: no pubsub responder defined for incoming subscribe",e):e.header.error?v.system.warn("RouterClient: pubsub error received from router service: "+JSON.stringify(e.header.error)):(e.sendNotifyToSubscriber=Z,t.subscribeCallback?(e.data=b[e.header.topic],t.subscribeCallback(null,e)):e.sendNotifyToSubscriber(null,b[e.header.topic]))}(e);break;case"unsubscribe":!function(e){let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];break}void 0===t?v.system.warn("RouterClient: no pubsub responder defined for incoming unsubscribe","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e):(e.removeSubscriber=ee,t.unsubscribeCallback?(v.system.info("RouterClient: incoming unsubscribe callback","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e),t.unsubscribeCallback(null,e)):(v.system.info("RouterClient: incoming unsubscribe","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e),e.removeSubscriber()))}(e);break;case"timeCalibration":const t=()=>{i?i(e):setTimeout(()=>{t()},10)};t();break;case"initialHandshakeResponse":r()}}function ne(e,t){t.header.lastClient=O,t.header.incomingTransportInfo=e,te(t)}function re(){return`${O}.${m.v4()}`}function ie(e,t,n){e[t]=n}function oe(e,t,n,r){r>0&&(e[t]=setTimeout(()=>{v.system.warn(`RouterClient: timeout waiting on query response on channel ${n} for queryID ${t} on timer ${e[t]} timeout=${r}`)},r))}function se(e,t){let n=!1;return void 0!==e[t]&&(delete e[t],n=!0),n}return this.startupTime=0,this.calibrateTimeWithRouterService=function(e){let t,n=0,r=1/0;i=function(i){n++,n>5?function(n){let i=0;for(let e=1;e<5;e++){const o=n.clientBaseTime[e-1],s=n.clientBaseTime[e]-o,a=n.serviceBaseTime[e-1]-(o+s/2);s<r&&(r=s,t=a),i+=a,v.system.debug("calibrationCalculation Intermediate Values","lastRRT",s,"lastOffset",a,"fastestOffset",t,"fastestRRT",r)}i/=4,v.system.debug("RouterClient calibrationCalculation","Average Offset",i,"Chosen FastestOffset",t,n),e(t)}(i):(i.clientBaseTime.push(g.performance.timing.navigationStart+g.performance.now()),z(new M(i.clientBaseTime,i.serviceBaseTime)))},i(new M([],[]))},this.ready=e=>this.onReady(e),this.getClientName=function(){return v.system.debug("RouterClient.getClientName",O),O},this.onReady=function(e){l.default.args(e,"function"),R?e():I.push(e)},this.addListener=function(e,t){v.system.info("RouterClient.addListener","CHANNEL",e),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;const i=e[t];return void 0===i||0===i.length?(e[t]=[n],r=!0):i.push(n),r})(o,e,t)&&z(new k(e))},this.transmit=function(e,t,n={suppressWarnings:!1}){v.isLogMessage(e)||v.system.info("RouterClient.transmit","TO CHANNEL",e,"EVENT",t),l.default.args(e,"string",t,"any"),z(new N(e,t,n))},this.removeListener=function(e,t){v.system.info("RouterClient.removeListener","CHANNEL",e,"EVENT HANDLER",t),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;const i=e[t];if(void 0!==i){const e=i.indexOf(n);e>-1?(i.splice(e,1),0===i.length&&(r=!0)):v.system.warn("no listener defined for channel: "+t)}return r})(o,e,t)&&z(new P(e))},this.addResponder=function(e,t){v.system.info("RouterClient.addResponder","CHANNEL",e),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;return void 0===e[t]&&(e[t]=n,r=!0),r})(s,e,t)?z(new D(e)):(v.system.warn("RouterClient.addResponder: Responder already locally defined for channel "+e),t({"RouteClient QueryError":"Responder already locally defined for channel"+e},null))},this.query=function(e,t,n,r=Function.prototype){const i=`${re()}.${e}`,o=window.performance.timing.navigationStart+window.performance.now(),s=window.performance.timing.navigationStart,a=window.performance.now();function u(u){ie(E,i,(c,l)=>{u({err:c,response:l}),"function"==typeof r?r(c,l):v.system.warn("No response event handler passed to RouterClient.query","RESPONDER CHANNEL",e,"QUERY EVENT",t,"PARAMS",n,"QUERY ID",i,{timestamp:o,navstart:s,timenow:a})}),oe(T,i,e,n.timeout),z(new F(i,e,t))}return v.system.info("RouterClient.query","RESPONDER CHANNEL",e,"QUERY EVENT",t,"PARAMS",n,"QUERY ID",i,{timestamp:o,navstart:s,timenow:a}),3===arguments.length&&(r=n,n={timeout:2e4}),l.default.args(e,"string",t,"any=",n,"object=",r,"function"),n=n||{},l.default.args2("params.timeout",n.timeout,"number"),new Promise(u)},this.removeResponder=function(e){v.system.info("RouterClient.removeResponder","RESPONDER CHANNEL",e),l.default.args(e,"string");se(s,e)&&z(new x(e))},this.addPubSubResponder=function(t,n,r,i){let o,s;if(v.system.info("RouterClient.addPubSubResponder","TOPIC",t,"INITIAL STATE",n,"PARAMS",r),l.default.args(t,"any",n,"object=",e,"object="),r=r||{},l.default.args2("params.subscribeCallback",r.subscribeCallback,"function=","params.publishCallback",r.publishCallback,"function=")&&l.default.args2("params.unsubscribeCallback",r.unsubscribeCallback,"function="),void 0===r.subscribeCallback&&void 0===r.publishCallback&&void 0===r.unsubscribeCallback)n=n||{},z(new q(t.toString(),n,!0)),s="success";else{(function(e,t,n,r){let i=!1;return void 0===p[e.toString()]&&(e instanceof RegExp&&(_[e.toString()]=e,v.system.info("RouterClient: PubSub RegEx added for topic "+e.toString())),p[e.toString()]={subscribeCallback:t,publishCallback:n,unsubscribeCallback:r},i=!0),i})(t,r.subscribeCallback,r.publishCallback,r.unsubscribeCallback)?(n=n||{},b[t.toString()]=u.clone(n),z(new q(t.toString(),n,!1)),s="success"):(o="RouterClient.addPubSubResponder: Responder already locally defined for topic "+t,v.system.error(o))}i&&i(o,s)},this.removePubSubResponder=function(e){v.system.info("RouterClient.removePubSubResponder","TOPIC",e),l.default.args(e,"any");se(p,e)?(delete b[e.toString()],delete _[e.toString()],z(new H(e))):v.system.warn("RouterClient.removePubSubResponder failed: Could not find responder for topic "+e)},this.subscribe=function(e,t){v.system.info("RouterClient.subscribe","TOPIC",e),l.default.args(e,"string",t,"function");const n=re();return function(e,t,n,r){e[t]=n,C[t]=r}(S,n,t,e),z(new U(n,e)),{subscribeID:n,topic:e}},this.publish=function(e,t){v.system.info("RouterClient.publish","TOPIC",e,"EVENT",t),l.default.args(e,"string",t,"any"),z(new $(e,t))},this.unsubscribe=function(e){v.system.info("RouterClient.unsubscribe","SUBSCRIBE ID",e),l.default.args(e,"object")&&l.default.args2("subscribeIDStruct.subscribeID",e.subscribeID,"string");(function(e,t){let n=!1;return void 0!==e[t]&&(delete e[t],n=!0),n})(S,e.subscribeID)?z(new B(e.subscribeID,e.topic)):v.system.warn("RouterClient.unsubscribe: Could not find subscribeID for topic "+e.topic)},this.trustedMessage=function(e){let t=!0;return v.system.debug("RouterClient.trustedMessage header",e.header),"SharedWorker"===e.header.originIncomingTransportInfo.transportID&&(t=!0),t},this.disconnectAll=function(){v.system.info("RouterClient.disconnectAll");for(const e in o)v.system.debug("RouterClient.disconnectAll is removing listener on "+e),z(new P(e)),delete o[e];for(const e in s)v.system.debug("RouterClient.disconnectAll is removing responder on "+e),z(new x(e)),delete s[e];for(const e in p)v.system.debug("RouterClient.disconnectAll is removing pubsub responder on "+e),z(new H(e)),delete p[e.toString()],delete b[e.toString()],delete _[e.toString()];for(const e in S){const t=C[e];v.system.debug("RouterClient.disconnectAll is removing subscriber on "+t),z(new B(e,t)),delete S[e],delete C[e]}},"loggerService"===d.System.Window.getCurrent().name&&(v=new h.LocalLogger),O=`${t}.${d.System.Window.getCurrent().name}`,O in g.FSBLData.RouterClients?(v.system.debug('"RouterClient Check: reusing existing client for '+O),console.debug('"RouterClient Check: reusing existing client for '+O,g)):(v.system.debug('"RouterClient Check: constructing new client for '+O),console.debug('"RouterClient Check: constructing new client for '+O,g),g.FSBLData.RouterClients[O]=this,function(e,t){v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient Constructor:Name:",e);let i=0;function o(i){v.system.info("WINDOW LIFECYCLE:STARTUP:RouterClient:processManifest"),i&&"string"!=typeof i?function(e,t,i,o){v.system.verbose(`Client ${t} connecting to event router`),v.system.verbose("Name of transport to establish: "+i);const s=void 0===i;let u,l,d=!1,p=0;const h=e.finsemble,m={FinsembleUUID:h.FinsembleUUID,applicationRoot:h.applicationRoot,routerDomainRoot:h.moduleRoot,forceWindowTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.forceWindowTransport",{}),sameDomainTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.sameDomainTransport","SharedWorker"),crossDomainTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.crossDomainTransport","IPCBus"),transportSettings:c.ConfigUtilInstance.getDefault(h,"finConfig.router.transportSettings",{}),IAC:c.ConfigUtilInstance.getDefault(h,"finConfig.IAC",{})};let g,b,_,w,S,C;g=e=>{l=0,v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient:transport ready","TRANSPORT OBJECT",e),A=e,r=C,S(),u=setInterval(S,200)},b=e=>{v.system.error("RouterClientError",e)},_=()=>{v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient:getClientTransport","ROUTER PARAMS:",m),A=s?a.default.getRecommendedTransport(m,ne,O,"RouterService").then(g).catch(b):a.default.getTransport(m,n,ne,O,"RouterService").then(g).catch(b)},w=()=>{if(clearInterval(u),p++,p<=3)v.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient: failure to connect to router service. Retrying...",p,m),_();else{const e="A cross domain transport has failed to connect. Cross domain components may not work. Please contact your administrator.";v.system.error(e,m);const t=c.ConfigUtilInstance.getDefault(h,"finConfig.notificationURL",h.moduleRoot+"/components/system/notification/notification.html");f.default.alert("dev","ONCE-SINCE-STARTUP","FSBL-Internal-Transport-Failure",e,{url:t})}},S=()=>{v.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient: sendHandshake",l),z(new j),l++>50&&w()},C=()=>{if(!d){if(v.system.debug(`WINDOW LIFECYCLE:STARTUP:RouterClient connected: Starting ${O} with transport ${A.identifier()}`),d=!0,clearInterval(u),y)for(let e=0;e<y.length;e++){v.system.debug("RouterClient: firing queued msg");const t=y[e];A.send(t)}o&&o()}},_()}(i,e,t,G):v.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient:processManifest failed -- fatal error",i)}d.System.ready(()=>{const e=d.System.Window.getCurrent();v.system.debug("WINDOW LIFECYCLE:STARTUP: System.ready invoked in "+e.name),console.debug("WINDOW LIFECYCLE:STARTUP: System.ready invoked in "+e.name),L.startupTime=performance.now(),0==i++&&e.getOptions(e=>{e.customData&&e.customData.manifest?(v.system.debug("Router Init using custom data"),o(e.customData.manifest)):c.ConfigUtilInstance.getExpandedRawManifest(e=>{v.system.debug("Router Init using getExpandedRawManifest"),g.FinsembleUUID&&(e.finsemble.FinsembleUUID=g.FinsembleUUID),o(e)},e=>{v.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient:manifest error",e)})},e=>{v.system.error("WINDOW LIFECYCLE:STARTUP:finWindow.getOptions error",e)})})}(O,n)),g.FSBLData.RouterClients[O]}}).call(this,n(3))},48:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||e,o),u=i?i+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=i?i+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(e){var t=i?i+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,o,s){var a=i?i+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,o),!0;case 6:return l.fn.call(l.context,t,n,r,o,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||u(this,o);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==t||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&u(this,t)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c},49:function(e,t,n){"use strict";const r=n(50);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const o=(e,t,n)=>new Promise((o,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void o(e);const a=setTimeout(()=>{if("function"==typeof n){try{o(n())}catch(e){s(e)}return}const r=n instanceof Error?n:new i("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(r)},t);r(e.then(o,s),()=>{clearTimeout(a)})});e.exports=o,e.exports.default=o,e.exports.TimeoutError=i},5:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;const n="undefined"!=typeof window?window:e;class r{constructor(e,t,n){return new fin.desktop.Window(e,t)}static get getCurrent(){return fin.desktop.Window.getCurrent}static get wrap(){return fin.desktop.Window.wrap}}class i{constructor(e,t,n){return new fin.desktop.Application(e,t)}static get getCurrent(){return fin.desktop.Application.getCurrent}static get wrap(){return fin.desktop.Application.wrap}}class o{constructor(e){new fin.desktop.Notification(e)}}class s{constructor(){return new fin.desktop.System.Clipboard}static get writeText(){return fin.desktop.System.Clipboard.writeText}static get writeHTML(){return fin.desktop.System.Clipboard.writeHTML}static get writeRTF(){return fin.desktop.System.Clipboard.writeRTF}static get readText(){return fin.desktop.System.Clipboard.readText}static get readHTML(){return fin.desktop.System.Clipboard.readHTML}static get readRTF(){return fin.desktop.System.Clipboard.readRTF}}t.System=class{static get Application(){return i}static get Window(){return r}static get Notification(){return o}static get Clipboard(){return s}static async getMousePosition(e=Function.prototype){return new Promise((t,n)=>{fin.desktop.System.getMousePosition(n=>{(n.left||0===n.left)&&(n.x=n.left),(n.top||0===n.top)&&(n.y=n.top),e(null,n),t(n)},t=>{e(t,null),n(t)})})}static getMonitorInfo(e=Function.prototype){return new Promise(t=>{fin.desktop.System.getMonitorInfo(n=>{t(n),e(n)})})}static get container(){return fin.container?fin.container:"Electron"}static get isBrowserView(){return e2o.isBrowserView}static get getViewId(){return e2o.getViewId}static get hasBrowserView(){return e2o.hasBrowserView}static get fin(){return e2o||fin||{}}static get ready(){return fin.desktop.main}static getHostSpecs(e=Function.prototype){return new Promise(t=>{fin.desktop.System.getHostSpecs(n=>{t(n),e(n)})})}static get InterApplicationBus(){return fin.desktop.InterApplicationBus}static get launchExternalProcess(){return fin.desktop.System.launchExternalProcess}static get terminateExternalProcess(){return fin.desktop.System.terminateExternalProcess}static get getAllApplications(){return fin.desktop.System.getAllApplications}static get exit(){return fin.desktop.System.exit}static get clearCache(){return fin.desktop.System.clearCache}static get showDeveloperTools(){return fin.desktop.System.showDeveloperTools}static get getRuntimeInfo(){return fin.desktop.System.getRuntimeInfo||chrome.desktop.getDetails}static get addEventListener(){return fin.desktop.System.addEventListener}static get addSelectClientCertificateListener(){return fin.desktop.System.addSelectClientCertificateListener}static get addCertificateErrorListener(){return fin.desktop.System.addCertificateErrorListener}static get getVersion(){return fin.desktop.System.getVersion}static get getUpdateAvailable(){return fin.desktop.System.getUpdateAvailable}static get openUrlWithBrowser(){return fin.desktop.System.openUrlWithBrowser}static get getAllWindows(){return fin.desktop.System.getAllWindows}static get getProcessList(){return fin.desktop.System.getProcessList}static get getProtocolString(){return fin.desktop.System.getProtocolString}static get hideSplashScreen(){return fin.desktop.System.hideSplashScreen}static FinsembleReady(e){return n.FSBL&&n.FSBL.addEventListener?n.FSBL.addEventListener("onready",e):window.addEventListener("FSBLready",e)}static startupApplicationHandshake(){fin.desktop.System.startupApplicationHandshake&&fin.desktop.System.startupApplicationHandshake()}static closeApplication(e,t=Function.prototype){return new Promise(n=>{let r,i=!1;const o=()=>{i||(console.log("Attempting to terminate",e.uuid),e.terminate(()=>{t(),n()},()=>{i||(i=!0,clearInterval(r),console.log("force closing ",e.uuid),e.terminate())}))};r=setInterval(o,2e3),console.log("closing ",e.uuid),e.close(!1,()=>{console.log("app.close: successfully closed",e.uuid),i=!0,clearInterval(r),t(),n()},o)})}static isElectron(){return"Electron"===fin.container}}}).call(this,n(14))},50:function(e,t,n){"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},51:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(52);t.default=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=r.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return e&&e.run}get size(){return this._queue.length}}},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let s=r+o;n(e[s],t)<=0?(r=++s,i-=o+1):i=o}return r}},53:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t,r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var a=Object.prototype,u=a.hasOwnProperty,c=a.toString,l=i.Symbol,f=a.propertyIsEnumerable,d=l?l.isConcatSpreadable:void 0,p=Math.max;function h(e){return y(e)||function(e){return function(e){return g(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?c.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&u.call(e,"callee")&&(!f.call(e,"callee")||"[object Arguments]"==c.call(e))}(e)||!!(d&&e&&e[d])}function m(e){if("string"==typeof e||function(e){return"symbol"==typeof e||g(e)&&"[object Symbol]"==c.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var y=Array.isArray;function g(e){return!!e&&"object"==typeof e}var v,b,_=(v=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=e[s];n(a,s)&&(o[s]=a)}return o}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(function e(t,n,r,i,o){var a=-1,u=t.length;for(r||(r=h),o||(o=[]);++a<u;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,i,o):s(o,c):i||(o[o.length]=c)}return o}(t,1),m))},b=p(void 0===b?v.length-1:b,0),function(){for(var e=arguments,t=-1,n=p(e.length-b,0),r=Array(n);++t<n;)r[t]=e[b+t];t=-1;for(var i=Array(b+1);++t<b;)i[t]=e[t];return i[b]=r,o(v,this,i)});e.exports=_}).call(this,n(3))},54:function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=t&&!t.nodeType&&t,h=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===p&&l.process,y=function(){try{return m&&m.binding("util")}catch(e){}}(),g=y&&y.isTypedArray;function v(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function b(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S,C,E,T=Array.prototype,O=Function.prototype,A=Object.prototype,R=d["__core-js_shared__"],I=(S=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",L=O.toString,j=A.hasOwnProperty,M=A.toString,k=RegExp("^"+L.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=d.Symbol,P=d.Uint8Array,D=A.propertyIsEnumerable,F=T.splice,W=(C=Object.keys,E=Object,function(e){return C(E(e))}),x=le(d,"DataView"),U=le(d,"Map"),B=le(d,"Promise"),$=le(d,"Set"),V=le(d,"WeakMap"),q=le(Object,"create"),H=pe(x),G=pe(U),z=pe(B),Y=pe($),Q=pe(V),K=N?N.prototype:void 0,J=K?K.valueOf:void 0;function X(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=e?e.length:0;for(this.__data__=new ee;++t<n;)this.add(e[t])}function ne(e){this.__data__=new Z(e)}function re(e,t){var n=me(e)||function(e){return function(e){return _e(e)&&ye(e)}(e)&&j.call(e,"callee")&&(!D.call(e,"callee")||M.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],i=n.length,o=!!i;for(var s in e)!t&&!j.call(e,s)||o&&("length"==s||de(s,i))||n.push(s);return n}function ie(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function oe(e,t,n,a,u){return e===t||(null==e||null==t||!be(e)&&!_e(t)?e!=e&&t!=t:function(e,t,n,a,u,c){var l=me(e),f=me(t),d="[object Array]",p="[object Array]";l||(d=(d=fe(e))==r?o:d);f||(p=(p=fe(t))==r?o:p);var h=d==o&&!b(e),m=p==o&&!b(t),y=d==p;if(y&&!h)return c||(c=new ne),l||we(e)?ue(e,t,n,a,u,c):function(e,t,n,r,o,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new P(e),new P(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return he(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=_;case s:var l=2&a;if(c||(c=w),e.size!=t.size&&!l)return!1;var f=u.get(e);if(f)return f==t;a|=1,u.set(e,t);var d=ue(c(e),c(t),r,o,a,u);return u.delete(e),d;case"[object Symbol]":if(J)return J.call(e)==J.call(t)}return!1}(e,t,d,n,a,u,c);if(!(2&u)){var g=h&&j.call(e,"__wrapped__"),v=m&&j.call(t,"__wrapped__");if(g||v){var S=g?e.value():e,C=v?t.value():t;return c||(c=new ne),n(S,C,a,u,c)}}if(!y)return!1;return c||(c=new ne),function(e,t,n,r,i,o){var s=2&i,a=Se(e),u=a.length,c=Se(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var f=a[l];if(!(s?f in t:j.call(t,f)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var p=!0;o.set(e,t),o.set(t,e);var h=s;for(;++l<u;){f=a[l];var m=e[f],y=t[f];if(r)var g=s?r(y,m,f,t,e,o):r(m,y,f,e,t,o);if(!(void 0===g?m===y||n(m,y,r,i,o):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,a,u,c)}(e,t,oe,n,a,u))}function se(e){return!(!be(e)||function(e){return!!I&&I in e}(e))&&(ge(e)||b(e)?k:a).test(pe(e))}function ae(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||A,t!==r)return W(e);var t,n,r,i=[];for(var o in Object(e))j.call(e,o)&&"constructor"!=o&&i.push(o);return i}function ue(e,t,n,r,i,o){var s=2&i,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var l=-1,f=!0,d=1&i?new te:void 0;for(o.set(e,t),o.set(t,e);++l<a;){var p=e[l],h=t[l];if(r)var m=s?r(h,p,l,t,e,o):r(p,h,l,e,t,o);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!v(t,(function(e,t){if(!d.has(t)&&(p===e||n(p,e,r,i,o)))return d.add(t)}))){f=!1;break}}else if(p!==h&&!n(p,h,r,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ce(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return se(n)?n:void 0}X.prototype.clear=function(){this.__data__=q?q(null):{}},X.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},X.prototype.get=function(e){var t=this.__data__;if(q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return j.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return q?void 0!==t[e]:j.call(t,e)},X.prototype.set=function(e,t){return this.__data__[e]=q&&void 0===t?"__lodash_hash_undefined__":t,this},Z.prototype.clear=function(){this.__data__=[]},Z.prototype.delete=function(e){var t=this.__data__,n=ie(t,e);return!(n<0)&&(n==t.length-1?t.pop():F.call(t,n,1),!0)},Z.prototype.get=function(e){var t=this.__data__,n=ie(t,e);return n<0?void 0:t[n][1]},Z.prototype.has=function(e){return ie(this.__data__,e)>-1},Z.prototype.set=function(e,t){var n=this.__data__,r=ie(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ee.prototype.clear=function(){this.__data__={hash:new X,map:new(U||Z),string:new X}},ee.prototype.delete=function(e){return ce(this,e).delete(e)},ee.prototype.get=function(e){return ce(this,e).get(e)},ee.prototype.has=function(e){return ce(this,e).has(e)},ee.prototype.set=function(e,t){return ce(this,e).set(e,t),this},te.prototype.add=te.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},te.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.clear=function(){this.__data__=new Z},ne.prototype.delete=function(e){return this.__data__.delete(e)},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Z){var r=n.__data__;if(!U||r.length<199)return r.push([e,t]),this;n=this.__data__=new ee(r)}return n.set(e,t),this};var fe=function(e){return M.call(e)};function de(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function he(e,t){return e===t||e!=e&&t!=t}(x&&"[object DataView]"!=fe(new x(new ArrayBuffer(1)))||U&&fe(new U)!=i||B&&"[object Promise]"!=fe(B.resolve())||$&&fe(new $)!=s||V&&"[object WeakMap]"!=fe(new V))&&(fe=function(e){var t=M.call(e),n=t==o?e.constructor:void 0,r=n?pe(n):void 0;if(r)switch(r){case H:return"[object DataView]";case G:return i;case z:return"[object Promise]";case Y:return s;case Q:return"[object WeakMap]"}return t});var me=Array.isArray;function ye(e){return null!=e&&ve(e.length)&&!ge(e)}function ge(e){var t=be(e)?M.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function ve(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function be(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _e(e){return!!e&&"object"==typeof e}var we=g?function(e){return function(t){return e(t)}}(g):function(e){return _e(e)&&ve(e.length)&&!!c[M.call(e)]};function Se(e){return ye(e)?re(e):ae(e)}n.exports=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?oe(e,t,n):!!r}}).call(this,n(3),n(19)(e))},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new function(){let e=3;this.diagLevel=function(){return e},this.setDiagLevel=function(t){e=t},this.validationEnabled=function(){return e>=4}};t.default=r,e.exports=t.default},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BootReadyItem=t.BootConfigElement=t.ALL_BOOT_STAGES=void 0,t.ALL_BOOT_STAGES=["microkernel","kernel","authentication","preuser","earlyuser","user"];t.BootConfigElement=class{};t.BootReadyItem=class{constructor(e,t,n){this.name=e,this.type=t,this.config=n}}},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkpointChannel=t.statusChannel=t.killOldApplications=void 0;const r=n(5),i=n(34);t.killOldApplications=function(e){return new Promise(async t=>{r.System.getAllApplications(async n=>{if(n)for(let t=0;t<n.length;t++){const i=n[t];if(i.uuid.endsWith("-"+e)){const e=r.System.Application.wrap(i.uuid);await r.System.closeApplication(e)}}console.log("killOldApplications: finished closing old apps"),t()})})},t.statusChannel=function(e){return`${i.STATUS_CHANNEL_BASE}.${e}`},t.checkpointChannel=function(e,t){return`${i.CHECKPOINT_CHANNEL_BASE}.${e}.${t}`}},58:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(6)),u=o(n(8));t.default=class{constructor(e,t){this.allowDelay=!1,this.delayed=!1,this.allowCancel=!1,this.canceled=!1,this.completed=!1,this.event=e.event,this.source=e.source,this.sourceType=e.sourceType,this.listenerGuid=e.listenerGuid,u[this.sourceType.toUpperCase()]&&u[this.sourceType.toUpperCase()].DELAYABLE_EVENTS.includes(this.event)&&(this.allowDelay=!0),u[this.sourceType.toUpperCase()]&&u[this.sourceType.toUpperCase()].CANCELABLE_EVENTS.includes(this.event)&&(this.allowCancel=!0),this.handler=e.handler,this.queryMessage=t,this.guid=t.data.guid,this.internalHandler()}async internalHandler(){this.data=this.queryMessage.data.data,this.handler&&await this.handler(this),this.delayed||this.canceled||this.completed||this.done()}cancel(){this.allowCancel&&(this.canceled=!0,this.done())}wait(){this.allowDelay?(this.delayed=!0,this.queryMessage.sendQueryResponse(null,{delayed:!0})):this.done()}done(e){this.completed=!0,this.delayed?a.default.transmit(`Finsemble.Listener.Done.${this.guid}.${this.listenerGuid}`,{canceled:this.canceled,data:e}):this.queryMessage.sendQueryResponse(null,{canceled:this.canceled,data:e})}}},6:function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),i=n(1),o=new(0,r.RouterClientConstructor)({clientName:"RouterClient"});i.Logger.setRouterClient(o),t.default=o},7:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOVE_REASON=t.LAUNCHER_SERVICE=t.HEARTBEAT_TIMEOUT_CHANNEL=t.COMPONENT_STATE_STORAGE_TOPIC=t.WINDOW_SERVICE_REQUESTS=t.WORKSPACE=t.WINDOW=t.INTERRUPTIBLE_EVENTS=t.EVENT_INTERRUPT_CHANNEL=t.DOCKING=t.SERVICE_STOP_CHANNEL=t.SERVICE_START_CHANNEL=t.WINDOWSTATE=t.SERVICES_STATE_CHANNEL=t.CLIENT_SERVER_MAPPING=t.SERVICE_QUERY_READY_CHANNEL=t.SERVICE_CLOSED_CHANNEL=t.SERVICE_CLOSING_CHANNEL=t.SERVICE_READY_CHANNEL=t.SERVICE_INITIALIZING_CHANNEL=t.APPLICATION_STATE_CHANNEL=t.WRAPPERS=void 0,t.WRAPPERS={EVENTS:["title-changed","bringToFront","setBounds","alwaysOnTop","setOpacity"]},t.APPLICATION_STATE_CHANNEL="Finsemble.Application.State",t.SERVICE_INITIALIZING_CHANNEL="Finsemble.ServiceManager.serviceInitializing",t.SERVICE_READY_CHANNEL="Finsemble.ServiceManager.serviceReady",t.SERVICE_CLOSING_CHANNEL="Finsemble.ServiceManager.serviceClosing",t.SERVICE_CLOSED_CHANNEL="Finsemble.ServiceManager.serviceClosed",t.SERVICE_QUERY_READY_CHANNEL=e=>"Finsemble.ServiceManager.queryReady."+e,t.CLIENT_SERVER_MAPPING=e=>({authenticationClient:"authenticationService",configClient:"configService",distributedStoreClient:"dataStoreService",hotkeysClient:"hotkeysService",linkerClient:"linkerService",logger:"loggerService",searchClient:"searchService",storageClient:"storageService",windowClient:"windowService",workspaceClient:"workspaceService"}[e]),t.SERVICES_STATE_CHANNEL="Finsemble.State.Services",function(e){e[e.NORMAL=0]="NORMAL",e[e.MINIMIZED_WAS_NORMAL=1]="MINIMIZED_WAS_NORMAL",e[e.MAXIMIZED=2]="MAXIMIZED",e[e.MINIMIZED_WAS_MAXIMIZED=3]="MINIMIZED_WAS_MAXIMIZED",e[e.TRANSITIONING=4]="TRANSITIONING"}(t.WINDOWSTATE||(t.WINDOWSTATE={})),t.SERVICE_START_CHANNEL="Finsemble.Service.Start",t.SERVICE_STOP_CHANNEL="Finsemble.Service.Stop",t.DOCKING={GROUP_UPDATE:"DockingService.groupUpdate",WORKSPACE_GROUP_UPDATE:"Finsemble.WorkspaceService.groupUpdate",REQUEST_PUBLISH:"DockingService.requestGroupDataPublish"},t.EVENT_INTERRUPT_CHANNEL="Finsemble.Event.Interrupt",t.INTERRUPTIBLE_EVENTS=["close-requested","closed","close-complete","_container-close-handlers"],t.WINDOW={DELAYABLE_EVENTS:["close-requested","closed","close-complete","_container-close-handlers"],CANCELABLE_EVENTS:["close-requested"]},t.WORKSPACE={DELAYABLE_EVENTS:["load-requested","close-requested","save-requested"],CANCELABLE_EVENTS:["close-requested"],CLEAN_SHUTDOWN:"Finsemble.Workspace.cleanShutdown",UPDATE_PUBSUB:"Finsemble.WorkspaceService.update",STORAGE_TOPIC:"finsemble.workspace",CACHE_STORAGE_TOPIC:"finsemble.workspace.cache",ALL_WORKSPACES:"finsemble.allWorkspaces",ACTIVE_WORKSPACE:"activeWorkspace",LAST_USED_WORKSPACE_TOPIC:"finsemble",LAST_USED_WORKSPACE_NAME:"finsemble.lastUsedWorkspace.name",LAST_USED_WORKSPACE:"finsemble.lastUsedWorkspace",INITIAL_WORKSPACE_PREFERENCE:"finsemble.initialWorkspace",PUBLISH_REASONS:{INIT:"workspace:initialization",LOAD_DATA_RETRIEVED:"workspace:load:dataRetrieved",LOAD_FINISHED:"workspace:load:finished",WINDOW_REMOVED:"window:remove",WINDOW_ADDED:"window:add",LOAD_STARTED:"workspace:load:start",WORKSPACE_REMOVED:"Workspace:remove",WORKSPACE_RENAMED:"rename",SWITCHTO_TERMINATED:"workspace:switchTo:terminated",NEW_WORKSPACE:"new workspace",SAVE_AS:"APPLICATION LIFECYCLE:WORKSPACE LIFECYCLE:SaveAs:Workspace:Save As"},API_CHANNELS:{NEW_WORKSPACE:"Finsemble.Workspace.NewWorkspace",SAVE:"Finsemble.Workspace.Save",RENAME:"Finsemble.Workspace.Rename",SAVE_AS:"Finsemble.Workspace.SaveAs",SWITCH_TO:"Finsemble.Workspace.SwitchTo",IMPORT:"Finsemble.Workspace.Import",EXPORT:"Finsemble.Workspace.Export",REMOVE:"Finsemble.Workspace.Remove",SAVE_GLOBAL_DATA:"Finsemble.Workspace.SaveGlobalData",SAVE_VIEW_DATA:"Finsemble.Workspace.SaveViewData",GET_GLOBAL_DATA:"Finsemble.Workspace.GetGlobalData",GET_VIEW_DATA:"Finsemble.Workspace.GetViewData",GET_WORKSPACES:"Finsemble.Workspace.GetWorkspaces",GET_WORKSPACE_NAMES:"Finsemble.Workspace.GetWorkspaceNames",SET_WORKSPACE_ORDER:"Finsemble.Workspace.SetWorkspaceOrder",GET_ACTIVE_WORKSPACE:"Finsemble.Workspace.GetActiveWorkspace",GET_ACTIVE_WORKSPACE_DIRTY:"Finsemble.Workspace.GetActiveWorkspaceDirty",GET_TEMPLATES:"Finsemble.Workspace.GetTemplates",IMPORT_TEMPLATE:"Finsemble.Workspace.ImportTemplate",EXPORT_TEMPLATE:"Finsemble.Workspace.ExportTemplate",REMOVE_TEMPLATE:"Finsemble.Workspace.RemoveTemplate",SET_WINDOW_STATE:"Finsemble.Workspace.SetWindowData",GET_WINDOW_STATE:"Finsemble.Workspace.GetWindowData",ADD_WINDOW:"WorkspaceService.addWindow",REMOVE_WINDOW:"WorkspaceService.removeWindow"},DEFAULT_WINDOW_PROPS:["name","componentType","windowType","alwaysOnTop","autoShow","minWidth","minHeight","maxWidth","maxHeight","resizable","maximizable","minimizable","opacity","windowState","left","top","width","height","right","bottom","defaultLeft","defaultTop","defaultWidth","defaultHeight","defaultRight","defaultBottom","monitorInfo","icon","cachedBounds","showTaskbarIcon","isEvergreen","compositeComponentData"],ADDITIONAL_WINDOW_PROPS:{WebWindow:["url","fullscreen","frame","backgroundColor","transparent","waitForPageLoad","affinity","appUUID"],NativeWindow:["path","alias","arguments","argumentsAsQueryString","isWPF"],StackedWindow:["childWindowIdentifiers","visibleWindowIdentifier","bounds"]}},t.WINDOW_SERVICE_REQUESTS={REMOTE_FOCUS:"WindowService.remoteFocus",SET_ALWAYS_ON_TOP:"WindowService-Request-setAlwaysOnTop",IS_ALWAYS_ON_TOP:"WindowService-Request-isAlwaysOnTop"},t.COMPONENT_STATE_STORAGE_TOPIC="finsemble.componentStateStorage",t.HEARTBEAT_TIMEOUT_CHANNEL="Finsemble.WindowService.HeartbeatTimeout",t.LAUNCHER_SERVICE={WINDOW_CLOSED:"LauncherService.WindowClosed"},t.MOVE_REASON={AERO_KEY:"aero_key",SYSTEM_RESTORED:"system_restored"}},9:function(e,t,n){"use strict";var r=n(7);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigUtilInstance=void 0;var i=r(n(11)),o=r(n(1)),s=n(5);
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const a=new function(){const e=this;this.resolveConfigVariables=function(e,t){let n=0,r=0,i=!0;function s(e){const t=e.split(/[/\\:?=&\s]/);for(let n=0;n<t.length;n++)if("$"===t[n][0]){const r=t[n].substring(1);let s=a(r);if(void 0!==s){const a=e.replace(t[n],s);o.default.system.verbose("forceObjectsToLogger","ConfigUtil.resolveConfigVariables:resolveString configString",t[n],r,s,"old value=",e,"value=",a),i=!0,e=a}}return e}function a(t){let n=e[t];return void 0===n&&(e.custom?(n=e.custom[t],void 0===n&&o.default.system.warn("ConfigUtil.resolveString",`Missing [${t}] variable from finsemble.custom configuration object`)):o.default.system.error("ConfigUtil.resolveString",'Missing "custom" node from finsemble configuration - unable to get variable resoution for variable: '+t)),n}function u(e,t,n){e=e||{},o.default.system.verbose("forceObjectsToLogger","ConfigUtil.resolveConfigVariables:resolveObject","pass",t,"recursionLevel",n,"configObject:",e),Object.keys(e).forEach(r=>{const i=e[r];"string"==typeof i&&i.indexOf("$")>-1?e[r]=s(i):i instanceof Array?function e(t,n,r){o.default.system.verbose("forceObjectsToLogger","resolveArray","pass",n,"recursionLevel",r,"configArray:",t);for(let i=0;i<t.length;i++){const o=t[i];"string"==typeof o&&o.indexOf("$")>-1?t[i]=s(o):o instanceof Array?e(o,n,r+1):"object"==typeof o&&u(o,n,r+1)}}(i,t,n+1):"object"==typeof i&&u(i,t,n+1)})}for(;i&&r++<100;)i=!1,u(t,++n,1);r>=100&&o.default.system.error("forceObjectsToLogger","resolveConfigVariables exceeded maximum passes so continuing -- probably a recursive macro definitions.  Look in this config for unresolved macro variables",e)},this.getExpandedRawManifest=function(t,n){o.default.system.debug("ConfigUtil.getExpandedRawManifest starting"),s.System.ready(()=>{const r=s.System.Application.getCurrent();!function t(r,i,a){o.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getRawManifest",i,a),i.getManifest(t=>{o.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getExpandedRawManifest: manifest retrieved. Pre-variable resolution",t),e.resolveConfigVariables(t.finsemble,t.finsemble),o.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getExpandedRawManifest:Complete. post-variable resolution",t),r(t)},e=>{e&&(o.default.system.error("ConfigUtil.getExpandedRawManifest:application.getManifest:err",e),n&&n()),i.getParentUuid(e=>{const n=s.System.Application.wrap(e);o.default.system.debug("forceObjectsToLogger","uuid",e,"parentApplication",n),a<10?t(r,n,++a):r("could not find manifest in parent applications")})})}(t,r,1)})},this.readConfigFile=function(e,t){o.default.system.debug("fetching "+e),fetch(e,{credentials:"include",cache:"no-cache"}).then(e=>e.json()).catch(n=>{t(`Failure importing ${e}: ${n}`,null)}).then(e=>{t(null,e)})},this.getInitialManifest=function(t){s.System.ready(()=>{s.System.Application.getCurrent().getManifest(n=>{n.finsemble=n.finsemble||{},e.resolveConfigVariables(n.finsemble,n.finsemble),n.finsemble.applicationRoot||o.default.system.error("FATAL ERROR: applicationRoot was not defined in manifest file.");const r=n.finsemble.moduleRoot+"/configs/core/config.json";e.readConfigFile(r,(i,s)=>{i?o.default.system.error(`ConfigUtil.getInitialManifest:getCoreConfig:failed importing into finsemble config. $moduleRoot=${n.finsemble.moduleRoot}; Full Path=${r}`,i):(Object.keys(s).forEach(e=>{if("importConfig"===e){n.finsemble.importConfig=n.finsemble.importConfig||[];for(let e=0;e<s.importConfig.length;e++)n.finsemble.importConfig.unshift(s.importConfig[e])}else if("importThirdPartyConfig"===e){n.finsemble.importThirdPartyConfig=n.finsemble.importThirdPartyConfig||[];for(let e=0;e<s.importThirdPartyConfig.length;e++)n.finsemble.importThirdPartyConfig.unshift(s.importThirdPartyConfig[e])}else n.finsemble[e]=s[e]}),e.resolveConfigVariables(n.finsemble,n.finsemble),o.default.system.debug("forceObjectsToLogger","ConfigUtil.getInitialManifest:getCoreConfig:Initial Manifest after variables Resolved",n)),t(n)})})})},this.promptAndSaveJSONToLocalFile=function(e,t){o.default.system.debug("saveJSONToLocalFile",e,t);const n=JSON.stringify(t,null,"\t"),r="data:application/json;charset=utf-8,"+encodeURIComponent(n),i=e+".json",s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",i),s.click()},this.configFormatForExport=function(e,t){o.default.system.debug("configFormatForExport starting",e,t);let n=i.default.clone(t);if("raw"===e);else if("all"===e)delete n.importConfig,delete n.comment;else if("application"===e)delete n.importConfig,delete n.comment,delete n.system,delete n.services;else if("workspace"===e)n={workspace:n};else if("workspaceTemplate"===e){const e={};e[n.name]=n,n={workspaceTemplates:e}}else"services"===e?n=n.services:"components"===e&&(n=n.components);return n},this.getDefault=function(e,t,n){let r=n;if(e){try{const n=t.split(".");let i=e;for(let e=1;e<n.length;e++)i=i[n[e]];r=i}catch(e){r=n}void 0===r&&(r=n)}return r},this.getFile=async function(e,t=Function.prototype){o.default.system.debug("fetching import "+e);let n=null;return await fetch(e,{credentials:"include",cache:"no-cache"}).then(e=>e.json()).catch(n=>{t(`failure importing ${e}: ${n}`,null)}).then(e=>{t(null,e),n=e}),n}};t.ConfigUtilInstance=a},99:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onSpawnRequest=void 0;const i=r(n(6)),o=r(n(1)),s=n(5);let a;o.default.start(),o.default.system.debug("SplinterAgentSlave loaded.");const u=s.System.Application.getCurrent(),c=s.System.Window.getCurrent();function l(e,t){document.title=t.data.title}function f(e,t,n=a){o.default.system.debug("SplinterAgentSlave.onSpawnRequest.",t.data.windowDescriptor);const r=t.data.windowDescriptor;r?(r.customData?(n.finsemble.FinsembleUUID=r.customData.manifest.finsemble.FinsembleUUID,r.customData.manifest=n):r.customData={manifest:n},r.execJSWhitelist||(r.execJSWhitelist=[]),r.execJSWhitelist.push(c.name),new s.System.Window(r,()=>{o.default.system.debug("SplinterAgentSlave.onSpawnRequest: Window successfully spawned. WindowName: "+r.name,r)},e=>{o.default.system.error("SplinterAgentSlave.onSpawnRequest ERROR",e)})):o.default.system.error("SplinterAgentSlave.onSpawnRequest ERROR: No windowDescriptor",t)}t.onSpawnRequest=f,c.name===u.window.name&&i.default.onReady((function(){c.addEventListener("close-requested",()=>{o.default.unregisterClient({deleteFromPersistence:!0}),c.close(!0)}),o.default.system.debug("SplinterAgentSlave ready."),i.default.addListener(u.uuid+".spawn",f),i.default.addListener(u.uuid+".setTitle",l),c.getOptions(e=>{({manifest:a}=e.customData),i.default.transmit(u.window.name+".onSpawned",{})}),setInterval(()=>{i.default.transmit("Finsemble.heartbeat",{type:"agent",windowName:s.System.Window.getCurrent().name})},5e3)}))}});