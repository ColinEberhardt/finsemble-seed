!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=119)}([,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},o=Math.max;var i=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),u=Array(a);++s<a;)u[s]=i[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=i[s];return c[t]=n(u),r(e,this,c)}},s=n(12);function a(e,t){return i(e,t,s.a)}},,function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LoggerConstructor=void 0;const r=n(6),o=n(40),i={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0,Verbose:!0,LocalOnly:!1},s={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0},a=n(59);t.LoggerConstructor=function(e){const o=this;let u;o.RouterClient=e&&e.RouterClient;let c=!1,l=!1;const f=o;let d,p,h=0,m=0;this.startupTime=0;let y=[];if("undefined"==typeof window)return;let g=r.System.Window.getCurrent().name;window.top!==window&&(g+=".Frame"),this.onLogStateChangeCallback=[];const b="finsemble.logger.client."+g;let v={console:s,dev:i,system:i,perf:i};function _(e,t,n){this.category=e,!u&&r.System.isBrowserView()&&(u=r.System.getViewId()),this.logClientName=u?`${g}: view-${u}`:g,this.logType=t,this.logData=n,this.logTimestamp=window.performance.timing.navigationStart+window.performance.now()+h}function w(e,t){e&&e.dev&&(v=e,o.onLogStateChangeCallback.forEach(t=>{t(e)})),function(e){f.system.debug("Logger updateQueueBasedOnState",e,h,"QUEUE LENGTH",y.length,v);const t=[];for(let n=0,{length:r}=y;n<r;n++)if(v[y[n].category][y[n].logType]&&!v[y[n].category].LocalOnly)e&&(y[n].logTimestamp=y[n].logTimestamp+h),t.push(y[n]);else if(v[y[n].category][y[n].logType]&&v[y[n].category].LocalOnly){const e=y[n];console.log(e.category,e.logType,e.logTimestamp-window.performance.timing.navigationStart,e.logData,"(Previously queued!)")}y=t}(t)}function S(){const{stack:e}=function(){try{throw Error("")}catch(e){return e}}(),t=(n="\n",r=4,e.split(n,r).join(n).length);var n,r;return"Log Stack: \n"+e.substring(t).substr(1)}this.onStateChanged=e=>{-1===this.onLogStateChangeCallback.indexOf(e)&&this.onLogStateChangeCallback.push(e)},this.setClientName=function(e){g=e},this.getClientName=function(){return g},this.clearMessageList=function(){y=[]},this.callStack=function(){return S()},this.setting=function(){return v};const C=console.error,E=console.warn,I=console.info,A=console.log,T=console.debug;function O(e,t){try{e.apply(console,function e(t){return t.reduce((t,n)=>t.concat(Array.isArray(n)?e(n):n),[])}(t))}catch(e){(t=[]).push(S())}}let R=()=>{y.length>0&&(o.RouterClient.transmit("logger.service.logMessages",y),f.clearMessageList())};function j(e,n,r){let o,i=!1,s=!0;"forceObjectsToLogger"===r[0]&&(i=!0,s=!1,r.splice(0,1)),r=r.map(e=>{if(s){if(function(e){const t=[],n=[e];let r=0,o=0;for(;n.length&&o<1e3;){o++;const e=n.pop();if("boolean"==typeof e)r+=4;else if("string"==typeof e)r+=2*e.length;else if("number"==typeof e)r+=8;else if("object"==typeof e&&-1===t.indexOf(e)){t.push(e);for(const t in e)n.push(e[t])}}return r}(e)>5e4)return O(I,["Message too large to send to the logger.",r]),"Log argument greater than 50KB. Check local Console to see output of the object."}return e});try{for(let e=0;e<r.length;e++)r[e]instanceof Error&&(r[e]=r[e].toString());o=new _(e,n,JSON.stringify(r))}catch(t){r.splice(0,r.length),r.push(S()),o=new _(e,n,"*** Logging Error: "+JSON.stringify(r))}if(i||!function(e){return!0===e.logData.includes("Finsemble.heartbeat")}(o))!function(e){if(y.length<2e4)y.push(e);else{console.error("Logging Queue Overflowed! Dumping queue here then continuing.",y.length);let e,n=0;for(;e=y.shift();)console.log("Message "+n++,e);t.Logger.system.error("Logging Queue Overflowed! Dumping queue in client then continuing.")}}(o);else if(++m<=5){O(I,[`"Filtered Logger Message (${m} of first 5 shown)`,o])}l&&R()}function L(){!u&&r.System.isBrowserView()&&(u=r.System.getViewId()),f.system.debug("logger.service.registering",g),o.RouterClient.query("logger.service.register",{clientName:g,clientChannel:b,uuid:r.System.Window.getCurrent().uuid,windowName:r.System.Window.getCurrent().name,viewId:u},(e,t)=>{if(e)setTimeout(L,750);else{for(const e of y)e.viewId=u;l=!0,f.system.debug("logger.service.registered"),d=t.data,"routerService"!==g?(h=p,w(d,!0)):w(d,!1),j("system","Debug",["Logger Registered"]),R()}}),o.RouterClient.addListener(b,(e,t)=>{f.system.debug("logger.client.setLogState",t.data),d=t.data,w(d,!1)})}R=a(R,"routerService"===g?100:250,{leading:!1}),this.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),v.dev.Error&&!v.dev.LocalOnly&&j("dev","Error",e),e.unshift(`dev error (${window.performance.now()}):`),O(C,e)},this.warn=function(){if(v.dev.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),v.dev.Warn&&!v.dev.LocalOnly&&j("dev","Warn",e),v.dev.Warn&&v.dev.LocalOnly&&(e.unshift(`dev warn (${window.performance.now()}):`),O(E,e))}},this.info=function(){if(v.dev.Info){const e=Array.prototype.slice.call(arguments);0,v.dev.Info&&!v.dev.LocalOnly&&j("dev","Info",e),v.dev.Info&&v.dev.LocalOnly&&(e.unshift(`dev info (${window.performance.now()}):`),O(I,e))}},this.log=function(){if(v.dev.Log){const e=Array.prototype.slice.call(arguments);0,v.dev.Log&&!v.dev.LocalOnly&&j("dev","Log",e),v.dev.Log&&v.dev.LocalOnly&&(e.unshift(`dev log (${window.performance.now()}):`),O(A,e))}},this.debug=function(){if(v.dev.Debug){const e=Array.prototype.slice.call(arguments);0,v.dev.Debug&&!v.dev.LocalOnly&&j("dev","Debug",e),v.dev.Debug&&v.dev.LocalOnly&&(e.unshift(`dev debug (${window.performance.now()}):`),O(T,e))}},this.verbose=function(){if(v.dev.Verbose){const e=Array.prototype.slice.call(arguments);0,v.dev.Verbose&&!v.dev.LocalOnly&&j("dev","Verbose",e),v.dev.Verbose&&v.dev.LocalOnly&&(e.unshift(`dev verbose (${window.performance.now()}):`),O(T,e))}},this.system={},this.system.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),v.system.Error&&!v.system.LocalOnly&&j("system","Error",e),e.unshift(`system error (${window.performance.now()}):`),O(C,e)},this.system.warn=function(){if(v.system.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),v.system.Warn&&!v.system.LocalOnly&&j("system","Warn",e),v.system.Warn&&v.system.LocalOnly&&(e.unshift(`system warn (${window.performance.now()}):`),O(E,e))}},this.system.info=function(){if(v.system.Info){const e=Array.prototype.slice.call(arguments);0,v.system.Info&&!v.system.LocalOnly&&j("system","Info",e),v.system.Info&&v.system.LocalOnly&&(e.unshift(`system info (${window.performance.now()}):`),O(I,e))}},this.system.log=function(){if(v.system.Log){const e=Array.prototype.slice.call(arguments);0,v.system.Log&&!v.system.LocalOnly&&j("system","Log",e),v.system.Log&&v.system.LocalOnly&&(e.unshift(`system log (${window.performance.now()}):`),O(A,e))}},this.system.debug=function(){if(v.system.Debug){const e=Array.prototype.slice.call(arguments);0,v.system.Debug&&!v.system.LocalOnly&&j("system","Debug",e),v.system.Debug&&v.system.LocalOnly&&(e.unshift(`system debug (${window.performance.now()}):`),O(T,e))}},this.system.verbose=function(){if(v.system.Verbose){var e=Array.prototype.slice.call(arguments);0,v.system.Verbose&&!v.system.LocalOnly&&j("system","Verbose",e),v.system.Verbose&&v.system.LocalOnly&&((e=Array.prototype.slice.call(arguments)).unshift(`system log (${window.performance.now()}):`),O(T,e))}},this.perf={},this.perf.error=function(){const e=Array.prototype.slice.call(arguments);e.push(S()),v.perf.Error&&!v.perf.LocalOnly&&j("perf","Error",e),e.unshift(`perf error (${window.performance.now()}):`),O(C,e)},this.perf.warn=function(){if(v.perf.Warn){const e=Array.prototype.slice.call(arguments);e.push(S()),v.perf.Warn&&!v.perf.LocalOnly&&j("perf","Warn",e),v.perf.Warn&&v.perf.LocalOnly&&(e.unshift(`perf warn (${window.performance.now()}):`),O(E,e))}},this.perf.info=function(){if(v.perf.Info){const e=Array.prototype.slice.call(arguments);0,v.perf.Info&&!v.perf.LocalOnly&&j("perf","Info",e),v.perf.Info&&v.perf.LocalOnly&&(e.unshift(`perf info (${window.performance.now()}):`),O(I,e))}},this.perf.log=function(){if(v.perf.Log){const e=Array.prototype.slice.call(arguments);0,v.perf.Log&&!v.perf.LocalOnly&&j("perf","Log",e),v.perf.Log&&v.perf.LocalOnly&&(e.unshift(`perf log (${window.performance.now()}):`),O(A,e))}},this.perf.debug=function(){if(v.perf.Debug){const e=Array.prototype.slice.call(arguments);0,v.perf.Debug&&!v.perf.LocalOnly&&j("perf","Debug",e),v.perf.Debug&&v.perf.LocalOnly&&(e.unshift(`perf debug (${window.performance.now()}):`),O(T,e))}},this.perf.verbose=function(){if(v.perf.Verbose){const e=Array.prototype.slice.call(arguments);0,v.perf.Verbose&&!v.perf.LocalOnly&&j("perf","Verbose",e),v.perf.Verbose&&v.perf.LocalOnly&&(e.unshift(`perf verbose (${window.performance.now()}):`),O(T,e))}},this.unregisterClient=function(e=null,t=Function.prototype){f.system.debug("logger.service.unregister",g,e,u),R();const n=e||{clientName:g,viewId:u};o.RouterClient.query("logger.service.unregister",n,t)},this.isLogMessage=function(e){return"logger.service.logMessages"===e},this.status="offline",this.setRouterClient=e=>{this.RouterClient=e},this.start=function(){let e;function t(){o.status="online",f.system.debug("Logger onReady",g),o.RouterClient.calibrateTimeWithRouterService(e=>{p=e,c||(o.startupTime=performance.now()-o.startupTime,L(),c=!0)})}this.startupTime=performance.now(),o.RouterClient||(console.log("No instance of the RouterClient found for this instance of the Logger. Dynamically requiring it."),o.RouterClient=n(10).default);const i=()=>{e=o.RouterClient.subscribe("Finsemble.Service.State.loggerService",(n,r)=>{"ready"===r.data.state&&(t(),o.RouterClient.unsubscribe(e))})};"routerService"===window.name?o.RouterClient.query("logger.service.register",{},e=>{e?setTimeout(i,750):i()}):o.RouterClient.onReady(i),r.System.isBrowserView()&&window.addEventListener("beforeunload",()=>{o.unregisterClient()})}},t.Logger="undefined"!=typeof window?new t.LoggerConstructor:new o.LocalLogger,t.default=t.Logger},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.System=void 0;const n="undefined"!=typeof window?window:e;class r{constructor(e,t,n){return new fin.desktop.Window(e,t)}static get getCurrent(){return fin.desktop.Window.getCurrent}static get wrap(){return fin.desktop.Window.wrap}}class o{constructor(e,t,n){return new fin.desktop.Application(e,t)}static get getCurrent(){return fin.desktop.Application.getCurrent}static get wrap(){return fin.desktop.Application.wrap}}class i{constructor(e){new fin.desktop.Notification(e)}}class s{constructor(){return new fin.desktop.System.Clipboard}static get writeText(){return fin.desktop.System.Clipboard.writeText}static get writeHTML(){return fin.desktop.System.Clipboard.writeHTML}static get writeRTF(){return fin.desktop.System.Clipboard.writeRTF}static get readText(){return fin.desktop.System.Clipboard.readText}static get readHTML(){return fin.desktop.System.Clipboard.readHTML}static get readRTF(){return fin.desktop.System.Clipboard.readRTF}}t.System=class{static get Application(){return o}static get Window(){return r}static get Notification(){return i}static get Clipboard(){return s}static async getMousePosition(e=Function.prototype){return new Promise((t,n)=>{fin.desktop.System.getMousePosition(n=>{(n.left||0===n.left)&&(n.x=n.left),(n.top||0===n.top)&&(n.y=n.top),e(null,n),t(n)},t=>{e(t,null),n(t)})})}static getMonitorInfo(e=Function.prototype){return new Promise(t=>{fin.desktop.System.getMonitorInfo(n=>{t(n),e(n)})})}static get container(){return fin.container?fin.container:"Electron"}static get isBrowserView(){return e2o.isBrowserView}static get getViewId(){return e2o.getViewId}static get hasBrowserView(){return e2o.hasBrowserView}static get fin(){return e2o||fin||{}}static get ready(){return fin.desktop.main}static getHostSpecs(e=Function.prototype){return new Promise(t=>{fin.desktop.System.getHostSpecs(n=>{t(n),e(n)})})}static get InterApplicationBus(){return fin.desktop.InterApplicationBus}static get launchExternalProcess(){return fin.desktop.System.launchExternalProcess}static get terminateExternalProcess(){return fin.desktop.System.terminateExternalProcess}static get getAllApplications(){return fin.desktop.System.getAllApplications}static get exit(){return fin.desktop.System.exit}static get clearCache(){return fin.desktop.System.clearCache}static get showDeveloperTools(){return fin.desktop.System.showDeveloperTools}static get getRuntimeInfo(){return fin.desktop.System.getRuntimeInfo||chrome.desktop.getDetails}static get addEventListener(){return fin.desktop.System.addEventListener}static get addSelectClientCertificateListener(){return fin.desktop.System.addSelectClientCertificateListener}static get addCertificateErrorListener(){return fin.desktop.System.addCertificateErrorListener}static get getVersion(){return fin.desktop.System.getVersion}static get getUpdateAvailable(){return fin.desktop.System.getUpdateAvailable}static get openUrlWithBrowser(){return fin.desktop.System.openUrlWithBrowser}static get getAllWindows(){return fin.desktop.System.getAllWindows}static get getProcessList(){return fin.desktop.System.getProcessList}static get getProtocolString(){return fin.desktop.System.getProtocolString}static get hideSplashScreen(){return fin.desktop.System.hideSplashScreen}static FinsembleReady(e){return n.FSBL&&n.FSBL.addEventListener?n.FSBL.addEventListener("onready",e):window.addEventListener("FSBLready",e)}static startupApplicationHandshake(){fin.desktop.System.startupApplicationHandshake&&fin.desktop.System.startupApplicationHandshake()}static closeApplication(e,t=Function.prototype){return new Promise(n=>{let r,o=!1;const i=()=>{o||(console.log("Attempting to terminate",e.uuid),e.terminate(()=>{t(),n()},()=>{o||(o=!0,clearInterval(r),console.log("force closing ",e.uuid),e.terminate())}))};r=setInterval(i,2e3),console.log("closing ",e.uuid),e.close(!1,()=>{console.log("app.close: successfully closed",e.uuid),o=!0,clearInterval(r),t(),n()},i)})}static isElectron(){return"Electron"===fin.container}}}).call(this,n(27))},function(e,t,n){"use strict";(function(e,r){n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return c}));var o,i=n(2),s="function"==typeof e&&e,a="object"==typeof r&&"function"==typeof r.nextTick;function u(e){setTimeout(e,0)}function c(e){return Object(i.a)((function(t,n){e((function(){t.apply(null,n)}))}))}o=s?e:a?r.nextTick:u,t.a=c(o)}).call(this,n(39).setImmediate,n(27))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0});const r=n(62),o=n(4),i=new(0,r.RouterClientConstructor)({clientName:"RouterClient"});o.Logger.setRouterClient(i),t.default=i},,function(e,t,n){"use strict";t.a=function(e){return e}},,,,,function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.clone=c,t.getContainerVersion=function(e=Function.prototype){return new Promise(t=>{i.System.getVersion(n=>{const r=n.split(".").map(Number),o={major:r[0],chromium:r[1],minor:r[2],patch:r[3]};e(o),t({versionObject:o})})})},t.castToPromise=function(e){return function(){return new Promise((t,n)=>{const r=e.apply(null,Array.from(arguments));try{return r.then(t,n)}catch(e){e instanceof TypeError?t(r):n(e)}})}},t.isPercentage=function(e){if("string"!=typeof e)return!1;return-1!==e.indexOf("%")},t.crossDomain=function(e){const t=document.createElement("a");t.href=e;const n=window.location.hostname===t.hostname,r=window.location.protocol===t.protocol,o=void 0!==window.location.port?window.location.port:80,i=void 0!==t.port?t.port:80,s=o===i,u=!(n&&s&&r);return a.default.system.debug(`Launcher crossDomain=${u} (${n}:${r}:${s})`),u},t.getMonitorFromWindow=d,t.getFinWindow=p,t.getWindowDescriptor=h,t.findMonitor=m,t.getWhichMonitor=y,t.getMonitor=g,t.getMonitorFromCommand=function(e,t,n){return new Promise(r=>{g(t,t=>{u.getAllMonitors(o=>{y({commandMonitor:e,monitors:o,launchingMonitorPosition:t.position},e=>{n&&n(e),r(e)})})})})},t.windowOnMonitor=function(e,t){if(e.left>=t.left&&e.left<t.right||e.right<=t.right&&e.right>t.left)return!0;return!1},t.getMonitorByDescriptor=function(e,t){return new Promise(n=>{d(e,e=>{t&&t(e),n(e)})})},t.getMyWindowIdentifier=function(e){const t=i.System.Window.getCurrent();return new Promise(n=>{t.getOptions(r=>{let o=null;const{customData:i}=r;i&&i.component&&(o=i.component.type);const s={windowName:t.name,uuid:t.uuid,componentType:o};e&&e(s),n(s)})})},t.camelCase=function(){let e="";for(let t=0;t<arguments.length;t++)e=`${e} ${arguments[t]}`;return e.replace(/\s(.)/g,e=>e.toUpperCase()).replace(/\s/g,"").replace(/^(.)/,e=>e.toLowerCase())},t.guuid=function(){return(0,o.default)()},t.injectJS=function(e,t){const n=document.createElement("script");n.onload=t,n.type="text/javascript",n.async=!0,n.src=e;const r=document.getElementsByTagName("head")[0],o=r.getElementsByTagName("script")[0];r.insertBefore(n,o)},t.openSharedData=function(e,t){const n=FSBL.Clients.LauncherClient,r=FSBL.Clients.LinkerClient;e.multipleOpenerHandler||(e.multipleOpenerHandler=function(e){let t,n=0;for(const r of Object.keys(e))e[r].length>n&&(t=r,n=e[r].length);return[t]});const o=[],i={};n.getComponentsThatCanReceiveDataTypes({dataTypes:Object.keys(e.data)},(s,u)=>{for(const e of Object.keys(u))if(u[e].componentTypes.length)for(const t of u[e].componentTypes)i[t]?i[t].push(e):i[t]=[e];else{const t="No Components Available to Handle the type: "+e;o.push(t),a.default.system.error(t)}let c=Object.keys(i);if(c.length){c.length>1&&(c=e.multipleOpenerHandler(i));const s=Object.keys(r.channels);if(s.length){if(r.getLinkedComponents({componentTypes:c,windowIdentifier:r.windowIdentifier()}).length||e.publishOnly)r.publish({dataType:"Finsemble.DragAndDropClient",data:e.data}),t&&t(o.length?o:null,"Data published");else{for(const t of c)n.spawn(t,{data:{sharedData:e.data,linker:{channels:s}},addToWorkspace:!0});t&&t(o.length?o:null,"Linked Window(s) spawned with data")}}else if(!e.publishOnly){for(const t of c)n.spawn(t,{data:{sharedData:e.data},addToWorkspace:!0});t&&t(o.length?o:null,"New Window(s) spawned with data")}}else t&&t(o.length?o:null,null)})},t.getNewBoundsWhenMovedToMonitor=function(e,t,n="availableRect"){const r=e[n]||e.availableRect||e.monitorRect,o=c(t);t.top<r.top?o.top=r.top:t.top>r.bottom-t.height&&(o.top=r.bottom-t.height);t.left<r.left?o.left=r.left:t.left>r.right-t.width&&(o.left=r.right-t.width);o.bottom=o.top+o.height,o.right=o.left+o.width,o.right>r.right&&(o.right=r.right);o.top<r.top&&(o.top=r.top);o.left<r.left&&(o.left=r.left);o.bottom>r.bottom&&(o.bottom=r.bottom);o.height=o.bottom-o.top,o.width=o.right-o.left;const i=Math.sqrt((t.left-o.left)**2+(t.top-o.top)**2);return{newBounds:o,distanceMoved:i,monitor:e}},t.isOnAMonitor=function(e){return this.Monitors.allMonitors.some(t=>{const{monitorRect:n}=t;return e.left>=n.left&&e.left<=n.right&&e.right>=n.left&&e.right<=n.right&&e.top>=n.top&&e.top<=n.bottom&&e.bottom>=n.top&&e.bottom<=n.bottom})},t.adjustBoundsToBeOnMonitor=function(e,t="availableRect"){if(this.isOnAMonitor(e))return a.default.system.info("Launcher.adjustWindowDescriptorBoundsToBeOnMonitor: on monitor."),e;const n=this.Monitors.allMonitors.map(n=>{let r=n.rawMonitor?n.rawMonitor:n;return this.getNewBoundsWhenMovedToMonitor(r,e,t)}).sort((e,t)=>e.distanceMoved-t.distanceMoved)[0];return a.default.system.info("Launcher.adjustWindowDescriptorBoundsToBeOnMonitor: not on monitor.  bounds",e,"monitor name",n.monitor.name,"newBounds",n.newBounds),n.newBounds},t.isWindows=async function(e=Function.prototype){const t=(await i.System.getHostSpecs()).name.toUpperCase().includes("WINDOWS");return e(t),t},t.getWindowType=function(e){if(e.windowType&&!["assimilation","assimilated","native","application","NativeWindow","FinsembleNativeWindow","CompoundWindow","WebWindow","WebApplication","StackedWindow"].includes(e.windowType))return a.default.system.error(`Invalid windowType: ${e.windowType}, defaulting to windowType: WebWindow`),"WebWindow";let t=e.windowType||"WebWindow";switch(e.windowType){case"assimilation":case"assimilated":t="NativeWindow";break;case"native":t="FinsembleNativeWindow";break;case"application":t="WebApplication";break;case"Web":t="WebWindow";break;case"StackedWindow":t="StackedWindow"}e.native&&(t="NativeWindow");e.compound&&(t="CompoundWindow");return t},t.getMonitorFromXY=t.getAllMonitors=t.Monitors=void 0;var o=r(n(41)),i=n(6),s=r(n(64)),a=r(n(4));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const u=new s.default(Function.prototype,Function.prototype,{System:i.System});function c(e,t){if(null===e||"object"!=typeof e)return e;if(e.constructor==Date||e.constructor==RegExp||e.constructor==Function||e.constructor==String||e.constructor==Number||e.constructor==Boolean)return new e.constructor(e);t=t||new e.constructor;for(const n in e)t[n]=void 0===t[n]?c(e[n],null):t[n];return t}t.Monitors=u;var{getAllMonitors:l}=u;t.getAllMonitors=l;var f=u.getMonitorFromScaledXY;function d(e,t){const n=Number.isFinite(e.x)?e.x:e.defaultLeft,r=Number.isFinite(e.y)?e.y:e.defaultTop,o=n+e.defaultWidth,i=r+e.defaultHeight;return new Promise((e,s)=>{u.getMonitorFromScaledXY(n,r,l=>{if(!l)return a.default.system.debug("getMonitorFromWindow - top-left is off screen, trying bottom right"),void u.getMonitorFromScaledXY(o,i,o=>{if(!o)return a.default.system.debug("getMonitorFromWindow - bottom-right is off screen, getting primary"),void u.getAllMonitors(n=>{n[0]?(t&&t(n[0]),e(n[0])):(s(new Error("Cannot find monitor for window.")),t&&t(null))});o=c(o);const{monitorRect:i}=o;(i.left<n||i.right<r)&&(o.straddling=!0),t&&t(o),e(o)});l=c(l);const{monitorRect:f}=l;(f.right>o||f.bottom>i)&&(l.straddling=!0),t&&t(l),e(l)})})}function p(e,t){return new Promise((n,r)=>{const o=i.System.Window.getCurrent();o.getOptions(s=>{if(e&&e.windowName){e.uuid||(e.uuid=s.uuid);const o=i.System.Window.wrap(e.uuid,e.windowName);o.getInfo(()=>{t&&t(o),n(o)},()=>{t&&t(null),r(`Window ${e.windowName} not found. UUID: ${e.uuid}`),console.debug(`util.getFinWindow: Window ${e.windowName} not found`)})}else if(e&&e.componentType)if(void 0!==window.LauncherService){const o=window.LauncherService.componentFinder(e);o?(n(o),t&&t(o)):(r(`util.getFinWindow: Component ${e.componentType} not found.`),t&&t(null))}else r("getFinWindow by componentType is currently only operable within LaunchService"),t&&t(null);else t&&t(o),n(o)})})}function h(e,t){return new Promise((n,r)=>{p(e).then(e=>{e.getOptions(e=>{t&&t(e),n(e)})}).catch(e=>{console.warn(e),t&&t(null),r(e)})})}function m(e,t,n){for(let r=0;r<e.length;r++){const o=e[r];if(o[t]===n)return o}return null}function y(e,t){let n;arguments.length>2&&(e={commandMonitor:arguments[0],monitors:arguments[1],launchingMonitorPosition:arguments[2]},t=null);let{commandMonitor:r,monitors:o,launchingMonitorPosition:i}=e;const s=r&&""!==r||0===r;if("primary"===r)n=m(o,"whichMonitor","primary");else if("next"===r){let e=i+1;e>=o.length&&(e=0),n=o[e]}else if("previous"===r){let e=i-1;e<0&&(e=o.length-1),n=o[e]}else if("mine"===r){var a=!0;activeWindows.getWindow(e.windowIdentifier.windowName)._getBounds((e,r)=>{e?(n=o[0],t(n)):u.getMonitorFromScaledXY(r.left,r.top,e=>{t(e)})})}else s?(r>=o.length&&(r=o.length-1),n=o.filter(e=>e.position===r)[0]):i&&(n=o[i]);if(n||(n=o[0]),!a){if(!t)return n;t(n)}}function g(e,t){return new Promise((n,r)=>{h(e,e=>{e?d(e,e=>{t&&t(e),n(e)}):r("util.getMonitor: Can't locate windowDescriptor.")})})}t.getMonitorFromXY=f},function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigUtilInstance=void 0;var o=r(n(17)),i=r(n(4)),s=n(6);
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const a=new function(){const e=this;this.resolveConfigVariables=function(e,t){let n=0,r=0,o=!0;function s(e){const t=e.split(/[/\\:?=&\s]/);for(let n=0;n<t.length;n++)if("$"===t[n][0]){const r=t[n].substring(1);let s=a(r);if(void 0!==s){const a=e.replace(t[n],s);i.default.system.verbose("forceObjectsToLogger","ConfigUtil.resolveConfigVariables:resolveString configString",t[n],r,s,"old value=",e,"value=",a),o=!0,e=a}}return e}function a(t){let n=e[t];return void 0===n&&(e.custom?(n=e.custom[t],void 0===n&&i.default.system.warn("ConfigUtil.resolveString",`Missing [${t}] variable from finsemble.custom configuration object`)):i.default.system.error("ConfigUtil.resolveString",'Missing "custom" node from finsemble configuration - unable to get variable resoution for variable: '+t)),n}function u(e,t,n){e=e||{},i.default.system.verbose("forceObjectsToLogger","ConfigUtil.resolveConfigVariables:resolveObject","pass",t,"recursionLevel",n,"configObject:",e),Object.keys(e).forEach(r=>{const o=e[r];"string"==typeof o&&o.indexOf("$")>-1?e[r]=s(o):o instanceof Array?function e(t,n,r){i.default.system.verbose("forceObjectsToLogger","resolveArray","pass",n,"recursionLevel",r,"configArray:",t);for(let o=0;o<t.length;o++){const i=t[o];"string"==typeof i&&i.indexOf("$")>-1?t[o]=s(i):i instanceof Array?e(i,n,r+1):"object"==typeof i&&u(i,n,r+1)}}(o,t,n+1):"object"==typeof o&&u(o,t,n+1)})}for(;o&&r++<100;)o=!1,u(t,++n,1);r>=100&&i.default.system.error("forceObjectsToLogger","resolveConfigVariables exceeded maximum passes so continuing -- probably a recursive macro definitions.  Look in this config for unresolved macro variables",e)},this.getExpandedRawManifest=function(t,n){i.default.system.debug("ConfigUtil.getExpandedRawManifest starting"),s.System.ready(()=>{const r=s.System.Application.getCurrent();!function t(r,o,a){i.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getRawManifest",o,a),o.getManifest(t=>{i.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getExpandedRawManifest: manifest retrieved. Pre-variable resolution",t),e.resolveConfigVariables(t.finsemble,t.finsemble),i.default.system.debug("forceObjectsToLogger","ConfigUtil.getExpandedRawManifest:getExpandedRawManifest:Complete. post-variable resolution",t),r(t)},e=>{e&&(i.default.system.error("ConfigUtil.getExpandedRawManifest:application.getManifest:err",e),n&&n()),o.getParentUuid(e=>{const n=s.System.Application.wrap(e);i.default.system.debug("forceObjectsToLogger","uuid",e,"parentApplication",n),a<10?t(r,n,++a):r("could not find manifest in parent applications")})})}(t,r,1)})},this.readConfigFile=function(e,t){i.default.system.debug("fetching "+e),fetch(e,{credentials:"include",cache:"no-cache"}).then(e=>e.json()).catch(n=>{t(`Failure importing ${e}: ${n}`,null)}).then(e=>{t(null,e)})},this.getInitialManifest=function(t){s.System.ready(()=>{s.System.Application.getCurrent().getManifest(n=>{n.finsemble=n.finsemble||{},e.resolveConfigVariables(n.finsemble,n.finsemble),n.finsemble.applicationRoot||i.default.system.error("FATAL ERROR: applicationRoot was not defined in manifest file.");const r=n.finsemble.moduleRoot+"/configs/core/config.json";e.readConfigFile(r,(o,s)=>{o?i.default.system.error(`ConfigUtil.getInitialManifest:getCoreConfig:failed importing into finsemble config. $moduleRoot=${n.finsemble.moduleRoot}; Full Path=${r}`,o):(Object.keys(s).forEach(e=>{if("importConfig"===e){n.finsemble.importConfig=n.finsemble.importConfig||[];for(let e=0;e<s.importConfig.length;e++)n.finsemble.importConfig.unshift(s.importConfig[e])}else if("importThirdPartyConfig"===e){n.finsemble.importThirdPartyConfig=n.finsemble.importThirdPartyConfig||[];for(let e=0;e<s.importThirdPartyConfig.length;e++)n.finsemble.importThirdPartyConfig.unshift(s.importThirdPartyConfig[e])}else n.finsemble[e]=s[e]}),e.resolveConfigVariables(n.finsemble,n.finsemble),i.default.system.debug("forceObjectsToLogger","ConfigUtil.getInitialManifest:getCoreConfig:Initial Manifest after variables Resolved",n)),t(n)})})})},this.promptAndSaveJSONToLocalFile=function(e,t){i.default.system.debug("saveJSONToLocalFile",e,t);const n=JSON.stringify(t,null,"\t"),r="data:application/json;charset=utf-8,"+encodeURIComponent(n),o=e+".json",s=document.createElement("a");s.setAttribute("href",r),s.setAttribute("download",o),s.click()},this.configFormatForExport=function(e,t){i.default.system.debug("configFormatForExport starting",e,t);let n=o.default.clone(t);if("raw"===e);else if("all"===e)delete n.importConfig,delete n.comment;else if("application"===e)delete n.importConfig,delete n.comment,delete n.system,delete n.services;else if("workspace"===e)n={workspace:n};else if("workspaceTemplate"===e){const e={};e[n.name]=n,n={workspaceTemplates:e}}else"services"===e?n=n.services:"components"===e&&(n=n.components);return n},this.getDefault=function(e,t,n){let r=n;if(e){try{const n=t.split(".");let o=e;for(let e=1;e<n.length;e++)o=o[n[e]];r=o}catch(e){r=n}void 0===r&&(r=n)}return r},this.getFile=async function(e,t=Function.prototype){i.default.system.debug("fetching import "+e);let n=null;return await fetch(e,{credentials:"include",cache:"no-cache"}).then(e=>e.json()).catch(n=>{t(`failure importing ${e}: ${n}`,null)}).then(e=>{t(null,e),n=e}),n}};t.ConfigUtilInstance=a},function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(74));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var i=new function(){function e(e,t,n){const r=function(){try{throw Error("")}catch(e){return e}}(),o=r.stack.split("\n")[5],i=o.indexOf("at "),s=o.slice(i+2,o.length),a=r.stack.split("\n")[6],u=a.indexOf("at "),c=a.slice(u+2,a.length);console.warn(`parameter validation failed: parameter ${e} is of type '${typeof t}' but should be of type '${n}' in${s} called by${c}`)}this.args=function(){let t=!0;if(o.default.validationEnabled()){const n=arguments.length;if((n+1)%2!=0)for(let r=0;r<n;r+=2){let n=!1;const o=arguments[r];let i=arguments[r+1];if("="===i.slice(-1)&&(i=i.slice(0,-1),n=!0),typeof o!==i&&!(n&&void 0===o||void 0!==o&&"any"===i)){e(r/2+1,o,i),t=!1;break}}else console.warn("validate.args requires even number of parameters: "+JSON.stringify(arguments))}return t},this.args2=function(){let t=!0;if(o.default.validationEnabled()){const n=arguments.length;if((n+1)%3!=0)for(let r=0;r<n;r+=3){let n=!1;const o=arguments[r],i=arguments[r+1];let s=arguments[r+2];if("="===s.slice(-1)&&(s=s.slice(0,-1),n=!0),typeof i!==s&&!(n&&void 0===i||void 0!==i&&"any"===s)){e(o,i,s),t=!1;break}}else console.warn("validate.args requires even number of parameters: "+JSON.stringify(arguments))}return t}};t.default=i,e.exports=t.default},function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(10)),i=r(n(4)),s=n(47),a=n(34),u=n(38);const c=new class{publishBootStatus(e,t,n){console.log("publishStartingStatus",e,n),i.default.system.debug("publishBootStatus",e,t,n),o.default.publish(u.statusChannel(e),{name:e,type:t,state:n})}waitForBootStage(e,t,n=Function.prototype){return new Promise((r,u)=>{i.default.system.debug("SystemManagerClient.waitForBootStage entry",e,t);const c=s.ALL_BOOT_STAGES.indexOf(e);"microkernel"===e&&"stageEntered"===t&&i.default.system.error("Cannot wait on `stageEntered` for microkernel because router isn't up yet. So will instead wait for microkernal stage complete.");const l=o.default.subscribe(a.STAGE_CHANNEL,(a,f)=>{if(i.default.system.debug("SystemManagerClient.waitForBootStage new stage",f.data.stage,l),a)i.default.system.error("SystemManagerClient.waitForBootStage subscribe error",a),n(a),u(a);else if(-1===c)a="illegal stage argument",i.default.system.debug("SystemManagerClient.waitForBootStage subscribe error",a,e),n(a),u(a);else{const a=s.ALL_BOOT_STAGES.indexOf(f.data.stage);i.default.system.debug("SystemManagerClient.waitForBootStage new stage",f.data,l),"stageEntered"===t&&a+1>=c?(i.default.system.debug("SystemManagerClient.waitForBootStage stageEntered",e,l,n.name),n(),r(),o.default.unsubscribe(l)):"stageCompleted"===t&&a>=c?(i.default.system.debug("SystemManagerClient.waitForBootStage completed",e,l),n(),r(),o.default.unsubscribe(l)):i.default.system.debug(`SystemManagerClient.waitForBootStage else currentStageIndex=${a} stageIndex=${c} `,a,c,e,l)}})})}waitForStartup(e,t=Function.prototype){return new Promise((n,r)=>{i.default.system.debug("SystemManagerClient.waitForStartup."+e,e);const s=o.default.subscribe(u.statusChannel(e),(a,u)=>{i.default.system.debug("SystemManagerClient.waitForStartup subscribe",e,a,u),a?(i.default.system.error("SystemManagerClient.waitForStartup subscribe error",a),t(a),r()):u.data.name===e&&"completed"===u.data.state&&(i.default.system.debug("SystemManagerClient.waitForStartup completed",e),t(),n(),o.default.unsubscribe(s))})})}publishCheckpointState(e,t,n){console.log("publishCheckpoint",e,t,n,u.checkpointChannel(e,t)),i.default.system.debug("publishCheckpoint",e,t,n,u.checkpointChannel(e,t)),o.default.publish(u.checkpointChannel(e,t),{windowName:e,checkpointName:t,state:n})}showSystemLog(){i.default.system.debug("SystemManagerClient.showSystemLog"),o.default.transmit(a.SHOW_SYSLOG_CHANNEL,!0)}systemLog(e,t){i.default.system.debug("SystemManagerClient.systemLog",e,t),o.default.transmit(a.SYSLOG_CHANNEL,{params:e,logMessage:t})}};t.default=c},function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(26),i=r(n(19)),s=n(22),a=r(n(20)),u=r(n(4));class c extends s._BaseClient{constructor(e){super(e),this.listeners=[],this.changeSub=e=>{this.subs||(this.subs={}),this.subs[e]||(this.routerClient.query("configService.addListener",e,t=>{t&&u.default.system.error("Error adding listener to config service",t),this.routerClient.subscribe(e,this.handleChanges)}),this.subs[e]=!0)},this.handleChanges=(e,t)=>{e&&u.default.system.error(e),t.data.field||(t.data.field=null);const n=t.data.storeData?t.data.storeData:t.data.value;this.triggerListeners(t.data.field?t.data.field:"configService",n)},this.triggerListeners=(e,t)=>{if(this.listeners[e])for(let n=0;n<this.listeners[e].length;n++)"function"==typeof this.listeners[e][n]?this.listeners[e][n](null,{field:e,value:t}):u.default.system.warn("ConfigClient:triggerListeners: listener is not a function",e)},this.set=(e,t)=>{u.default.system.debug("ConfigClient.Set",e),"function"==typeof e?(t=e,i.default.args(t,"function"),e={}):i.default.args(e,"object",t,"function"),this.routerClient.query("config.set",e,(e,n)=>{t(e,n?n.data:null)})},this.processAndSet=this.processAndSet.bind(this),this.getValue=this.getValue.bind(this),this.getValues=this.getValues.bind(this),this.setValue=this.setValue.bind(this),this.setValues=this.setValues.bind(this),this.removeValue=this.removeValue.bind(this),this.removeValues=this.removeValues.bind(this),this.addListener=this.addListener.bind(this),this.addListeners=this.addListeners.bind(this),this.removeListener=this.removeListener.bind(this),this.removeListeners=this.removeListeners.bind(this),this.setPreference=this.setPreference.bind(this),this.getPreferences=this.getPreferences.bind(this)}getValue(e,t=Function.prototype){"string"==typeof e&&(e={field:e});return new Promise((n,r)=>{if(!e.field){const e="no field provided";return r(e),t(e)}this.routerClient.query("configService.getValue",{field:e.field},(e,o)=>e?(r(e),t(e)):(n({err:e,data:o.data}),t(e,o.data)))})}getValues(e,t=Function.prototype){if("function"==typeof e&&(t=e,e=null),e&&!Array.isArray(e))return this.getValue(e,t);return new Promise(n=>{this.routerClient.query("configService.getValues",{fields:e},(e,r)=>e?t(e):(n({err:e,data:r.data}),t(e,r.data)))})}setValue(e,t){const n={field:e.field,value:e.value};return this.routerClient.query("configService.setValue",n,e=>t?t(e):null)}setValues(e,t){return e?Array.isArray(e)?this.routerClient.query("configService.setValues",e,e=>t?t(e):null):u.default.system.error("ConfigClient.SetValues. Params must be an array"):u.default.system.error("ConfigClient.SetValues. No params given")}removeValue(e,t=Function.prototype){if(void 0!==e){if(e.field||"string"!=typeof e)return t("no field provided");e={field:e}}return e.value=null,this.setValue(e,t)}removeValues(e,t=Function.prototype){if(!Array.isArray(e))return t("The passed in parameter needs to be an array");o.map(e,this.removeValue,(e,n)=>t(e,n))}addListener(e,t,n){let r=null;"function"==typeof e&&(t=e,e={field:r}),({field:r}=e);const o="configService"+(r?"."+r:"");return this.listeners[o]?this.listeners[o].push(t):this.listeners[o]=[t],this.changeSub(o),n?n():null}addListeners(e,t,n){if(!Array.isArray(e))return this.addListener({field:e.field},t,n);for(let n=0;n<e.length;n++){let o=null;const i=e[n];var r;"string"==typeof i?o=i:i.field&&(({field:o}=i),r=i.listener);const s="configService"+(o?"."+o:"");r||t&&"function"==typeof t&&(r=t),this.listeners[s]?this.listeners[s].push(r):this.listeners[s]=[r],this.changeSub(s)}return n?n():null}removeListener(e,t,n){let r=null;"function"==typeof e&&(n=t,t=e,e={field:r}),({field:r}=e);const o=this.name+(r?"."+r:"");if(this.listeners[o])for(let e=0;e<this.listeners[o].length;e++)if(this.listeners[o][e]===t)return this.listeners[o].pop(e),n?n(null,!0):null;return n?n(null,!1):null}removeListeners(e,t,n){if(!Array.isArray(e))return"function"==typeof e?this.removeListener({},e,n):e.field&&this.removeListener(e,t,n),n("missing fields");let r=0;for(let n=0;n<e.length;n++){let i=null;const s=e[n];var o;"string"==typeof s?i=s:s.field&&(({field:i}=s),o=e[n].listener);const a="configService"+(i?"."+i:"");if(!o){if(!t||"function"!=typeof t)continue;o=t}for(let e=0;e<this.listeners[a].length;e++)this.listeners[a][e]===o&&(this.listeners[a].pop(n),r++)}return r<e.length?n("All listeners could not be found",!1):n?n(null,!0):null}get(e,t){u.default.system.debug("ConfigClient.Get",e),u.default.system.warn("This functionality has been deprecated. It will be removed in Finsemble version 3.0. Use getValue instead.",e),1===arguments.length?(t=e,i.default.args(t,"function"),e={}):i.default.args(e,"object",t,"function"),this.routerClient.query("config.get",e,(e,n)=>{t(e,n?n.data:null)})}processAndSet(e,t){if(u.default.system.debug("ConfigClient.processAndSet",e),i.default.args(e,"object",t,"function=")&&i.default.args2("params.newConfig",e.newConfig,"object","params.overwrite",e.overwrite,"boolean=","params.replace",e.replace,"boolean="),!e.overwrite&&e.replace){const e="cannot use replace option unless overwrite is also true";u.default.system.warn("ConfigClient.processAndSet:",e),t&&t(e,null)}else this.routerClient.query("config.processAndSet",e,(e,n)=>{t&&t(e,n?n.data:null)})}setPreference(e,t){this.routerClient.query("PreferencesService.setPreference",e,(e,n)=>{t&&t(e,n?n.data:null)})}async getPreferences(e,t){u.default.system.debug("ConfigClient.getPreferences",e),"function"==typeof e&&(t=e,e=null),await a.default.waitForStartup("preferencesService"),this.routerClient.query("PreferencesService.getPreferences",e,(e,n)=>{u.default.system.debug("ConfigClient.getPreferences response",n),t&&t(e,n?n.data:null)})}}const l=new c({startupDependencies:{services:["configService"]},onReady(e){e&&e()},name:"configClient"});t.default=l},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._BaseClient=void 0;
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
const o=r(n(10)),i=r(n(19)),s=r(n(4)),a=n(6),u=r(n(54)),c=n(55);class l extends u.default{constructor(e){super({name:e.name,sourceType:e.name.replace("Client","")}),this.status="offline",this.startupTime=0,this.initialized=!1,this.startupDependencies={services:[],clients:[]},this.finsembleWindow=null,this.windowName="",this.clientReadyQueue=[],this.processClientReadyQueue=()=>{for(const e of this.clientReadyQueue)e();this.clientReadyQueue=[]},this.onReady=e=>{this.clientReadyQueue.push(e),"online"===this.status&&this.processClientReadyQueue()},this.setClientOnline=()=>{this.status="online";const e=`STARTUP:CLIENT ONLINE:${this.finWindow.name}:${this.name}`;this.startupTime=window.performance.now()-this.startupTime;const t=()=>{this.logger.system.debug(e),this.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(this.name)};this._onReady?this._onReady(t):t()},this.initialize=(e=Function.prototype)=>{this.initialized||(this.initialized=!0,this.startupTime=performance.now(),this.routerClient.onReady(()=>{this.finWindow=a.System.Window.getCurrent(),this.windowName=this.finWindow.name,this.logger.system.debug("Baseclient Init Router Ready",this.name),c.FSBLDependencyManagerSingleton.startup.waitFor(this.startupDependencies,()=>{e(),this.setClientOnline()})}))},this.onClose=e=>{this.cleanup(),e&&e()},this.name=e.name,this._onReady=e.onReady,this.startupDependencies=e.startupDependencies||{services:[],clients:[]},this.logger=s.default,this.routerClient=o.default}addEventListener(e,t){super.addEventListener(e,t)}}t._BaseClient=l;t.default=function(e){i.default.args(e,"object=");const t=this;let n,r="offline";this.startupTime=0,e&&(e.onReady&&({onReady:n}=e),this.name=e.name),this.initialized=!1,this.startupDependencies=e.startupDependencies||{services:[],clients:[]},this.routerClient=o.default,this.finWindow=null,this.finsembleWindow=null,this.windowName="",this.requiredServices=[],this.requiredClients=[],this.clientReadyQueue=[],this.processClientReadyQueue=function(){for(let e=0;e<this.clientReadyQueue.length;e++){const t=this.clientReadyQueue[e];"function"==typeof t&&t()}this.clientReadyQueue=[]},this.onReady=function(e){this.clientReadyQueue.push(e),"online"===r&&this.processClientReadyQueue()},this.setClientOnline=function(){r="online";const e=`STARTUP:CLIENT ONLINE:${t.finWindow.name}:${t.name}`;t.startupTime=performance.now()-t.startupTime,n?n(()=>{s.default.system.debug(e),t.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(t.name)}):(s.default.system.debug(e),t.processClientReadyQueue(),c.FSBLDependencyManagerSingleton.setClientOnline(t.name))},this.initialize=function(e=Function.prototype){t.initialized||(t.initialized=!0,t.setClientOnline=t.setClientOnline.bind(t),t.startupTime=performance.now(),t.routerClient.onReady(()=>{t.finWindow=a.System.Window.getCurrent(),t.windowName=t.finWindow.name,s.default.system.debug("Baseclient Init Router Ready",t.name),c.FSBLDependencyManagerSingleton.startup.waitFor({clients:t.startupDependencies.clients||[]},()=>{e(),t.setClientOnline()})}))},this.onClose=function(){}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOVE_REASON=t.LAUNCHER_SERVICE=t.HEARTBEAT_TIMEOUT_CHANNEL=t.COMPONENT_STATE_STORAGE_TOPIC=t.WINDOW_SERVICE_REQUESTS=t.WORKSPACE=t.WINDOW=t.INTERRUPTIBLE_EVENTS=t.EVENT_INTERRUPT_CHANNEL=t.DOCKING=t.SERVICE_STOP_CHANNEL=t.SERVICE_START_CHANNEL=t.WINDOWSTATE=t.SERVICES_STATE_CHANNEL=t.CLIENT_SERVER_MAPPING=t.SERVICE_QUERY_READY_CHANNEL=t.SERVICE_CLOSED_CHANNEL=t.SERVICE_CLOSING_CHANNEL=t.SERVICE_READY_CHANNEL=t.SERVICE_INITIALIZING_CHANNEL=t.APPLICATION_STATE_CHANNEL=t.WRAPPERS=void 0,t.WRAPPERS={EVENTS:["title-changed","bringToFront","setBounds","alwaysOnTop","setOpacity"]},t.APPLICATION_STATE_CHANNEL="Finsemble.Application.State",t.SERVICE_INITIALIZING_CHANNEL="Finsemble.ServiceManager.serviceInitializing",t.SERVICE_READY_CHANNEL="Finsemble.ServiceManager.serviceReady",t.SERVICE_CLOSING_CHANNEL="Finsemble.ServiceManager.serviceClosing",t.SERVICE_CLOSED_CHANNEL="Finsemble.ServiceManager.serviceClosed",t.SERVICE_QUERY_READY_CHANNEL=e=>"Finsemble.ServiceManager.queryReady."+e,t.CLIENT_SERVER_MAPPING=e=>({authenticationClient:"authenticationService",configClient:"configService",distributedStoreClient:"dataStoreService",hotkeysClient:"hotkeysService",linkerClient:"linkerService",logger:"loggerService",searchClient:"searchService",storageClient:"storageService",windowClient:"windowService",workspaceClient:"workspaceService"}[e]),t.SERVICES_STATE_CHANNEL="Finsemble.State.Services",function(e){e[e.NORMAL=0]="NORMAL",e[e.MINIMIZED_WAS_NORMAL=1]="MINIMIZED_WAS_NORMAL",e[e.MAXIMIZED=2]="MAXIMIZED",e[e.MINIMIZED_WAS_MAXIMIZED=3]="MINIMIZED_WAS_MAXIMIZED",e[e.TRANSITIONING=4]="TRANSITIONING"}(t.WINDOWSTATE||(t.WINDOWSTATE={})),t.SERVICE_START_CHANNEL="Finsemble.Service.Start",t.SERVICE_STOP_CHANNEL="Finsemble.Service.Stop",t.DOCKING={GROUP_UPDATE:"DockingService.groupUpdate",WORKSPACE_GROUP_UPDATE:"Finsemble.WorkspaceService.groupUpdate",REQUEST_PUBLISH:"DockingService.requestGroupDataPublish"},t.EVENT_INTERRUPT_CHANNEL="Finsemble.Event.Interrupt",t.INTERRUPTIBLE_EVENTS=["close-requested","closed","close-complete","_container-close-handlers"],t.WINDOW={DELAYABLE_EVENTS:["close-requested","closed","close-complete","_container-close-handlers"],CANCELABLE_EVENTS:["close-requested"]},t.WORKSPACE={DELAYABLE_EVENTS:["load-requested","close-requested","save-requested"],CANCELABLE_EVENTS:["close-requested"],CLEAN_SHUTDOWN:"Finsemble.Workspace.cleanShutdown",UPDATE_PUBSUB:"Finsemble.WorkspaceService.update",STORAGE_TOPIC:"finsemble.workspace",CACHE_STORAGE_TOPIC:"finsemble.workspace.cache",ALL_WORKSPACES:"finsemble.allWorkspaces",ACTIVE_WORKSPACE:"activeWorkspace",LAST_USED_WORKSPACE_TOPIC:"finsemble",LAST_USED_WORKSPACE_NAME:"finsemble.lastUsedWorkspace.name",LAST_USED_WORKSPACE:"finsemble.lastUsedWorkspace",INITIAL_WORKSPACE_PREFERENCE:"finsemble.initialWorkspace",PUBLISH_REASONS:{INIT:"workspace:initialization",LOAD_DATA_RETRIEVED:"workspace:load:dataRetrieved",LOAD_FINISHED:"workspace:load:finished",WINDOW_REMOVED:"window:remove",WINDOW_ADDED:"window:add",LOAD_STARTED:"workspace:load:start",WORKSPACE_REMOVED:"Workspace:remove",WORKSPACE_RENAMED:"rename",SWITCHTO_TERMINATED:"workspace:switchTo:terminated",NEW_WORKSPACE:"new workspace",SAVE_AS:"APPLICATION LIFECYCLE:WORKSPACE LIFECYCLE:SaveAs:Workspace:Save As"},API_CHANNELS:{NEW_WORKSPACE:"Finsemble.Workspace.NewWorkspace",SAVE:"Finsemble.Workspace.Save",RENAME:"Finsemble.Workspace.Rename",SAVE_AS:"Finsemble.Workspace.SaveAs",SWITCH_TO:"Finsemble.Workspace.SwitchTo",IMPORT:"Finsemble.Workspace.Import",EXPORT:"Finsemble.Workspace.Export",REMOVE:"Finsemble.Workspace.Remove",SAVE_GLOBAL_DATA:"Finsemble.Workspace.SaveGlobalData",SAVE_VIEW_DATA:"Finsemble.Workspace.SaveViewData",GET_GLOBAL_DATA:"Finsemble.Workspace.GetGlobalData",GET_VIEW_DATA:"Finsemble.Workspace.GetViewData",GET_WORKSPACES:"Finsemble.Workspace.GetWorkspaces",GET_WORKSPACE_NAMES:"Finsemble.Workspace.GetWorkspaceNames",SET_WORKSPACE_ORDER:"Finsemble.Workspace.SetWorkspaceOrder",GET_ACTIVE_WORKSPACE:"Finsemble.Workspace.GetActiveWorkspace",GET_ACTIVE_WORKSPACE_DIRTY:"Finsemble.Workspace.GetActiveWorkspaceDirty",GET_TEMPLATES:"Finsemble.Workspace.GetTemplates",IMPORT_TEMPLATE:"Finsemble.Workspace.ImportTemplate",EXPORT_TEMPLATE:"Finsemble.Workspace.ExportTemplate",REMOVE_TEMPLATE:"Finsemble.Workspace.RemoveTemplate",SET_WINDOW_STATE:"Finsemble.Workspace.SetWindowData",GET_WINDOW_STATE:"Finsemble.Workspace.GetWindowData",ADD_WINDOW:"WorkspaceService.addWindow",REMOVE_WINDOW:"WorkspaceService.removeWindow"},DEFAULT_WINDOW_PROPS:["name","componentType","windowType","alwaysOnTop","autoShow","minWidth","minHeight","maxWidth","maxHeight","resizable","maximizable","minimizable","opacity","windowState","left","top","width","height","right","bottom","defaultLeft","defaultTop","defaultWidth","defaultHeight","defaultRight","defaultBottom","monitorInfo","icon","cachedBounds","showTaskbarIcon","isEvergreen","compositeComponentData"],ADDITIONAL_WINDOW_PROPS:{WebWindow:["url","fullscreen","frame","backgroundColor","transparent","waitForPageLoad","affinity","appUUID"],NativeWindow:["path","alias","arguments","argumentsAsQueryString","isWPF"],StackedWindow:["childWindowIdentifiers","visibleWindowIdentifier","bounds"]}},t.WINDOW_SERVICE_REQUESTS={REMOTE_FOCUS:"WindowService.remoteFocus",SET_ALWAYS_ON_TOP:"WindowService-Request-setAlwaysOnTop",IS_ALWAYS_ON_TOP:"WindowService-Request-isAlwaysOnTop"},t.COMPONENT_STATE_STORAGE_TOPIC="finsemble.componentStateStorage",t.HEARTBEAT_TIMEOUT_CHANNEL="Finsemble.WindowService.HeartbeatTimeout",t.LAUNCHER_SERVICE={WINDOW_CLOSED:"LauncherService.WindowClosed"},t.MOVE_REASON={AERO_KEY:"aero_key",SYSTEM_RESTORED:"system_restored"}},function(e,t,n){"use strict";n.r(t),n.d(t,"applyEach",(function(){return se})),n.d(t,"applyEachSeries",(function(){return le})),n.d(t,"apply",(function(){return fe})),n.d(t,"asyncify",(function(){return de})),n.d(t,"auto",(function(){return _e})),n.d(t,"autoInject",(function(){return Xe})),n.d(t,"cargo",(function(){return rt})),n.d(t,"compose",(function(){return at})),n.d(t,"concat",(function(){return ct})),n.d(t,"concatSeries",(function(){return ft})),n.d(t,"constant",(function(){return dt})),n.d(t,"detect",(function(){return yt})),n.d(t,"detectLimit",(function(){return gt})),n.d(t,"detectSeries",(function(){return bt})),n.d(t,"dir",(function(){return _t})),n.d(t,"doDuring",(function(){return wt})),n.d(t,"doUntil",(function(){return Ct})),n.d(t,"doWhilst",(function(){return St})),n.d(t,"during",(function(){return Et})),n.d(t,"each",(function(){return At})),n.d(t,"eachLimit",(function(){return Tt})),n.d(t,"eachOf",(function(){return ne})),n.d(t,"eachOfLimit",(function(){return X})),n.d(t,"eachOfSeries",(function(){return ot})),n.d(t,"eachSeries",(function(){return Ot})),n.d(t,"ensureAsync",(function(){return Rt})),n.d(t,"every",(function(){return Lt})),n.d(t,"everyLimit",(function(){return Dt})),n.d(t,"everySeries",(function(){return Mt})),n.d(t,"filter",(function(){return Ft})),n.d(t,"filterLimit",(function(){return Wt})),n.d(t,"filterSeries",(function(){return Bt})),n.d(t,"forever",(function(){return Ut})),n.d(t,"log",(function(){return $t})),n.d(t,"map",(function(){return ie})),n.d(t,"mapLimit",(function(){return ue})),n.d(t,"mapSeries",(function(){return ce})),n.d(t,"mapValues",(function(){return qt})),n.d(t,"mapValuesLimit",(function(){return Vt})),n.d(t,"mapValuesSeries",(function(){return Ht})),n.d(t,"memoize",(function(){return zt})),n.d(t,"nextTick",(function(){return Qt.a})),n.d(t,"parallel",(function(){return Kt})),n.d(t,"parallelLimit",(function(){return Jt})),n.d(t,"priorityQueue",(function(){return en})),n.d(t,"queue",(function(){return Zt})),n.d(t,"race",(function(){return tn})),n.d(t,"reduce",(function(){return it})),n.d(t,"reduceRight",(function(){return rn})),n.d(t,"reflect",(function(){return on})),n.d(t,"reflectAll",(function(){return un})),n.d(t,"reject",(function(){return an})),n.d(t,"rejectLimit",(function(){return cn})),n.d(t,"rejectSeries",(function(){return ln})),n.d(t,"retry",(function(){return dn})),n.d(t,"retryable",(function(){return pn})),n.d(t,"seq",(function(){return st})),n.d(t,"series",(function(){return hn})),n.d(t,"setImmediate",(function(){return Xt})),n.d(t,"some",(function(){return mn})),n.d(t,"someLimit",(function(){return yn})),n.d(t,"someSeries",(function(){return gn})),n.d(t,"sortBy",(function(){return bn})),n.d(t,"timeout",(function(){return vn})),n.d(t,"times",(function(){return En})),n.d(t,"timesLimit",(function(){return Cn})),n.d(t,"timesSeries",(function(){return In})),n.d(t,"transform",(function(){return An})),n.d(t,"unmemoize",(function(){return Tn})),n.d(t,"until",(function(){return Rn})),n.d(t,"waterfall",(function(){return jn})),n.d(t,"whilst",(function(){return On})),n.d(t,"all",(function(){return Lt})),n.d(t,"allLimit",(function(){return Dt})),n.d(t,"allSeries",(function(){return Mt})),n.d(t,"any",(function(){return mn})),n.d(t,"anyLimit",(function(){return yn})),n.d(t,"anySeries",(function(){return gn})),n.d(t,"find",(function(){return yt})),n.d(t,"findLimit",(function(){return gt})),n.d(t,"findSeries",(function(){return bt})),n.d(t,"forEach",(function(){return At})),n.d(t,"forEachSeries",(function(){return Ot})),n.d(t,"forEachLimit",(function(){return Tt})),n.d(t,"forEachOf",(function(){return ne})),n.d(t,"forEachOfSeries",(function(){return ot})),n.d(t,"forEachOfLimit",(function(){return X})),n.d(t,"inject",(function(){return it})),n.d(t,"foldl",(function(){return it})),n.d(t,"foldr",(function(){return rn})),n.d(t,"select",(function(){return Ft})),n.d(t,"selectLimit",(function(){return Wt})),n.d(t,"selectSeries",(function(){return Bt})),n.d(t,"wrapSync",(function(){return de}));var r=n(2),o=function(e){return Object(r.a)((function(t){var n=t.pop();e.call(this,t,n)}))};function i(e){return Object(r.a)((function(t,n){var r=o((function(n,r){var o=this;return e(t,(function(e,t){e.apply(o,n.concat(t))}),r)}));return n.length?r.apply(this,n):r}))}var s=n(29).a.Symbol,a=Object.prototype,u=a.hasOwnProperty,c=a.toString,l=s?s.toStringTag:void 0;var f=function(e){var t=u.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=c.call(e);return r&&(t?e[l]=n:delete e[l]),o},d=Object.prototype.toString;var p=function(e){return d.call(e)},h=s?s.toStringTag:void 0;var m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?f(e):p(e)};var y=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var g=function(e){if(!y(e))return!1;var t=m(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var b=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var v=function(e){return null!=e&&b(e.length)&&!g(e)},_={};var w=function(){};function S(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}var C="function"==typeof Symbol&&Symbol.iterator;var E=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var I=function(e){return null!=e&&"object"==typeof e};var A=function(e){return I(e)&&"[object Arguments]"==m(e)},T=Object.prototype,O=T.hasOwnProperty,R=T.propertyIsEnumerable,j=A(function(){return arguments}())?A:function(e){return I(e)&&O.call(e,"callee")&&!R.call(e,"callee")},L=Array.isArray,D=n(50),M=/^(?:0|[1-9]\d*)$/;var k=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&M.test(e))&&e>-1&&e%1==0&&e<t},P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object WeakMap]"]=!1;var N=function(e){return I(e)&&b(e.length)&&!!P[m(e)]};var x=function(e){return function(t){return e(t)}},F=n(36),W=F.a&&F.a.isTypedArray,B=W?x(W):N,U=Object.prototype.hasOwnProperty;var $=function(e,t){var n=L(e),r=!n&&j(e),o=!n&&!r&&Object(D.a)(e),i=!n&&!r&&!o&&B(e),s=n||r||o||i,a=s?E(e.length,String):[],u=a.length;for(var c in e)!t&&!U.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||k(c,u))||a.push(c);return a},V=Object.prototype;var q=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||V)};var H=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),G=Object.prototype.hasOwnProperty;var z=function(e){if(!q(e))return H(e);var t=[];for(var n in Object(e))G.call(e,n)&&"constructor"!=n&&t.push(n);return t};var Q=function(e){return v(e)?$(e):z(e)};function Y(e){if(v(e))return function(e){var t=-1,n=e.length;return function(){return++t<n?{value:e[t],key:t}:null}}(e);var t,n,r,o,i=function(e){return C&&e[C]&&e[C]()}(e);return i?function(e){var t=-1;return function(){var n=e.next();return n.done?null:(t++,{value:n.value,key:t})}}(i):(n=Q(t=e),r=-1,o=n.length,function(){var e=n[++r];return r<o?{value:t[e],key:e}:null})}function K(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function J(e){return function(t,n,r){if(r=S(r||w),e<=0||!t)return r(null);var o=Y(t),i=!1,s=0;function a(e,t){if(s-=1,e)i=!0,r(e);else{if(t===_||i&&s<=0)return i=!0,r(null);u()}}function u(){for(;s<e&&!i;){var t=o();if(null===t)return i=!0,void(s<=0&&r(null));s+=1,n(t.value,t.key,K(a))}}u()}}function X(e,t,n,r){J(t)(e,n,r)}function Z(e,t){return function(n,r,o){return e(n,t,r,o)}}function ee(e,t,n){n=S(n||w);var r=0,o=0,i=e.length;function s(e,t){e?n(e):++o!==i&&t!==_||n(null)}for(0===i&&n(null);r<i;r++)t(e[r],r,K(s))}var te=Z(X,1/0),ne=function(e,t,n){(v(e)?ee:te)(e,t,n)};function re(e){return function(t,n,r){return e(ne,t,n,r)}}function oe(e,t,n,r){r=r||w;var o=[],i=0;e(t=t||[],(function(e,t,r){var s=i++;n(e,(function(e,t){o[s]=t,r(e)}))}),(function(e){r(e,o)}))}var ie=re(oe),se=i(ie);function ae(e){return function(t,n,r,o){return e(J(n),t,r,o)}}var ue=ae(oe),ce=Z(ue,1),le=i(ce),fe=Object(r.a)((function(e,t){return Object(r.a)((function(n){return e.apply(null,t.concat(n))}))}));function de(e){return o((function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}y(r)&&"function"==typeof r.then?r.then((function(e){n(null,e)}),(function(e){n(e.message?e:new Error(e))})):n(null,r)}))}var pe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var he=function(e){return function(t,n,r){for(var o=-1,i=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++o];if(!1===n(i[u],u,i))break}return t}}();var me=function(e,t){return e&&he(e,t,Q)};var ye=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1};var ge=function(e){return e!=e};var be=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1};var ve=function(e,t,n){return t==t?be(e,t,n):ye(e,ge,n)},_e=function(e,t,n){"function"==typeof t&&(n=t,t=null),n=S(n||w);var o=Q(e).length;if(!o)return n(null);t||(t=o);var i={},s=0,a=!1,u=Object.create(null),c=[],l=[],f={};function d(e,t){c.push((function(){!function(e,t){if(a)return;var o=K(Object(r.a)((function(t,r){if(s--,r.length<=1&&(r=r[0]),t){var o={};me(i,(function(e,t){o[t]=e})),o[e]=r,a=!0,u=Object.create(null),n(t,o)}else i[e]=r,c=u[e]||[],pe(c,(function(e){e()})),p();var c})));s++;var c=t[t.length-1];t.length>1?c(i,o):c(o)}(e,t)}))}function p(){if(0===c.length&&0===s)return n(null,i);for(;c.length&&s<t;){c.shift()()}}function h(t){var n=[];return me(e,(function(e,r){L(e)&&ve(e,t,0)>=0&&n.push(r)})),n}me(e,(function(t,n){if(!L(t))return d(n,[t]),void l.push(n);var r=t.slice(0,t.length-1),o=r.length;if(0===o)return d(n,t),void l.push(n);f[n]=o,pe(r,(function(i){if(!e[i])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+i+"` in "+r.join(", "));!function(e,t){var n=u[e];n||(n=u[e]=[]);n.push(t)}(i,(function(){0===--o&&d(n,t)}))}))})),function(){var e,t=0;for(;l.length;)e=l.pop(),t++,pe(h(e),(function(e){0==--f[e]&&l.push(e)}));if(t!==o)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};var we=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};var Se=function(e){return"symbol"==typeof e||I(e)&&"[object Symbol]"==m(e)},Ce=s?s.prototype:void 0,Ee=Ce?Ce.toString:void 0;var Ie=function e(t){if("string"==typeof t)return t;if(L(t))return we(t,e)+"";if(Se(t))return Ee?Ee.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};var Ae=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var Te=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Ae(e,t,n)};var Oe=function(e,t){for(var n=e.length;n--&&ve(t,e[n],0)>-1;);return n};var Re=function(e,t){for(var n=-1,r=e.length;++n<r&&ve(t,e[n],0)>-1;);return n};var je=function(e){return e.split("")},Le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var De=function(e){return Le.test(e)},Me="[\\ud800-\\udfff]",ke="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Pe="\\ud83c[\\udffb-\\udfff]",Ne="[^\\ud800-\\udfff]",xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",We="(?:"+ke+"|"+Pe+")"+"?",Be="[\\ufe0e\\ufe0f]?"+We+("(?:\\u200d(?:"+[Ne,xe,Fe].join("|")+")[\\ufe0e\\ufe0f]?"+We+")*"),Ue="(?:"+[Ne+ke+"?",ke,xe,Fe,Me].join("|")+")",$e=RegExp(Pe+"(?="+Pe+")|"+Ue+Be,"g");var Ve=function(e){return e.match($e)||[]};var qe=function(e){return De(e)?Ve(e):je(e)};var He=function(e){return null==e?"":Ie(e)},Ge=/^\s+|\s+$/g;var ze=function(e,t,n){if((e=He(e))&&(n||void 0===t))return e.replace(Ge,"");if(!e||!(t=Ie(t)))return e;var r=qe(e),o=qe(t),i=Re(r,o),s=Oe(r,o)+1;return Te(r,i,s).join("")},Qe=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Ye=/,/,Ke=/(=.+)?(\s*)$/,Je=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function Xe(e,t){var n={};me(e,(function(e,t){var r,o;if(L(e))r=e.slice(0,-1),e=e[e.length-1],n[t]=r.concat(r.length>0?i:e);else if(1===e.length)n[t]=e;else{if(r=o=(o=(o=(o=(o=e).toString().replace(Je,"")).match(Qe)[2].replace(" ",""))?o.split(Ye):[]).map((function(e){return ze(e.replace(Ke,""))})),0===e.length&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");r.pop(),n[t]=r.concat(i)}function i(t,n){var o=we(r,(function(e){return t[e]}));o.push(n),e.apply(null,o)}})),_e(n,t)}var Ze=n(7);function et(){this.head=this.tail=null,this.length=0}function tt(e,t){e.length=1,e.head=e.tail=t}function nt(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function o(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(c.started=!0,L(e)||(e=[e]),0===e.length&&c.idle())return Object(Ze.a)((function(){c.drain()}));for(var r=0,o=e.length;r<o;r++){var i={data:e[r],callback:n||w};t?c._tasks.unshift(i):c._tasks.push(i)}Object(Ze.a)(c.process)}function i(e){return Object(r.a)((function(t){s-=1;for(var n=0,r=e.length;n<r;n++){var o=e[n],i=ve(a,o,0);i>=0&&a.splice(i),o.callback.apply(o,t),null!=t[0]&&c.error(t[0],o.data)}s<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()}))}var s=0,a=[],u=!1,c={_tasks:new et,concurrency:t,payload:n,saturated:w,unsaturated:w,buffer:t/4,empty:w,drain:w,error:w,started:!1,paused:!1,push:function(e,t){o(e,!1,t)},kill:function(){c.drain=w,c._tasks.empty()},unshift:function(e,t){o(e,!0,t)},process:function(){if(!u){for(u=!0;!c.paused&&s<c.concurrency&&c._tasks.length;){var t=[],n=[],r=c._tasks.length;c.payload&&(r=Math.min(r,c.payload));for(var o=0;o<r;o++){var l=c._tasks.shift();t.push(l),n.push(l.data)}0===c._tasks.length&&c.empty(),s+=1,a.push(t[0]),s===c.concurrency&&c.saturated();var f=K(i(t));e(n,f)}u=!1}},length:function(){return c._tasks.length},running:function(){return s},workersList:function(){return a},idle:function(){return c._tasks.length+s===0},pause:function(){c.paused=!0},resume:function(){!1!==c.paused&&(c.paused=!1,Object(Ze.a)(c.process))}};return c}function rt(e,t){return nt(e,1,t)}et.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},et.prototype.empty=et,et.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},et.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},et.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):tt(this,e)},et.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):tt(this,e)},et.prototype.shift=function(){return this.head&&this.removeLink(this.head)},et.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var ot=Z(X,1);function it(e,t,n,r){r=S(r||w),ot(e,(function(e,r,o){n(t,e,(function(e,n){t=n,o(e)}))}),(function(e){r(e,t)}))}var st=Object(r.a)((function(e){return Object(r.a)((function(t){var n=this,o=t[t.length-1];"function"==typeof o?t.pop():o=w,it(e,t,(function(e,t,o){t.apply(n,e.concat(Object(r.a)((function(e,t){o(e,t)}))))}),(function(e,t){o.apply(n,[e].concat(t))}))}))})),at=Object(r.a)((function(e){return st.apply(null,e.reverse())}));function ut(e,t,n,r){var o=[];e(t,(function(e,t,r){n(e,(function(e,t){o=o.concat(t||[]),r(e)}))}),(function(e){r(e,o)}))}var ct=re(ut);var lt,ft=(lt=ut,function(e,t,n){return lt(ot,e,t,n)}),dt=Object(r.a)((function(e){var t=[null].concat(e);return o((function(e,n){return n.apply(this,t)}))})),pt=n(12);function ht(e,t){return function(n,r,o,i){i=i||w;var s,a=!1;n(r,(function(n,r,i){o(n,(function(r,o){r?i(r):e(o)&&!s?(a=!0,s=t(!0,n),i(null,_)):i()}))}),(function(e){e?i(e):i(null,a?s:t(!1))}))}}function mt(e,t){return t}var yt=re(ht(pt.a,mt)),gt=ae(ht(pt.a,mt)),bt=Z(gt,1);function vt(e){return Object(r.a)((function(t,n){t.apply(null,n.concat(Object(r.a)((function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&pe(n,(function(t){console[e](t)})))}))))}))}var _t=vt("dir");function wt(e,t,n){n=K(n||w);var o=Object(r.a)((function(e,r){if(e)return n(e);r.push(i),t.apply(this,r)}));function i(t,r){return t?n(t):r?void e(o):n(null)}i(null,!0)}function St(e,t,n){n=K(n||w);var o=Object(r.a)((function(r,i){return r?n(r):t.apply(this,i)?e(o):void n.apply(null,[null].concat(i))}));e(o)}function Ct(e,t,n){St(e,(function(){return!t.apply(this,arguments)}),n)}function Et(e,t,n){function r(t){if(t)return n(t);e(o)}function o(e,o){return e?n(e):o?void t(r):n(null)}n=K(n||w),e(o)}function It(e){return function(t,n,r){return e(t,r)}}function At(e,t,n){ne(e,It(t),n)}function Tt(e,t,n,r){J(t)(e,It(n),r)}var Ot=Z(Tt,1);function Rt(e){return o((function(t,n){var r=!0;t.push((function(){var e=arguments;r?Object(Ze.a)((function(){n.apply(null,e)})):n.apply(null,e)})),e.apply(this,t),r=!1}))}function jt(e){return!e}var Lt=re(ht(jt,jt)),Dt=ae(ht(jt,jt)),Mt=Z(Dt,1);var kt=function(e){return function(t){return null==t?void 0:t[e]}};function Pt(e,t,n,r){var o=new Array(t.length);e(t,(function(e,t,r){n(e,(function(e,n){o[t]=!!n,r(e)}))}),(function(e){if(e)return r(e);for(var n=[],i=0;i<t.length;i++)o[i]&&n.push(t[i]);r(null,n)}))}function Nt(e,t,n,r){var o=[];e(t,(function(e,t,r){n(e,(function(n,i){n?r(n):(i&&o.push({index:t,value:e}),r())}))}),(function(e){e?r(e):r(null,we(o.sort((function(e,t){return e.index-t.index})),kt("value")))}))}function xt(e,t,n,r){(v(t)?Pt:Nt)(e,t,n,r||w)}var Ft=re(xt),Wt=ae(xt),Bt=Z(Wt,1);function Ut(e,t){var n=K(t||w),r=Rt(e);!function e(t){if(t)return n(t);r(e)}()}var $t=vt("log");function Vt(e,t,n,r){r=S(r||w);var o={};X(e,t,(function(e,t,r){n(e,t,(function(e,n){if(e)return r(e);o[t]=n,r()}))}),(function(e){r(e,o)}))}var qt=Z(Vt,1/0),Ht=Z(Vt,1);function Gt(e,t){return t in e}function zt(e,t){var n=Object.create(null),i=Object.create(null);t=t||pt.a;var s=o((function(o,s){var a=t.apply(null,o);Gt(n,a)?Object(Ze.a)((function(){s.apply(null,n[a])})):Gt(i,a)?i[a].push(s):(i[a]=[s],e.apply(null,o.concat(Object(r.a)((function(e){n[a]=e;var t=i[a];delete i[a];for(var r=0,o=t.length;r<o;r++)t[r].apply(null,e)})))))}));return s.memo=n,s.unmemoized=e,s}var Qt=n(35);function Yt(e,t,n){n=n||w;var o=v(t)?[]:{};e(t,(function(e,t,n){e(Object(r.a)((function(e,r){r.length<=1&&(r=r[0]),o[t]=r,n(e)})))}),(function(e){n(e,o)}))}function Kt(e,t){Yt(ne,e,t)}function Jt(e,t,n){Yt(J(t),e,n)}var Xt=Ze.a,Zt=function(e,t){return nt((function(t,n){e(t[0],n)}),t,1)},en=function(e,t){var n=Zt(e,t);return n.push=function(e,t,r){if(null==r&&(r=w),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,L(e)||(e=[e]),0===e.length)return Xt((function(){n.drain()}));t=t||0;for(var o=n._tasks.head;o&&t>=o.priority;)o=o.next;for(var i=0,s=e.length;i<s;i++){var a={data:e[i],priority:t,callback:r};o?n._tasks.insertBefore(o,a):n._tasks.push(a)}Xt(n.process)},delete n.unshift,n};function tn(e,t){if(t=S(t||w),!L(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var n=0,r=e.length;n<r;n++)e[n](t)}var nn=Array.prototype.slice;function rn(e,t,n,r){it(nn.call(e).reverse(),t,n,r)}function on(e){return o((function(t,n){return t.push(Object(r.a)((function(e,t){if(e)n(null,{error:e});else{var r=null;1===t.length?r=t[0]:t.length>1&&(r=t),n(null,{value:r})}}))),e.apply(this,t)}))}function sn(e,t,n,r){xt(e,t,(function(e,t){n(e,(function(e,n){t(e,!n)}))}),r)}var an=re(sn);function un(e){var t;return L(e)?t=we(e,on):(t={},me(e,(function(e,n){t[n]=on.call(this,e)}))),t}var cn=ae(sn),ln=Z(cn,1);var fn=function(e){return function(){return e}};function dn(e,t,n){var r=5,o=0,i={times:r,intervalFunc:fn(o)};function s(e,t){if("object"==typeof t)e.times=+t.times||r,e.intervalFunc="function"==typeof t.interval?t.interval:fn(+t.interval||o),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||r}}if(arguments.length<3&&"function"==typeof e?(n=t||w,t=e):(s(i,e),n=n||w),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var a=1;function u(){t((function(e){e&&a++<i.times&&("function"!=typeof i.errorFilter||i.errorFilter(e))?setTimeout(u,i.intervalFunc(a)):n.apply(null,arguments)}))}u()}var pn=function(e,t){return t||(t=e,e=null),o((function(n,r){function o(e){t.apply(null,n.concat(e))}e?dn(e,o,r):dn(o,r)}))};function hn(e,t){Yt(ot,e,t)}var mn=re(ht(Boolean,pt.a)),yn=ae(ht(Boolean,pt.a)),gn=Z(yn,1);function bn(e,t,n){function r(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}ie(e,(function(e,n){t(e,(function(t,r){if(t)return n(t);n(null,{value:e,criteria:r})}))}),(function(e,t){if(e)return n(e);n(null,we(t.sort(r),kt("value")))}))}function vn(e,t,n){var r,i,s=!1;function a(){s||(r.apply(null,arguments),clearTimeout(i))}function u(){var t=e.name||"anonymous",o=new Error('Callback function "'+t+'" timed out.');o.code="ETIMEDOUT",n&&(o.info=n),s=!0,r(o)}return o((function(n,o){r=o,i=setTimeout(u,t),e.apply(null,n.concat(a))}))}var _n=Math.ceil,wn=Math.max;var Sn=function(e,t,n,r){for(var o=-1,i=wn(_n((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=e,e+=n;return s};function Cn(e,t,n,r){ue(Sn(0,e,1),t,n,r)}var En=Z(Cn,1/0),In=Z(Cn,1);function An(e,t,n,r){3===arguments.length&&(r=n,n=t,t=L(e)?[]:{}),r=S(r||w),ne(e,(function(e,r,o){n(t,e,r,o)}),(function(e){r(e,t)}))}function Tn(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function On(e,t,n){if(n=K(n||w),!e())return n(null);var o=Object(r.a)((function(r,i){return r?n(r):e()?t(o):void n.apply(null,[null].concat(i))}));t(o)}function Rn(e,t,n){On((function(){return!e.apply(this,arguments)}),t,n)}var jn=function(e,t){if(t=S(t||w),!L(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;!function o(i){if(n===e.length)return t.apply(null,[null].concat(i));var s=K(Object(r.a)((function(e,n){if(e)return t.apply(null,[e].concat(n));o(n)})));i.push(s),e[n++].apply(null,i)}([])};t.default={applyEach:se,applyEachSeries:le,apply:fe,asyncify:de,auto:_e,autoInject:Xe,cargo:rt,compose:at,concat:ct,concatSeries:ft,constant:dt,detect:yt,detectLimit:gt,detectSeries:bt,dir:_t,doDuring:wt,doUntil:Ct,doWhilst:St,during:Et,each:At,eachLimit:Tt,eachOf:ne,eachOfLimit:X,eachOfSeries:ot,eachSeries:Ot,ensureAsync:Rt,every:Lt,everyLimit:Dt,everySeries:Mt,filter:Ft,filterLimit:Wt,filterSeries:Bt,forever:Ut,log:$t,map:ie,mapLimit:ue,mapSeries:ce,mapValues:qt,mapValuesLimit:Vt,mapValuesSeries:Ht,memoize:zt,nextTick:Qt.a,parallel:Kt,parallelLimit:Jt,priorityQueue:en,queue:Zt,race:tn,reduce:it,reduceRight:rn,reflect:on,reflectAll:un,reject:an,rejectLimit:cn,rejectSeries:ln,retry:dn,retryable:pn,seq:st,series:hn,setImmediate:Xt,some:mn,someLimit:yn,someSeries:gn,sortBy:bn,timeout:vn,times:En,timesLimit:Cn,timesSeries:In,transform:An,unmemoize:Tn,until:Rn,waterfall:jn,whilst:On,all:Lt,any:mn,forEach:At,forEachSeries:Ot,forEachLimit:Tt,forEachOf:ne,forEachOfSeries:ot,forEachOfLimit:X,inject:it,foldl:it,foldr:rn,select:Ft,selectLimit:Wt,selectSeries:Bt,wrapSync:de}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,c=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},,function(e,t,n){"use strict";var r=n(30),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.a||o||Function("return this")();t.a=i},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(8))},function(e,t,n){"use strict";var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function o(){void 0!==i&&e.removeListener("error",i),n([].slice.call(arguments))}var i;"error"!==t&&(i=function(n){e.removeListener(t,o),r(n)},e.once("error",i)),e.once(t,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,n,r){var o,i,s,a;if(c(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,a=u,console&&console.warn&&console.warn(a)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=d.bind(r);return o.listener=n,r.wrapFn=o,o}function h(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(o):y(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var c=u.length,l=y(u,c);for(n=0;n<c;++n)i(l[n],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,o,i,s;if(c(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkDeprecatedConfigs=t.isEqualIgnoringArrayOrder=t.sleep=t.checkIfBoundsAreEqual=t.removeKeys=t.toRecord=t.isStackedWindow=t.wrapWithTimeout=t.timeoutPromise=t.getRandomWindowName=t.getUniqueName=t.getProp=t.composeRL=t.instrumentPromise=t.promisify=t.identity=t.isNumber=t.chunkArray=t.Timeout=t.mockLogger=t.capitalizeFirst=t.clone=t.isServiceInWindow=t.iAmAServiceWindow=t.guuid=void 0;const o=n(45),i=r(n(46)),s=r(n(72)),a=r(n(44)),u=r(n(73)),c=n(18),l=r(n(4)),f=window;function d(e,t){if(Array.isArray(e))return e.slice();try{return JSON.parse(JSON.stringify(e))}catch(e){return t("clone error",e),e}}t.guuid=function(){return o.v1()},t.iAmAServiceWindow=function(){return!(!f.finsembleServices||!f.finsembleServices.length)},t.isServiceInWindow=function(e){return f.finsembleServices&&f.finsembleServices.find(t=>t.name===e)},t.clone=d,t.capitalizeFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};t.mockLogger=new class{constructor({debug:e}={debug:!0}){e?(this.system=console,this.system.debug=console.log):this.system={warn:Function.prototype,debug:Function.prototype,log:Function.prototype,info:Function.prototype,error:console.error}}isLogMessage(){return!0}start(){}};function p(e="RouterClient"){return`${e}-${Math.floor(100*Math.random())}-${Math.floor(1e4*Math.random())}`}function h(e,t){return new Promise((n,r)=>{const o=setTimeout(()=>{clearTimeout(o),r(t)},e)})}function m(e,t,n){return`${e}.${t}.${n}`}function y(e,t,n){const r=""+m(e.baseString,e.newPath,e.newValue);l.default.system.warn(`${m(e.baseString,t,n)} has been deprecated in favor of ${r}`)}t.Timeout=class{constructor(e,t){this.fired=!1,this.id=setTimeout(()=>{e(),this.fired=!0},t),this.clear=this.clear.bind(this),this.didFire=this.didFire.bind(this)}clear(){this.fired||clearTimeout(this.id)}didFire(){return this.fired}},t.chunkArray=function(e,t){if(e<=0)throw new Error("Can't chunk array by number less than 0");return t.reduce((n,r,o)=>{if(o%e==0){const r=[];for(let n=o;n<o+e;n++)n<t.length&&r.push(t[n]);n.push(r)}return n},[])},t.isNumber=function(e){return!(!e||Number.isNaN(Number(e)))&&Number(e)},t.identity=function(e){return e},t.promisify=function(e,t){return function(){const n=Array.prototype.slice.call(arguments);return new Promise((r,o)=>{n.push((e,t)=>e?o(e):r(t)),e.apply(t,n)})}},t.instrumentPromise=async(e,t,n)=>{const r=t+" end";return e(t+" start"),n.then(()=>e(r))},t.composeRL=(...e)=>e.reduce((e,t)=>(...n)=>e(t(...n))),t.getProp=function e(t,n,r){const o=Array.isArray(n)?n:n.split(".").filter(e=>e.length);return o.length?e(t[o.shift()],o,r):void 0===t?r:t},t.getUniqueName=p,t.getRandomWindowName=function(e,t){return`${p(e)}-${t}`},t.timeoutPromise=h,t.wrapWithTimeout=function(e,t,n){return Promise.race([e,h(t,n)])},t.isStackedWindow=function(e){return e&&"StackedWindow"===(i.default(e,"windowIdentifier.windowType")||e.windowType)},t.toRecord=function(e,t){const n="string"==typeof e?t=>t[e]:e;return t.reduce((e,t)=>(e[n(t)]=t,e),{})},t.removeKeys=function(e,t){if(!e)return e;const n=Object.keys(e).filter(e=>!t.includes(e));return s.default(e,n)},t.checkIfBoundsAreEqual=function(e,t){if(!e||!t)return!1;const n=["left","right","top","bottom","width","height"],r=s.default(e,n),o=s.default(t,n);return!!a.default(r,o)},t.sleep=function(e,t=!1){return new Promise((n,r)=>{t?setTimeout(()=>{try{r("timeout expired")}catch(e){}},e):setTimeout(n,e)})},t.isEqualIgnoringArrayOrder=function(e,t){const n=d(e,Function.prototype),r=d(t,Function.prototype);return u.default(n,r,(e,t)=>{if(Array.isArray(e)&&Array.isArray(t))return u.default(e.sort(),t.sort())})},t.checkDeprecatedConfigs=function(e,t,n){const{baseString:r,oldPath:o,newPath:i,oldValue:s,newValue:a}=t;let u=c.ConfigUtilInstance.getDefault(e,m(r,i,a),null);return null===u&&(u=c.ConfigUtilInstance.getDefault(e,m(r,i,s),null),u?y(t,i,s):(u=c.ConfigUtilInstance.getDefault(e,m(r,o,a),null),u?y(t,o,a):(u=c.ConfigUtilInstance.getDefault(e,m(r,o,s),null),u?y(t,o,s):u=n))),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CHECKPOINT_CHANNEL_BASE=t.STAGE_CHANNEL=t.STATUS_CHANNEL_BASE=t.SHOW_SYSLOG_CHANNEL=t.SYSLOG_CHANNEL=t.CRITICAL_BOOT_STAGES=t.ALL_BOOT_STAGES=void 0,t.ALL_BOOT_STAGES=["microkernel","kernel","authentication","preuser","earlyuser","user"],t.CRITICAL_BOOT_STAGES=["microkernel","kernel","authentication"],t.SYSLOG_CHANNEL="systemManager.systemlog",t.SHOW_SYSLOG_CHANNEL="systemManager.showSystemlog",t.STATUS_CHANNEL_BASE="systemManager.boot.status",t.STAGE_CHANNEL="systemManager.boot.stage",t.CHECKPOINT_CHANNEL_BASE="systemManager.checkpoint"},function(e,t,n){"use strict";(function(e,r){var o,i=n(7);o=i.c?e.nextTick:i.d?r:i.b,t.a=Object(i.e)(o)}).call(this,n(27),n(39).setImmediate)},function(e,t,n){"use strict";(function(e){var r=n(30),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o&&r.a.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.a=a}).call(this,n(48)(e))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkpointChannel=t.statusChannel=t.killOldApplications=void 0;const r=n(6),o=n(34);t.killOldApplications=function(e){return new Promise(async t=>{r.System.getAllApplications(async n=>{if(n)for(let t=0;t<n.length;t++){const o=n[t];if(o.uuid.endsWith("-"+e)){const e=r.System.Application.wrap(o.uuid);await r.System.closeApplication(e)}}console.log("killOldApplications: finished closing old apps"),t()})})},t.statusChannel=function(e){return`${o.STATUS_CHANNEL_BASE}.${e}`},t.checkpointChannel=function(e,t){return`${o.CHECKPOINT_CHANNEL_BASE}.${e}.${t}`}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(75),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t,n){"use strict";
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */Object.defineProperty(t,"__esModule",{value:!0}),t.LocalLogger=void 0;const{debug:r,warn:o,log:i,error:s}=console,a=()=>{},u=a,c={warn:o,info:a,log:i,debug:r,error:s,verbose:u},l={Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0,Verbose:!0,LocalOnly:!1},f={console:{Error:!0,Warn:!0,Info:!0,Log:!0,Debug:!0},dev:l,system:l,perf:l};function d(e){return"logger.service.logMessages"===e}t.LocalLogger=class{constructor(){this.start=()=>{},this.isLogMessage=d,this.setting=()=>f,this.callStack=()=>function(){const{stack:e}=function(){try{throw Error("")}catch(e){return e}}(),t=(n="\n",r=4,e.split(n,r).join(n).length);var n,r;return"Log Stack: \n"+e.substring(t).substr(1)}(),this.unregisterClient=()=>{},this.setRouterClient=()=>{},this.warn=o,this.info=a,this.log=i,this.debug=r,this.error=s,this.verbose=u,this.system=c,this.perf=c}}},function(e,t,n){var r=n(42),o=n(43),i=r(),s=[1|i[0],i[1],i[2],i[3],i[4],i[5]],a=16383&(i[6]<<8|i[7]),u=0,c=0;e.exports=function(e,t,n){var r=t&&n||0,i=t||[],l=void 0!==(e=e||{}).clockseq?e.clockseq:a,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:c+1,p=f-u+(d-c)/1e4;if(p<0&&void 0===e.clockseq&&(l=l+1&16383),(p<0||f>u)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=d,a=l;var h=(1e4*(268435455&(f+=122192928e5))+d)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var m=f/4294967296*1e4&268435455;i[r++]=m>>>8&255,i[r++]=255&m,i[r++]=m>>>24&15|16,i[r++]=m>>>16&255,i[r++]=l>>>8|128,i[r++]=255&l;for(var y=e.node||s,g=0;g<6;++g)i[r+g]=y[g];return t||o(i)}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}e.exports=n}).call(this,n(8))},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,o=n;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+"-"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}},function(e,t,n){(function(e,n){var r="[object Arguments]",o="[object Map]",i="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[o]=c["[object Number]"]=c[i]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=t&&!t.nodeType&&t,h=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===p,y=m&&l.process,g=function(){try{return y&&y.binding&&y.binding("util")}catch(e){}}(),b=g&&g.isTypedArray;function v(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S,C,E,I=Array.prototype,A=Function.prototype,T=Object.prototype,O=d["__core-js_shared__"],R=A.toString,j=T.hasOwnProperty,L=(S=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",D=T.toString,M=RegExp("^"+R.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=m?d.Buffer:void 0,P=d.Symbol,N=d.Uint8Array,x=T.propertyIsEnumerable,F=I.splice,W=P?P.toStringTag:void 0,B=Object.getOwnPropertySymbols,U=k?k.isBuffer:void 0,$=(C=Object.keys,E=Object,function(e){return C(E(e))}),V=ge(d,"DataView"),q=ge(d,"Map"),H=ge(d,"Promise"),G=ge(d,"Set"),z=ge(d,"WeakMap"),Q=ge(Object,"create"),Y=we(V),K=we(q),J=we(H),X=we(G),Z=we(z),ee=P?P.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new oe;++t<n;)this.add(e[t])}function se(e){var t=this.__data__=new re(e);this.size=t.size}function ae(e,t){var n=Ee(e),r=!n&&Ce(e),o=!n&&!r&&Ie(e),i=!n&&!r&&!o&&je(e),s=n||r||o||i,a=s?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=a.length;for(var c in e)!t&&!j.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||_e(c,u))||a.push(c);return a}function ue(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var t=j.call(e,W),n=e[W];try{e[W]=void 0;var r=!0}catch(e){}var o=D.call(e);r&&(t?e[W]=n:delete e[W]);return o}(e):function(e){return D.call(e)}(e)}function le(e){return Re(e)&&ce(e)==r}function fe(e,t,n,a,u){return e===t||(null==e||null==t||!Re(e)&&!Re(t)?e!=e&&t!=t:function(e,t,n,a,u,c){var l=Ee(e),f=Ee(t),d=l?"[object Array]":ve(e),p=f?"[object Array]":ve(t),h=(d=d==r?i:d)==i,m=(p=p==r?i:p)==i,y=d==p;if(y&&Ie(e)){if(!Ie(t))return!1;l=!0,h=!1}if(y&&!h)return c||(c=new se),l||je(e)?he(e,t,n,a,u,c):function(e,t,n,r,i,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new N(e),new N(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Se(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var c=_;case s:var l=1&r;if(c||(c=w),e.size!=t.size&&!l)return!1;var f=u.get(e);if(f)return f==t;r|=2,u.set(e,t);var d=he(c(e),c(t),r,i,a,u);return u.delete(e),d;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,d,n,a,u,c);if(!(1&n)){var g=h&&j.call(e,"__wrapped__"),b=m&&j.call(t,"__wrapped__");if(g||b){var v=g?e.value():e,S=b?t.value():t;return c||(c=new se),u(v,S,n,a,c)}}if(!y)return!1;return c||(c=new se),function(e,t,n,r,o,i){var s=1&n,a=me(e),u=a.length,c=me(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var f=a[l];if(!(s?f in t:j.call(t,f)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);var h=s;for(;++l<u;){f=a[l];var m=e[f],y=t[f];if(r)var g=s?r(y,m,f,t,e,i):r(m,y,f,e,t,i);if(!(void 0===g?m===y||o(m,y,n,r,i):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,a,u,c)}(e,t,n,a,fe,u))}function de(e){return!(!Oe(e)||function(e){return!!L&&L in e}(e))&&(Ae(e)?M:a).test(we(e))}function pe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||T,t!==r)return $(e);var t,n,r,o=[];for(var i in Object(e))j.call(e,i)&&"constructor"!=i&&o.push(i);return o}function he(e,t,n,r,o,i){var s=1&n,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,d=2&n?new ie:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],h=t[l];if(r)var m=s?r(h,p,l,t,e,i):r(p,h,l,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!v(t,(function(e,t){if(s=t,!d.has(s)&&(p===e||o(p,e,n,r,i)))return d.push(t);var s}))){f=!1;break}}else if(p!==h&&!o(p,h,n,r,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function me(e){return function(e,t,n){var r=t(e);return Ee(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Le,be)}function ye(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ge(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}ne.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(Q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return j.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:j.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=ue(t,e);return!(n<0)&&(n==t.length-1?t.pop():F.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=ue(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return ue(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=ue(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(q||re),string:new ne}},oe.prototype.delete=function(e){var t=ye(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return ye(this,e).get(e)},oe.prototype.has=function(e){return ye(this,e).has(e)},oe.prototype.set=function(e,t){var n=ye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ie.prototype.has=function(e){return this.__data__.has(e)},se.prototype.clear=function(){this.__data__=new re,this.size=0},se.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new oe(r)}return n.set(e,t),this.size=n.size,this};var be=B?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}(B(e),(function(t){return x.call(e,t)})))}:function(){return[]},ve=ce;function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function we(e){if(null!=e){try{return R.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Se(e,t){return e===t||e!=e&&t!=t}(V&&"[object DataView]"!=ve(new V(new ArrayBuffer(1)))||q&&ve(new q)!=o||H&&"[object Promise]"!=ve(H.resolve())||G&&ve(new G)!=s||z&&"[object WeakMap]"!=ve(new z))&&(ve=function(e){var t=ce(e),n=t==i?e.constructor:void 0,r=n?we(n):"";if(r)switch(r){case Y:return"[object DataView]";case K:return o;case J:return"[object Promise]";case X:return s;case Z:return"[object WeakMap]"}return t});var Ce=le(function(){return arguments}())?le:function(e){return Re(e)&&j.call(e,"callee")&&!x.call(e,"callee")},Ee=Array.isArray;var Ie=U||function(){return!1};function Ae(e){if(!Oe(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Oe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Re(e){return null!=e&&"object"==typeof e}var je=b?function(e){return function(t){return e(t)}}(b):function(e){return Re(e)&&Te(e.length)&&!!c[ce(e)]};function Le(e){return null!=(t=e)&&Te(t.length)&&!Ae(t)?ae(e):pe(e);var t}n.exports=function(e,t){return fe(e,t)}}).call(this,n(8),n(32)(e))},function(e,t,n){var r=n(41),o=n(71),i=o;i.v1=r,i.v4=o,e.exports=i},function(e,t,n){(function(t){var n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/,o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,a=/^\[object .+?Constructor\]$/,u="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=u||c||Function("return this")();var f,d=Array.prototype,p=Function.prototype,h=Object.prototype,m=l["__core-js_shared__"],y=(f=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"",g=p.toString,b=h.hasOwnProperty,v=h.toString,_=RegExp("^"+g.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w=l.Symbol,S=d.splice,C=k(l,"Map"),E=k(Object,"create"),I=w?w.prototype:void 0,A=I?I.toString:void 0;function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function R(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e,t){for(var n,r,o=e.length;o--;)if((n=e[o][0])===(r=t)||n!=n&&r!=r)return o;return-1}function L(e,t){for(var o,i=0,s=(t=function(e,t){if(F(e))return!1;var o=typeof e;if("number"==o||"symbol"==o||"boolean"==o||null==e||B(e))return!0;return r.test(e)||!n.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:F(o=t)?o:P(o)).length;null!=e&&i<s;)e=e[N(t[i++])];return i&&i==s?e:void 0}function D(e){return!(!W(e)||(t=e,y&&y in t))&&(function(e){var t=W(e)?v.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:a).test(function(e){if(null!=e){try{return g.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function M(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function k(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return D(n)?n:void 0}T.prototype.clear=function(){this.__data__=E?E(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return b.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:b.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?"__lodash_hash_undefined__":t,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():S.call(t,n,1),!0)},O.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},O.prototype.has=function(e){return j(this.__data__,e)>-1},O.prototype.set=function(e,t){var n=this.__data__,r=j(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},R.prototype.clear=function(){this.__data__={hash:new T,map:new(C||O),string:new T}},R.prototype.delete=function(e){return M(this,e).delete(e)},R.prototype.get=function(e){return M(this,e).get(e)},R.prototype.has=function(e){return M(this,e).has(e)},R.prototype.set=function(e,t){return M(this,e).set(e,t),this};var P=x((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(B(e))return A?A.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return o.test(e)&&n.push(""),e.replace(i,(function(e,t,r,o){n.push(r?o.replace(s,"$1"):t||e)})),n}));function N(e){if("string"==typeof e||B(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function x(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s),s};return n.cache=new(x.Cache||R),n}x.Cache=R;var F=Array.isArray;function W(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function B(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==v.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:L(e,t);return void 0===r?n:r}}).call(this,n(8))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BootReadyItem=t.BootConfigElement=t.ALL_BOOT_STAGES=void 0,t.ALL_BOOT_STAGES=["microkernel","kernel","authentication","preuser","earlyuser","user"];t.BootConfigElement=class{};t.BootReadyItem=class{constructor(e,t,n){this.name=e,this.type=t,this.config=n}}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},,function(e,t,n){"use strict";(function(e){var r=n(29),o=n(51),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=s&&s.exports===i?r.a.Buffer:void 0,u=(a?a.isBuffer:void 0)||o.a;t.a=u}).call(this,n(48)(e))},function(e,t,n){"use strict";t.a=function(){return!1}},function(e,t,n){(function(e,n){var r="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="[object Map]",a="[object Set]",u=/\w*$/,c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,f={};f[r]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object DataView]"]=f["[object Boolean]"]=f["[object Date]"]=f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f[s]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f[a]=f["[object String]"]=f["[object Symbol]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Error]"]=f[o]=f["[object WeakMap]"]=!1;var d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,h=d||p||Function("return this")(),m=t&&!t.nodeType&&t,y=m&&"object"==typeof n&&n&&!n.nodeType&&n,g=y&&y.exports===m;function b(e,t){return e.set(t[0],t[1]),e}function v(e,t){return e.add(t),e}function _(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function w(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function C(e,t){return function(n){return e(t(n))}}function E(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var I,A=Array.prototype,T=Function.prototype,O=Object.prototype,R=h["__core-js_shared__"],j=(I=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",L=T.toString,D=O.hasOwnProperty,M=O.toString,k=RegExp("^"+L.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=g?h.Buffer:void 0,N=h.Symbol,x=h.Uint8Array,F=C(Object.getPrototypeOf,Object),W=Object.create,B=O.propertyIsEnumerable,U=A.splice,$=Object.getOwnPropertySymbols,V=P?P.isBuffer:void 0,q=C(Object.keys,Object),H=ye(h,"DataView"),G=ye(h,"Map"),z=ye(h,"Promise"),Q=ye(h,"Set"),Y=ye(h,"WeakMap"),K=ye(Object,"create"),J=we(H),X=we(G),Z=we(z),ee=we(Q),te=we(Y),ne=N?N.prototype:void 0,re=ne?ne.valueOf:void 0;function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){this.__data__=new ie(e)}function ue(e,t){var n=Ce(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ee(e)}(e)&&D.call(e,"callee")&&(!B.call(e,"callee")||M.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,i=!!o;for(var s in e)!t&&!D.call(e,s)||i&&("length"==s||ve(s,o))||n.push(s);return n}function ce(e,t,n){var r=e[t];D.call(e,t)&&Se(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function le(e,t){for(var n=e.length;n--;)if(Se(e[n][0],t))return n;return-1}function fe(e,t,n,c,l,d,p){var h;if(c&&(h=d?c(e,l,d,p):c(e)),void 0!==h)return h;if(!Te(e))return e;var m=Ce(e);if(m){if(h=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&D.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!t)return function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(e,h)}else{var y=be(e),g=y==o||y==i;if(Ie(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==y||y==r||g&&!d){if(w(e))return d?e:{};if(h=function(e){return"function"!=typeof e.constructor||_e(e)?{}:(t=F(e),Te(t)?W(t):{});var t}(g?{}:e),!t)return function(e,t){return he(e,ge(e),t)}(e,function(e,t){return e&&he(t,Oe(t),e)}(h,e))}else{if(!f[y])return d?e:{};h=function(e,t,n,r){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case s:return function(e,t,n){return _(t?n(S(e),!0):S(e),b,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,u.exec(e));return t.lastIndex=e.lastIndex,t}(e);case a:return function(e,t,n){return _(t?n(E(e),!0):E(e),v,new e.constructor)}(e,r,n);case"[object Symbol]":return i=e,re?Object(re.call(i)):{}}var i}(e,y,fe,t)}}p||(p=new ae);var C=p.get(e);if(C)return C;if(p.set(e,h),!m)var I=n?function(e){return function(e,t,n){var r=t(e);return Ce(e)?r:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(r,n(e))}(e,Oe,ge)}(e):Oe(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(I||e,(function(r,o){I&&(r=e[o=r]),ce(h,o,fe(r,t,n,c,o,e,p))})),h}function de(e){return!(!Te(e)||(t=e,j&&j in t))&&(Ae(e)||w(e)?k:c).test(we(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new x(t).set(new x(e)),t}function he(e,t,n,r){n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],a=r?r(n[s],e[s],s,n,e):void 0;ce(n,s,void 0===a?e[s]:a)}return n}function me(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ye(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return de(n)?n:void 0}oe.prototype.clear=function(){this.__data__=K?K(null):{}},oe.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},oe.prototype.get=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D.call(t,e)?t[e]:void 0},oe.prototype.has=function(e){var t=this.__data__;return K?void 0!==t[e]:D.call(t,e)},oe.prototype.set=function(e,t){return this.__data__[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this},ie.prototype.clear=function(){this.__data__=[]},ie.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():U.call(t,n,1),!0)},ie.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},ie.prototype.has=function(e){return le(this.__data__,e)>-1},ie.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},se.prototype.clear=function(){this.__data__={hash:new oe,map:new(G||ie),string:new oe}},se.prototype.delete=function(e){return me(this,e).delete(e)},se.prototype.get=function(e){return me(this,e).get(e)},se.prototype.has=function(e){return me(this,e).has(e)},se.prototype.set=function(e,t){return me(this,e).set(e,t),this},ae.prototype.clear=function(){this.__data__=new ie},ae.prototype.delete=function(e){return this.__data__.delete(e)},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof ie){var r=n.__data__;if(!G||r.length<199)return r.push([e,t]),this;n=this.__data__=new se(r)}return n.set(e,t),this};var ge=$?C($,Object):function(){return[]},be=function(e){return M.call(e)};function ve(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function _e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||O)}function we(e){if(null!=e){try{return L.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Se(e,t){return e===t||e!=e&&t!=t}(H&&"[object DataView]"!=be(new H(new ArrayBuffer(1)))||G&&be(new G)!=s||z&&"[object Promise]"!=be(z.resolve())||Q&&be(new Q)!=a||Y&&"[object WeakMap]"!=be(new Y))&&(be=function(e){var t=M.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?we(n):void 0;if(r)switch(r){case J:return"[object DataView]";case X:return s;case Z:return"[object Promise]";case ee:return a;case te:return"[object WeakMap]"}return t});var Ce=Array.isArray;function Ee(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Ae(e)}var Ie=V||function(){return!1};function Ae(e){var t=Te(e)?M.call(e):"";return t==o||t==i}function Te(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Oe(e){return Ee(e)?ue(e):function(e){if(!_e(e))return q(e);var t=[];for(var n in Object(e))D.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return fe(e,!1,!0)}}).call(this,n(8),n(32)(e))},function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4)),i=n(18),s=n(6),a=r(n(20));
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
let u=null;var c=new function(){const e={},t={};let r=null;this.getDefaultTemplateURL=function(e){r?setTimeout(()=>{e(r)},0):(u||(u=n(21).default),u.get({field:"finsemble"},(t,n)=>{r=i.ConfigUtilInstance.getDefault(n,"finsemble.notificationURL",n.moduleRoot+"/components/system/notification/notification.html"),e(r)}))},this.alert=function(e,t,n,r,o){const i=this;o&&o.url?this.alertInternal(e,t,n,r,o,o.url):this.getDefaultTemplateURL(s=>{i.alertInternal(e,t,n,r,o,s)})},this.alertInternal=function(n,r,i,u,c,l){let f=!1;const d="UserNotification.alert."+i,p=(c=c||{}).duration||864e5;switch(r){case"ONCE-SINCE-STARTUP":d in e?f=!1:(f=!0,e[d]=!0);break;case"MAX-COUNT":{let e=0;const n=c.maxCount||1;d in t&&(e=t[d]),t[d]=++e,e<=n&&(f=!0);break}default:f=!0}if(o.default.log("UserNotification.alert",n,f,r,i,u,c),f){const e={url:l,message:u,timeout:p};a.default.systemLog({notification:!0},"Notification: "+u),new s.System.Notification(e)}}};t.default=c,e.exports=t.default},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(10)),i=r(n(4)),s=r(n(76));t.default=class{constructor(e){this.eventList=[],this.eventHandlerMap={},this.eventGuidMap={},this.name=e.name,this.sourceType=e.sourceType,window.addEventListener("beforeunload",()=>{this.cleanup()})}addListener(e,t){return this.addEventListener(e,t)}removeListener(e,t){return this.removeEventListener(e,t)}addEventListener(e,t){if(!t)return console.error("no handler",e);if(i.default.system.debug("addEventListener:",e),this.eventHandlerMap[e]||(this.eventHandlerMap[e]=[],this.eventGuidMap[e]=[]),!this.eventHandlerMap[e].includes(t)){const n=`${window.name}_public_${Date.now()}_${Math.random()}`;this.eventHandlerMap[e].push(t),this.eventGuidMap[e].push(n),o.default.transmit("Finsemble.RegisterInterruptibleEvent."+this.name,{event:e,listenerGuid:n}),o.default.addResponder("Finsemble.Interrupt."+n,(r,o)=>{new s.default({source:this.name,sourceType:this.sourceType,listenerGuid:n,handler:t,event:e},o)})}}removeEventListener(e,t){if(i.default.system.debug("removeEventListener:",e),!this.eventHandlerMap[e])return i.default.system.warn("not found");let n=this.eventHandlerMap[e].indexOf(t);if(-1!==n){const t=this.eventGuidMap[e][n];this.eventHandlerMap[e].splice(n,1),this.eventGuidMap[e].splice(n,1),o.default.transmit("Finsemble.UnregisterInterruptibleEvent."+window.name,{event:e,guid:t}),o.default.removeResponder("Finsemble.Interrupt."+t)}}cleanup(){for(var e of Object.keys(this.eventHandlerMap))for(var t of this.eventHandlerMap[e])this.removeEventListener(e,t)}}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FSBLDependencyManagerSingleton=t.FSBLDependencyManager=void 0;const o=n(31),i=r(n(10)),s=n(25),a=r(n(20)),u=r(n(4));class c extends o.EventEmitter{constructor(e){super(),this.callback=e.callback,this.dependencies=e.dependencies,this.startupTimer=null,this.setStartupTimer=this.setStartupTimer.bind(this),this.clearStartupTimer=this.clearStartupTimer.bind(this),this.setStartupTimer()}clearStartupTimer(){clearTimeout(this.startupTimer),delete this.startupTimer}setStartupTimer(){const e=this;this.startupTimer=+setTimeout(()=>{e.emit("timeout")},1e4)}}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}class f{constructor(){this.servicesAreAllOnline={},this.clientsAreAllOnline={},this.onlineClients=[],this.dependencies={},this.startupTimers={},this.startupTimerFired=!1,this.bindCorrectContext()}waitFor(e,t){const n=l();e.clients||(e.clients=[]),e.clients.length&&(e.clients=e.clients.map(e=>e.charAt(0).toLowerCase()+e.slice(1)));const r=new c({dependencies:e,callback:t});return r.on("timeout",()=>{this.onDependencyTimeout(r)}),this.dependencies[n]=r,this.checkDependencies(),r}onDependencyTimeout(e){const t=this.getOfflineClients();let n="APPLICATION LIFECYCLE:STARTUP:Dependency not online after 10 seconds.";t.length&&(n=`${n} Waiting for these clients: ${t.join(", ")}.`),e.emit("err",n)}checkDependencies(){for(const e in this.dependencies){const t=this.dependencies[e],{dependencies:n,callback:r}=t;(!n.clients.length||this.clientsAreAllOnline[e]||(this.clientsAreAllOnline[e]=this.checkClients(n.clients),this.clientsAreAllOnline[e]))&&(delete this.dependencies[e],t.clearStartupTimer(),r&&r())}}getOfflineClients(){let e=[];for(const t in this.dependencies){const{dependencies:n}=this.dependencies[t];e=e.concat(n.clients.filter(e=>!this.onlineClients.includes(e)))}return e.filter((t,n)=>e.indexOf(t)===n)}checkClients(e){return e.every(e=>this.onlineClients.includes(e))}setClientOnline(e){this.onlineClients.includes(e)||(this.onlineClients.push(e),this.checkDependencies())}getOnlineClients(){return this.onlineClients}bindCorrectContext(){this.checkDependencies=this.checkDependencies.bind(this),this.checkClients=this.checkClients.bind(this),this.getOfflineClients=this.getOfflineClients.bind(this),this.onDependencyTimeout=this.onDependencyTimeout.bind(this),this.waitFor=this.waitFor.bind(this)}}class d{constructor(){this.offlineServices=[],this.dependencies={},this.checkDependencies=this.checkDependencies.bind(this)}waitFor(e,t){u.default.system.debug("DependencyManager:waitFor",e),e.services||(e.services=[]);const n=l();this.dependencies[n]={dependencies:e,callback:t}}checkDependencies(){if(console.debug("checkDependencies",this.dependencies),Object.keys(this.dependencies))for(const e in this.dependencies){const{dependencies:t,callback:n}=this.dependencies[e];if(u.default.system.debug("DependencyManager:checkDependency",t.services,this.offlineServices),t.services.length){if(!this.checkServices(t.services))continue}console.debug("checkDependencies callback"),delete this.dependencies[e],n&&n()}}checkServices(e){return e.every(e=>this.offlineServices.includes(e))}setServiceOffline(e){u.default.system.debug("setServiceOffline",e),console.debug("setServiceOffline",e),this.offlineServices.push(e),this.checkDependencies()}}class p extends o.EventEmitter{constructor(){super(),this.startup=new f,this.shutdown=new d,this.RouterClient=i.default,this.AuthorizationCompleted=!1,this.bindCorrectContext(),this.onAuthorizationCompleted(this.startup.checkDependencies),i.default.onReady(this.listenForServices)}bindCorrectContext(){this.listenForServices=this.listenForServices.bind(this),this.onAuthorizationCompleted=this.onAuthorizationCompleted.bind(this)}setClientOnline(e){this.startup.setClientOnline(e)}onServiceStateChange(e){Object.keys(e).forEach(t=>{const{state:n}=e[t];"closed"===n&&this.shutdown.setServiceOffline(t)})}listenForServices(){u.default.system.debug("DependencyManager:listenForServices before wait"),a.default.waitForBootStage("kernel","stageEntered",()=>{u.default.system.debug("DependencyManager:listenForServices after wait"),this.RouterClient.subscribe(s.SERVICES_STATE_CHANNEL,(e,t)=>{u.default.system.debug("DependencyManager:listenForServices SERVICES_STATE_CHANNEL",t.data),this.onServiceStateChange(t.data)}),this.RouterClient.addListener(s.SERVICE_CLOSED_CHANNEL,(e,t)=>{u.default.system.debug("DependencyManager:listenForServices SERVICE_CLOSED_CHANNEL",t.data);const n={};n[t.data.name]={state:"closed"},this.onServiceStateChange(n)}),this.RouterClient.subscribe(s.APPLICATION_STATE_CHANNEL,(e,t)=>{switch(t.data.state){case"authenticated":case"ready":break;case"closing":this.shutdown.checkDependencies()}})})}onAuthorizationCompleted(e){this.AuthorizationCompleted?e():this.addListener("AuthorizationCompleted",e)}}t.FSBLDependencyManager=p,t.FSBLDependencyManagerSingleton=new p,t.default=t.FSBLDependencyManagerSingleton},,,,function(e,t,n){(function(t){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,s=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,c=a||u||Function("return this")(),l=Object.prototype.toString,f=Math.max,d=Math.min,p=function(){return c.Date.now()};function h(e,t,n){var r,o,i,s,a,u,c=0,l=!1,h=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=r,i=o;return r=o=void 0,c=t,s=e.apply(i,n)}function v(e){return c=e,a=setTimeout(w,t),l?b(e):s}function _(e){var n=e-u;return void 0===u||n>=t||n<0||h&&e-c>=i}function w(){var e=p();if(_(e))return S(e);a=setTimeout(w,function(e){var n=t-(e-u);return h?d(n,i-(e-c)):n}(e))}function S(e){return a=void 0,g&&r?b(e):(r=o=void 0,s)}function C(){var e=p(),n=_(e);if(r=arguments,o=this,u=e,n){if(void 0===a)return v(u);if(h)return a=setTimeout(w,t),b(u)}return void 0===a&&(a=setTimeout(w,t)),s}return t=y(t)||0,m(n)&&(l=!!n.leading,i=(h="maxWait"in n)?f(y(n.maxWait)||0,t):i,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==a&&clearTimeout(a),c=0,r=u=o=a=void 0},C.flush=function(){return void 0===a?s:S(p())},C}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(n,"");var a=o.test(e);return a||i.test(e)?s(e.slice(2),a?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return m(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),h(e,t,{leading:r,maxWait:t,trailing:o})}}).call(this,n(8))},,,function(e,t,n){"use strict";(function(e){
/*!
 * Copyright 2017 - 2020 by ChartIQ, Inc.
 * All rights reserved.
 */
var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RouterClientConstructor=void 0;const a=s(n(63)),u=i(n(17)),c=n(18),l=s(n(19)),f=s(n(53)),d=n(6),p=n(4),h=n(40),m=n(45),y=[],g=e;let b=p.Logger;g.FSBLData=g.FSBLData||{},g.FSBLData.RouterClients=g.FSBLData.RouterClients||{},t.RouterClientConstructor=function(e){l.default.args(e,"object")&&l.default.args2("params.clientName",e.clientName,"string","params.transportName",e.transportName,"string=");const t=e.clientName,{transportName:n}=e;let r,o;const i={},s={},p={},v={},_={},w={},S={},C={},E={},I={};let A,T=null,O=!1;const R=[],j=this;function L(){this.header={origin:A,type:"initialHandshake"}}function D(e,t){this.header={origin:A,type:"timeCalibration"},this.clientBaseTime=e,this.serviceBaseTime=t}function M(e){this.header={origin:A,type:"addListener",channel:e}}function k(e,t,n){this.header={origin:A,type:"transmit",channel:e},this.data=t,this.options=n}function P(e){this.header={origin:A,type:"removeListener",channel:e}}function N(e){this.header={origin:A,type:"addResponder",channel:e}}function x(e,t,n){this.header={origin:A,type:"query",queryID:e,channel:t},this.data=n}function F(e,t,n){this.header={origin:A,type:"queryResponse",queryID:e,error:t},this.data=n}function W(e){this.header={origin:A,type:"removeResponder",channel:e}}function B(e,t){this.header={origin:A,type:"subscribe",subscribeID:e,topic:t}}function U(e,t){this.header={origin:A,type:"unsubscribe",subscribeID:e,topic:t}}function $(e,t){this.header={origin:A,type:"publish",topic:e},this.data=t}function V(e,t,n,r){this.header={origin:A,type:"notify",subscribeID:e,topic:t,error:n},this.data=r}function q(e,t,n){this.header={origin:A,type:"addPubSubResponder",topic:e,handleOnServer:n},this.data=t}function H(e){this.header={origin:A,type:"removePubSubResponder",topic:e}}function G(){for(j.startupTime=performance.now()-j.startupTime,b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient Ready"),O=!0;R.length>0;){b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient parentReady invoked");R.shift()()}}function z(e){!T||T instanceof Promise?(b.system.warn("RouterClient: Queuing message since router initialization not complete",e),y.push(e)):T.send(e)}function Q(){return this.header.origin===this.header.lastClient}function Y(e,t){b.system.info("RouterClient: outgoing query response","CHANNEL",this.header.channel,"RESPONSE DATA",t,"QUERY ID",this.header.queryID),z(new F(this.header.queryID,e,t))}function K(e,t){const n=e[t.header.channel];void 0===n?b.system.warn(`RouterClient: no query responder define on channel ${t.header.channel} incoming from ${t.header.origin}`,t):t.header.error?(b.system.warn("RouterClient: queryResponder error",t),n(t.header.error,null),delete e[t.header.channel]):(t.originatedHere=Q,t.sendQueryResponse=Y.bind(t),b.system.info("RouterClient: incoming query","CHANNEL",t.header.channel,"FROM",t.header.origin,"QUERY MESSAGE",t),n(null,t))}function J(e,t){const n=e[t.header.queryID];void 0===n?b.system.warn("RouterClient: no handler for incoming query response","QUERY ID",t.header.queryID):(!function(e,t){const n=e[t];void 0!==n&&clearTimeout(n)}(I,t.header.queryID),t.header.error?(b.system.debug("RouterClient: incoming queryResponse error",t.header,"QUERY ID",t.header.queryID),n(t.header.error,t)):(b.system.info("RouterClient: incoming query response","RESPONSE MESSAGE",t,"QUERY ID",t.header.queryID),n(null,t)),delete e[t.header.queryID])}function X(e,t){if(e)b.system.warn("RouterClient: income publish rejected by pubsub responder",e,t);else{v[this.header.topic]=t;const n=w[this.header.topic];if(void 0!==n)for(let r=0;r<n.length;r++)b.system.info("RouterClient: sending pubsub notify","TOPIC",this.header.topic,"NOTIFY DATA",t),z(new V(n[r],this.header.topic,e,t))}}function Z(e,t){var n,r,o;(function(e){let t=!1;return void 0===e&&(t=!0),t})(t)||z(new V(this.header.subscribeID,this.header.topic,e,t)),e?b.system.warn("RouterClient: incoming subscription rejected by pubsub responder","TOPIC",this.header.topic,"MESSAGE",this):(n=w,r=this.header.topic,o=this.header.subscribeID,r in n?n[r].push(o):n[r]=[o],b.system.info("RouterClient: incoming subscription added","TOPIC",this.header.topic,"MESSAGE",this))}function ee(){!function(e,t,n){let r=!1;if(t in e){const o=w[t];for(let i=0;i<o.length;i++)if(n===o[i]){o.splice(i,1),0===o.length&&delete e[t],r=!0,b.system.info("RouterClient: PubSub removeListener","TOPIC",t,"FROM",n);break}}r||b.system.warn(`RouterClient: tried to remove non-existent listener on ${t} from ${JSON.stringify(n)}`)}(w,this.header.topic,this.header.subscribeID)}function te(e){switch(b.system.verbose("Incoming Message Type",e.header.type,e),e.header.type){case"transmit":!function(e,t){const n=e[t.header.channel]||[],r=[];if(Array.isArray(n)&&0!==n.length){t.originatedHere=Q,n.forEach(e=>{r.push(e)});for(let e=0;e<r.length;e++)b.isLogMessage(t.header.channel)||b.system.info("RouterClient: incoming transmit","CHANNEL",t.header.channel,"FROM",t.header.origin,"MESSAGE",t),r[e](null,t)}else b.system.warn(`RouterClient: no listener for incoming transmit on channel ${t.header.channel} from ${t.header.origin}`,t)}(i,e);break;case"query":K(s,e);break;case"queryResponse":J(E,e);break;case"notify":!function(e,t){const n=e[t.header.subscribeID];void 0===n?b.system.warn("RouterClient: no subscription handler defined for incoming notify for subscriberID",t.header.subscribeID,t):t.header.error?(b.system.info("RouterClient: incoming PubSub notify error for subscriberID","SUBSCRIBER ID",t.header.subscribeID,"NOTIFY MESSAGE",t),n(t.header.error,t)):(t.originatedHere=Q,b.system.info("RouterClient: incoming PubSub notify","SUBSCRIBER ID",t.header.subscribeID,"NOTIFY MESSAGE",t),n(null,t))}(S,e);break;case"publish":!function(e){let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];break}void 0===t?b.system.warn("RouterClient: no pubsub responder defined for incoming publish","TOPIC",e.header.topic,"PUBLISH MESSAGE",e):(e.sendNotifyToAllSubscribers=X,t.publishCallback?(b.system.info("RouterClient: incoming PubSub publish callback invoked","TOPIC",e.header.topic,"PUBLISH MESSAGE",e),t.publishCallback(null,e)):(b.system.info("RouterClient: incoming PubSub publish","TOPIC",e.header.topic,"PUBLISH MESSAGE",e),e.sendNotifyToAllSubscribers(null,e.data)))}(e);break;case"subscribe":!function(e){b.system.info("RouterClient: PubSub subscribe","TOPIC",e.header.topic);let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];let r=v[e.header.topic];void 0===r&&(r=v[n]),v[e.header.topic]=r;break}void 0===t?b.system.warn("RouterClient: no pubsub responder defined for incoming subscribe",e):e.header.error?b.system.warn("RouterClient: pubsub error received from router service: "+JSON.stringify(e.header.error)):(e.sendNotifyToSubscriber=Z,t.subscribeCallback?(e.data=v[e.header.topic],t.subscribeCallback(null,e)):e.sendNotifyToSubscriber(null,v[e.header.topic]))}(e);break;case"unsubscribe":!function(e){let t=p[e.header.topic];if(void 0===t)for(const n in _)if(_[n].test(e.header.topic)){t=p[n];break}void 0===t?b.system.warn("RouterClient: no pubsub responder defined for incoming unsubscribe","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e):(e.removeSubscriber=ee,t.unsubscribeCallback?(b.system.info("RouterClient: incoming unsubscribe callback","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e),t.unsubscribeCallback(null,e)):(b.system.info("RouterClient: incoming unsubscribe","TOPIC",e.header.topic,"UNSUBSCRIBE MESSAGE",e),e.removeSubscriber()))}(e);break;case"timeCalibration":const t=()=>{o?o(e):setTimeout(()=>{t()},10)};t();break;case"initialHandshakeResponse":r()}}function ne(e,t){t.header.lastClient=A,t.header.incomingTransportInfo=e,te(t)}function re(){return`${A}.${m.v4()}`}function oe(e,t,n){e[t]=n}function ie(e,t,n,r){r>0&&(e[t]=setTimeout(()=>{b.system.warn(`RouterClient: timeout waiting on query response on channel ${n} for queryID ${t} on timer ${e[t]} timeout=${r}`)},r))}function se(e,t){let n=!1;return void 0!==e[t]&&(delete e[t],n=!0),n}return this.startupTime=0,this.calibrateTimeWithRouterService=function(e){let t,n=0,r=1/0;o=function(o){n++,n>5?function(n){let o=0;for(let e=1;e<5;e++){const i=n.clientBaseTime[e-1],s=n.clientBaseTime[e]-i,a=n.serviceBaseTime[e-1]-(i+s/2);s<r&&(r=s,t=a),o+=a,b.system.debug("calibrationCalculation Intermediate Values","lastRRT",s,"lastOffset",a,"fastestOffset",t,"fastestRRT",r)}o/=4,b.system.debug("RouterClient calibrationCalculation","Average Offset",o,"Chosen FastestOffset",t,n),e(t)}(o):(o.clientBaseTime.push(g.performance.timing.navigationStart+g.performance.now()),z(new D(o.clientBaseTime,o.serviceBaseTime)))},o(new D([],[]))},this.ready=e=>this.onReady(e),this.getClientName=function(){return b.system.debug("RouterClient.getClientName",A),A},this.onReady=function(e){l.default.args(e,"function"),O?e():R.push(e)},this.addListener=function(e,t){b.system.info("RouterClient.addListener","CHANNEL",e),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;const o=e[t];return void 0===o||0===o.length?(e[t]=[n],r=!0):o.push(n),r})(i,e,t)&&z(new M(e))},this.transmit=function(e,t,n={suppressWarnings:!1}){b.isLogMessage(e)||b.system.info("RouterClient.transmit","TO CHANNEL",e,"EVENT",t),l.default.args(e,"string",t,"any"),z(new k(e,t,n))},this.removeListener=function(e,t){b.system.info("RouterClient.removeListener","CHANNEL",e,"EVENT HANDLER",t),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;const o=e[t];if(void 0!==o){const e=o.indexOf(n);e>-1?(o.splice(e,1),0===o.length&&(r=!0)):b.system.warn("no listener defined for channel: "+t)}return r})(i,e,t)&&z(new P(e))},this.addResponder=function(e,t){b.system.info("RouterClient.addResponder","CHANNEL",e),l.default.args(e,"string",t,"function");(function(e,t,n){let r=!1;return void 0===e[t]&&(e[t]=n,r=!0),r})(s,e,t)?z(new N(e)):(b.system.warn("RouterClient.addResponder: Responder already locally defined for channel "+e),t({"RouteClient QueryError":"Responder already locally defined for channel"+e},null))},this.query=function(e,t,n,r=Function.prototype){const o=`${re()}.${e}`,i=window.performance.timing.navigationStart+window.performance.now(),s=window.performance.timing.navigationStart,a=window.performance.now();function u(u){oe(E,o,(c,l)=>{u({err:c,response:l}),"function"==typeof r?r(c,l):b.system.warn("No response event handler passed to RouterClient.query","RESPONDER CHANNEL",e,"QUERY EVENT",t,"PARAMS",n,"QUERY ID",o,{timestamp:i,navstart:s,timenow:a})}),ie(I,o,e,n.timeout),z(new x(o,e,t))}return b.system.info("RouterClient.query","RESPONDER CHANNEL",e,"QUERY EVENT",t,"PARAMS",n,"QUERY ID",o,{timestamp:i,navstart:s,timenow:a}),3===arguments.length&&(r=n,n={timeout:2e4}),l.default.args(e,"string",t,"any=",n,"object=",r,"function"),n=n||{},l.default.args2("params.timeout",n.timeout,"number"),new Promise(u)},this.removeResponder=function(e){b.system.info("RouterClient.removeResponder","RESPONDER CHANNEL",e),l.default.args(e,"string");se(s,e)&&z(new W(e))},this.addPubSubResponder=function(t,n,r,o){let i,s;if(b.system.info("RouterClient.addPubSubResponder","TOPIC",t,"INITIAL STATE",n,"PARAMS",r),l.default.args(t,"any",n,"object=",e,"object="),r=r||{},l.default.args2("params.subscribeCallback",r.subscribeCallback,"function=","params.publishCallback",r.publishCallback,"function=")&&l.default.args2("params.unsubscribeCallback",r.unsubscribeCallback,"function="),void 0===r.subscribeCallback&&void 0===r.publishCallback&&void 0===r.unsubscribeCallback)n=n||{},z(new q(t.toString(),n,!0)),s="success";else{(function(e,t,n,r){let o=!1;return void 0===p[e.toString()]&&(e instanceof RegExp&&(_[e.toString()]=e,b.system.info("RouterClient: PubSub RegEx added for topic "+e.toString())),p[e.toString()]={subscribeCallback:t,publishCallback:n,unsubscribeCallback:r},o=!0),o})(t,r.subscribeCallback,r.publishCallback,r.unsubscribeCallback)?(n=n||{},v[t.toString()]=u.clone(n),z(new q(t.toString(),n,!1)),s="success"):(i="RouterClient.addPubSubResponder: Responder already locally defined for topic "+t,b.system.error(i))}o&&o(i,s)},this.removePubSubResponder=function(e){b.system.info("RouterClient.removePubSubResponder","TOPIC",e),l.default.args(e,"any");se(p,e)?(delete v[e.toString()],delete _[e.toString()],z(new H(e))):b.system.warn("RouterClient.removePubSubResponder failed: Could not find responder for topic "+e)},this.subscribe=function(e,t){b.system.info("RouterClient.subscribe","TOPIC",e),l.default.args(e,"string",t,"function");const n=re();return function(e,t,n,r){e[t]=n,C[t]=r}(S,n,t,e),z(new B(n,e)),{subscribeID:n,topic:e}},this.publish=function(e,t){b.system.info("RouterClient.publish","TOPIC",e,"EVENT",t),l.default.args(e,"string",t,"any"),z(new $(e,t))},this.unsubscribe=function(e){b.system.info("RouterClient.unsubscribe","SUBSCRIBE ID",e),l.default.args(e,"object")&&l.default.args2("subscribeIDStruct.subscribeID",e.subscribeID,"string");(function(e,t){let n=!1;return void 0!==e[t]&&(delete e[t],n=!0),n})(S,e.subscribeID)?z(new U(e.subscribeID,e.topic)):b.system.warn("RouterClient.unsubscribe: Could not find subscribeID for topic "+e.topic)},this.trustedMessage=function(e){let t=!0;return b.system.debug("RouterClient.trustedMessage header",e.header),"SharedWorker"===e.header.originIncomingTransportInfo.transportID&&(t=!0),t},this.disconnectAll=function(){b.system.info("RouterClient.disconnectAll");for(const e in i)b.system.debug("RouterClient.disconnectAll is removing listener on "+e),z(new P(e)),delete i[e];for(const e in s)b.system.debug("RouterClient.disconnectAll is removing responder on "+e),z(new W(e)),delete s[e];for(const e in p)b.system.debug("RouterClient.disconnectAll is removing pubsub responder on "+e),z(new H(e)),delete p[e.toString()],delete v[e.toString()],delete _[e.toString()];for(const e in S){const t=C[e];b.system.debug("RouterClient.disconnectAll is removing subscriber on "+t),z(new U(e,t)),delete S[e],delete C[e]}},"loggerService"===d.System.Window.getCurrent().name&&(b=new h.LocalLogger),A=`${t}.${d.System.Window.getCurrent().name}`,A in g.FSBLData.RouterClients?(b.system.debug('"RouterClient Check: reusing existing client for '+A),console.debug('"RouterClient Check: reusing existing client for '+A,g)):(b.system.debug('"RouterClient Check: constructing new client for '+A),console.debug('"RouterClient Check: constructing new client for '+A,g),g.FSBLData.RouterClients[A]=this,function(e,t){b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient Constructor:Name:",e);let o=0;function i(o){b.system.info("WINDOW LIFECYCLE:STARTUP:RouterClient:processManifest"),o&&"string"!=typeof o?function(e,t,o,i){b.system.verbose(`Client ${t} connecting to event router`),b.system.verbose("Name of transport to establish: "+o);const s=void 0===o;let u,l,d=!1,p=0;const h=e.finsemble,m={FinsembleUUID:h.FinsembleUUID,applicationRoot:h.applicationRoot,routerDomainRoot:h.moduleRoot,forceWindowTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.forceWindowTransport",{}),sameDomainTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.sameDomainTransport","SharedWorker"),crossDomainTransport:c.ConfigUtilInstance.getDefault(h,"finConfig.router.crossDomainTransport","IPCBus"),transportSettings:c.ConfigUtilInstance.getDefault(h,"finConfig.router.transportSettings",{}),IAC:c.ConfigUtilInstance.getDefault(h,"finConfig.IAC",{})};let g,v,_,w,S,C;g=e=>{l=0,b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient:transport ready","TRANSPORT OBJECT",e),T=e,r=C,S(),u=setInterval(S,200)},v=e=>{b.system.error("RouterClientError",e)},_=()=>{b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient:getClientTransport","ROUTER PARAMS:",m),T=s?a.default.getRecommendedTransport(m,ne,A,"RouterService").then(g).catch(v):a.default.getTransport(m,n,ne,A,"RouterService").then(g).catch(v)},w=()=>{if(clearInterval(u),p++,p<=3)b.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient: failure to connect to router service. Retrying...",p,m),_();else{const e="A cross domain transport has failed to connect. Cross domain components may not work. Please contact your administrator.";b.system.error(e,m);const t=c.ConfigUtilInstance.getDefault(h,"finConfig.notificationURL",h.moduleRoot+"/components/system/notification/notification.html");f.default.alert("dev","ONCE-SINCE-STARTUP","FSBL-Internal-Transport-Failure",e,{url:t})}},S=()=>{b.system.debug("WINDOW LIFECYCLE:STARTUP:RouterClient: sendHandshake",l),z(new L),l++>50&&w()},C=()=>{if(!d){if(b.system.debug(`WINDOW LIFECYCLE:STARTUP:RouterClient connected: Starting ${A} with transport ${T.identifier()}`),d=!0,clearInterval(u),y)for(let e=0;e<y.length;e++){b.system.debug("RouterClient: firing queued msg");const t=y[e];T.send(t)}i&&i()}},_()}(o,e,t,G):b.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient:processManifest failed -- fatal error",o)}d.System.ready(()=>{const e=d.System.Window.getCurrent();b.system.debug("WINDOW LIFECYCLE:STARTUP: System.ready invoked in "+e.name),console.debug("WINDOW LIFECYCLE:STARTUP: System.ready invoked in "+e.name),j.startupTime=performance.now(),0==o++&&e.getOptions(e=>{e.customData&&e.customData.manifest?(b.system.debug("Router Init using custom data"),i(e.customData.manifest)):c.ConfigUtilInstance.getExpandedRawManifest(e=>{b.system.debug("Router Init using getExpandedRawManifest"),g.FinsembleUUID&&(e.finsemble.FinsembleUUID=g.FinsembleUUID),i(e)},e=>{b.system.error("WINDOW LIFECYCLE:STARTUP:RouterClient:manifest error",e)})},e=>{b.system.error("WINDOW LIFECYCLE:STARTUP:finWindow.getOptions error",e)})})}(A,n)),g.FSBLData.RouterClients[A]}}).call(this,n(8))},function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(18),i=r(n(4)),s=n(6),a={activeTransports:{},addTransport(e,t){this.activeTransports[e]=t,i.default.system.log(`RouterTransport ${e} added to activeTransports`)},getActiveTransports(e){const t=[];function n(e){-1===t.indexOf(e)&&t.push(e)}return s.System.InterApplicationBus&&n("IPCBus"),"Electron"===s.System.container&&n("FinsembleTransport"),SharedWorker&&n("SharedWorker"),n(e.sameDomainTransport),n(e.crossDomainTransport),i.default.system.log("getActiveTransports",t),t},getDefaultTransport:(e,t,n,r)=>a.getTransport(e,"IPCBus",t,n,r),getRecommendedTransport(e,t,n,r){const o=function(){const{sameDomainTransport:t}=e,{crossDomainTransport:n}=e;let r=t;return function(){const t=document.createElement("a");t.href=e.routerDomainRoot;const n=window.location.hostname===t.hostname,r=window.location.protocol===t.protocol,o=(void 0!==window.location.port?window.location.port:80)===(void 0!==t.port?t.port:80),s=!(n&&o&&r);return i.default.system.debug(`Transport crossDomain=${s} (${n}:${r}:${o})`),s}()&&(r=n),i.default.system.log(`Transport Info: Selected=${r} SameDomainDefault=${t} CrossDomainDefault=${n}`),console.log(`Transport Info: Selected=${r} SameDomainDefault=${t} CrossDomainDefault=${n}`),r}();return a.getTransport(e,o,t,n,r)},getTransport(e,t,n,r,o){const i=this;return new Promise((s,a)=>{const u=i.activeTransports[t];u?new u(e,n,r,o,e=>{s(e)}):a("unknown router transport name: "+t)})}};const u={SharedWorkerTransport:function(e,t,n,r,o){let s;const a=this;this.send=function(e,t){1===arguments.length?(t=arguments[0],e=null):(e=arguments[0],t=arguments[1]),i.default.system.verbose("SharedWorkerTransport Outgoing Transport",t);try{s.port.postMessage([e,t])}catch(e){i.default.system.error("SharedWorkerTransport: post message failed: "+JSON.stringify(e),"Probable cause is sending illegal data type (e.g. function).")}},this.identifier=function(){return"SharedWorker"};const u=e.transportSettings.SharedWorker&&e.transportSettings.SharedWorker.workerPath?e.transportSettings.SharedWorker.workerPath:e.routerDomainRoot+"/common/routerSharedWorker.js";i.default.system.log(`SharedWorker Transport Initializing for ${n} using ${u}`),console.log(`SharedWorker Transport Initializing for ${n} using ${u}`),s=new SharedWorker(u,{name:"Finsemble",credentials:"include"}),s.port.onmessage=function(e){const n=e.data[0],r=e.data[1],o={transportID:a.identifier(),port:n};i.default.system.verbose("SharedWorkerTransport Incoming Transport",o,"Message",r),t(o,r)},s.onerror=function(e){i.default.system.error("SharedWorkerTransport Transport Error"+JSON.stringify(e))},s.port.start(),"RouterService"===n&&s.port.postMessage({data:"connect",source:"RouterService"}),o(this)},IPCTransport:function(e,t,n,r,o){const{uuid:a}=s.System.Application.getCurrent(),u=this;this.send=function(e,t){let n;1===arguments.length?(n=r,t=arguments[0]):(n=e.name,t=arguments[1]),i.default.system.verbose("IPCTransport Outgoing Transport",a,n,"Message",t),s.System.InterApplicationBus.publish(n,t,()=>{},()=>{})},this.identifier=function(){return"IPCBus"},i.default.system.log("IPCBus Transport Initializing for "+n),console.log("IPCBus Transport Initializing for "+n),s.System.InterApplicationBus.subscribe("*",n,(function(e,n){const r={transportID:u.identifier(),senderUuid:n,name:e.header.origin};i.default.system.verbose("IPCTransport Incoming Transport",r,"Message",e),t(r,e)}),null,(function(e){i.default.system.error("IPCBus Subscribe Failure: "+e)})),o(this)},FinsembleTransport:function(e,t,n,r,s){const a=o.ConfigUtilInstance.getDefault(e,"params.IAC.serverAddress","ws://127.0.0.1:3376"),u=o.ConfigUtilInstance.getDefault(e,"params.transportSettings.FinsembleTransport.serverAddress",a)+"/router",c=this;let l;function f(e){const n={transportID:c.identifier(),client:e.clientMessage.header.origin};i.default.system.verbose("FinsembleTransport Incoming Transport",n,"Message",e),t(n,e.clientMessage)}function d(){i.default.system.error("FinsembleTransport Connection Timeout for "+n),s(c)}function p(){i.default.system.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),console.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),u.startsWith("ws:")||u.startsWith("wss:")||console.error("wss not found as SOCKET_SERVER_ADDRESS.  Use wss!",u),l=new WebSocket(u);const e=setTimeout(d,3e3);l.addEventListener("open",()=>{clearTimeout(e),i.default.system.log("FinsembleTransport Connected to Server"),console.log("FinsembleTransport Connected to Server"),l.addEventListener("message",e=>{const t=JSON.parse(e.data);("RouterService"===n&&"ROUTER_SERVICE"==t.dest||n===t.message.client)&&f(t.message)}),s(c)})}this.send=function(e,t){let n,r;1===arguments.length?(n="ROUTER_SERVICE",r={clientMessage:t=arguments[0]}):(n="ROUTER_CLIENT",t=arguments[1],r={client:e.client,clientMessage:t}),i.default.system.verbose("FinsembleTransport Outgoing Transport",n,"NewMessage",r),l.readyState===WebSocket.OPEN&&l.send(JSON.stringify({dest:n,message:r})),l.readyState===WebSocket.CONNECTING&&l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))}),l.readyState===WebSocket.CLOSED&&(p(),l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))})),l.readyState===WebSocket.CLOSING&&(l.onclose=()=>{p(),l.addEventListener("open",()=>{l.send(JSON.stringify({dest:n,message:r}))})})},this.identifier=function(){return"FinsembleTransport"},p(),i.default.system.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),console.log(`FinsembleTransport Transport Initializing for ${n} using ${u}`),(u.startsWith("ws:")||u.startsWith("wss:"))&&console.error("wss not found as SOCKET_SERVER_ADDRESS.  Use wss!",u)},FinsembleCloudTransport:function(e,t,n,r,s){let a;const u=o.ConfigUtilInstance.getDefault(e,"params.transportSettings.FinsembleCloudTransport.serverAddress",e.applicationRoot),{FinsembleUUID:c}=e;a="/"===u.substr(u.length-1)?u.substring(0,u.length-1):u;const l=a+"/router",f=this;let d;function p(e){const n={transportID:f.identifier(),client:e.clientMessage.header.origin};i.default.system.verbose("FinsembleCloudTransport Incoming Transport",n,"Message",e),t(n,e.clientMessage)}this.send=function(e,t){let n,r;1===arguments.length?(n="ROUTER_SERVICE",r={FinsembleUUID:c,clientMessage:t=arguments[0]}):(n="ROUTER_CLIENT",t=arguments[1],r={FinsembleUUID:c,client:e.client,clientMessage:t}),i.default.system.verbose("FinsembleCloudTransport Outgoing Transport",n,"NewMessage",r),d.emit(n,r)},this.identifier=function(){return"FinsembleCloudTransport"},i.default.system.log(`FinsembleCloudTransport Transport Initializing for ${n} using ${l}`),console.log(`FinsembleCloudTransport Transport Initializing for ${n} using ${l}`),-1!==l.indexOf("ws:")||console.error("SOCKET_SERVER_ADDRESS not wss!",l),d=new WebSocket(l);const h=setTimeout((function(){i.default.system.error("FinsembleCloudTransport Connection Timeout for "+n),s(f)}),3e3);d.on("connect",()=>{clearTimeout(h),i.default.system.log("FinsembleCloudTransport Connected to Server",c),console.log("FinsembleCloudTransport Connected to Server"),"RouterService"===n?(i.default.system.debug("Setting Up Socket Connection","ROUTER_SERVICE_IN"+c),console.log("Setting Up Socket Connection","ROUTER_SERVICE_IN"+c),d.on("ROUTER_SERVICE_IN"+c,e=>{p(e)})):(i.default.system.debug("Setting Up Socket Connection",n+c),console.log("SETTING UP Socket CONNECTION",n+c),d.on(n+c,e=>{p(e)})),s(f)})}};a.addTransport("SharedWorker",u.SharedWorkerTransport),a.addTransport("IPCBus",u.IPCTransport),a.addTransport("FinsembleTransport",u.FinsembleTransport);var c=a;t.default=c,e.exports=t.default},function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(31),i=r(n(4)),s=(r(n(44)),r(n(65))),a=r(n(52)),u=n(33);let c;class l extends o.EventEmitter{constructor(e,t,n){if(super(),!n||!n.System)throw new Error("Monitors class requires dependency injection. Ensure that System is being passed in.");({System:c}=n),this.cachedMonitorInfo=null,this.limitedMonitorRefreshQueue=new s.default({concurrency:1}),this.bindAllFunctions(),this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(e)),c.addEventListener("monitor-info-changed",()=>{this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(t))}),c.addEventListener("session-changed",e=>{e&&("object"!=typeof e||!e.hasOwnProperty("reason")||"unlock"!==e.reason&&"remote-connect"!==e.reason&&"unknown"!==e.reason)||this.limitedMonitorRefreshQueue.add(()=>this.refreshMonitors(t))})}bindAllFunctions(){let e=this;for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(e))){let n=e[t];n instanceof Function&&n!==l&&(e[t]=e[t].bind(e))}}asyncIt(e,t){return t(e),e}rationalizeMonitor(e){e.monitorRect.width=e.monitorRect.right-e.monitorRect.left,e.monitorRect.height=e.monitorRect.bottom-e.monitorRect.top,e.availableRect.width=e.availableRect.right-e.availableRect.left,e.availableRect.height=e.availableRect.bottom-e.availableRect.top}calculateMonitorScale(e,t){return(t.right-t.left)/(e.right-e.left)}monitorInfoIsChanged(e,t){if(!e||!t)return!0;if(e.nonPrimaryMonitors.length!==t.nonPrimaryMonitors.length)return!0;if(!(0,u.checkIfBoundsAreEqual)(e.primaryMonitor.availableRect,t.primaryMonitor.availableRect))return!0;if(!(0,u.checkIfBoundsAreEqual)(e.primaryMonitor.monitorRect,t.primaryMonitor.monitorRect))return!0;e.nonPrimaryMonitors.sort((e,t)=>e.deviceName>t.deviceName?1:e.deviceName<t.deviceName?-1:0),t.nonPrimaryMonitors.sort((e,t)=>e.deviceName>t.deviceName?1:e.deviceName<t.deviceName?-1:0);let n=!1;return e.nonPrimaryMonitors.forEach((e,r)=>{const o=t.nonPrimaryMonitors[r];(0,u.checkIfBoundsAreEqual)(e.availableRect,o.availableRect)&&(0,u.checkIfBoundsAreEqual)(e.monitorRect,o.monitorRect)||(n=!0)}),n}async refreshMonitors(e=Function.prototype){this.limitedMonitorRefreshQueue.clear();const t=await c.getMonitorInfo();if(!this.monitorInfoIsChanged(this.cachedMonitorInfo,t))return i.default.system.info("Skipped refreshMonitors because monitors do not change."),e(this.allMonitors);this.allMonitors=[];let{primaryMonitor:n}=t;if(Object.entries(n).length){n.whichMonitor="primary",n.position=0,this.allMonitors.push(Object.assign({},n));for(let e=0;e<t.nonPrimaryMonitors.length;e++){let n=t.nonPrimaryMonitors[e];n.whichMonitor=e,n.position=e+1,this.allMonitors.push(n)}for(let e=0;e<this.allMonitors.length;e++){let t=this.allMonitors[e];this.rationalizeMonitor(t)}this.cachedMonitorInfo=(0,a.default)(t),e(this.allMonitors),this.ready=!0,1===this.limitedMonitorRefreshQueue.pending&&this.emit("monitors-changed",{monitors:this.allMonitors})}else i.default.system.info("There is no primary monitor in 'monitorInfo' - the system is still in the process of updating the monitor information. Returning from monitorsAndScaling -> refreshMonitors")}getAllMonitors(e=Function.prototype){return this.ready?this.asyncIt(JSON.parse(JSON.stringify(this.allMonitors)),e):e?void this.refreshMonitors(e):"not ready"}getMonitorFromScaledXY(e,t,n=Function.prototype){return new Promise(r=>{if(!this.ready)return this.refreshMonitors(()=>{this.getMonitorFromScaledXY(e,t,n)}),"not ready";let o=null;for(var i=this.allMonitors,s=0;s<i.length;s++){var a=i[s],{monitorRect:u}=a;if(e>=u.left&&e<u.right&&t>=u.top&&t<u.bottom){o=a;break}}r(o),n(o)})}getMonitorFromUnscaledXY(e,t,n=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.getMonitorFromUnscaledXY(e,t,n)}),"not ready";for(var r=this.allMonitors,o=0;o<r.length;o++){var i=r[o],s=i.monitor.scaledRect;if(e>=s.left&&e<s.right&&t>=s.top&&t<s.bottom)return this.asyncIt(i,n)}return this.asyncIt(null,n)}async translatePointFromScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translatePointFromScaled(e,t)}),"not ready";var n;e.point?({point:n}=e):n=e;var{monitor:r}=e;if(!r){r=(await this.getMonitorFromScaledXY(n.x,n.y)).data}let o=null;if(r){var i=n.x-r.monitorRect.left,s=n.y-r.monitorRect.top,a=i*r.deviceScaleFactor,u=s*r.deviceScaleFactor;o={x:a+r.monitor.scaledRect.left,y:u+r.monitor.scaledRect.top}}return t(o),Promise.resolve(o)}translatePointToScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translatePointToScaled(e,t)}),"not ready";var n;e.point?({point:n}=e):n=e;var r=e.monitor||this.getMonitorFromUnscaledXY(n.x,n.y);if(!r)return this.asyncIt(null,t);var o=n.x-r.monitor.scaledRect.left,i=n.y-r.monitor.scaledRect.top,s=o/r.deviceScaleFactor,a=i/r.deviceScaleFactor,u={x:s+r.monitorRect.left,y:a+r.monitorRect.top};return this.asyncIt(u,t)}async translateRectToScaled(e,t=Function.prototype){let n;if(!this.ready)return this.refreshMonitors(()=>{this.translateRectToScaled(e,t)}),"not ready";var r=this.translatePointToScaled({x:e.left,y:e.top}),o=this.translatePointToScaled({x:e.right,y:e.bottom});return!r&&o&&(n=await this.getMonitorFromScaledXY(o),r=this.translatePointToScaled({monitor:n,point:{x:e.left,y:e.top}})),!o&&r&&(n=await this.getMonitorFromScaledXY(o),o=this.translatePointToScaled({monitor:n,point:{x:e.right,y:e.bottom}})),this.asyncIt({top:r?r.y:null,left:r?r.x:null,bottom:o?o.y:null,right:o?o.x:null,height:r&&o?o.y-r.y:null,width:r&&o?o.x-r.x:null},t)}translateRectFromScaled(e,t=Function.prototype){if(!this.ready)return this.refreshMonitors(()=>{this.translateRectFromScaled(e,t)}),"not ready";var n=this.translatePointFromScaled({x:e.left,y:e.top}),r=this.translatePointFromScaled({x:e.right,y:e.bottom});return!n&&r&&(n=this.translatePointFromScaled({monitor:this.getMonitorFromUnscaledXY(r),point:{x:e.left,y:e.top}})),!r&&n&&(r=this.translatePointFromScaled({monitor:this.getMonitorFromUnscaledXY(n),point:{x:e.right,y:e.bottom}})),this.asyncIt({top:n?n.y:null,left:n?n.x:null,bottom:r?r.y:null,right:r?r.x:null,height:n&&r?r.y-n.y:null,width:n&&r?r.x-n.x:null},t)}}var f=l;t.default=f,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66),o=n(67),i=n(69),s=()=>{},a=new o.TimeoutError;t.default=class extends r{constructor(e){if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:i.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother()}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s)}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother)return this.emit("active"),this._queue.dequeue()(),e&&this._initializeIntervalIfNeeded(),!0}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,t={}){return new Promise((n,r)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const i=void 0===this._timeout&&void 0===t.timeout?e():o.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)});n(await i)}catch(e){r(e)}this._next()},t),this._tryToStartAnother()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}set timeout(e){this._timeout=e}get timeout(){return this._timeout}}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||e,i),u=o?o+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],a]:e._events[u].push(a):(e._events[u]=a,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},c.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,r,i,s){var a=o?o+e:e;if(!this._events[a])return!1;var u,c,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,s),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,r);break;default:if(!u)for(d=1,u=new Array(f-1);d<f;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||u(this,i);else{for(var a=0,c=[],l=s.length;a<l;a++)(s[a].fn!==t||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[i]=1===c.length?c[0]:c:u(this,i)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,e.exports=c},function(e,t,n){"use strict";const r=n(68);class o extends Error{constructor(e){super(e),this.name="TimeoutError"}}const i=(e,t,n)=>new Promise((i,s)=>{if("number"!=typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void i(e);const a=setTimeout(()=>{if("function"==typeof n){try{i(n())}catch(e){s(e)}return}const r=n instanceof Error?n:new o("string"==typeof n?n:`Promise timed out after ${t} milliseconds`);"function"==typeof e.cancel&&e.cancel(),s(r)},t);r(e.then(i,s),()=>{clearTimeout(a)})});e.exports=i,e.exports.default=i,e.exports.TimeoutError=o},function(e,t,n){"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e})))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(70);t.default=class{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const o=r.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(o,0,n)}dequeue(){const e=this._queue.shift();return e&&e.run}get size(){return this._queue.length}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,o=e.length;for(;o>0;){const i=o/2|0;let s=r+i;n(e[s],t)<=0?(r=++s,o-=i+1):o=i}return r}},function(e,t,n){var r=n(42),o=n(43);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[i+a]=s[a];return t||o(s)}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t,r="object"==typeof self&&self&&self.Object===Object&&self,o=n||r||Function("return this")();function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function s(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var a=Object.prototype,u=a.hasOwnProperty,c=a.toString,l=o.Symbol,f=a.propertyIsEnumerable,d=l?l.isConcatSpreadable:void 0,p=Math.max;function h(e){return y(e)||function(e){return function(e){return g(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?c.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&u.call(e,"callee")&&(!f.call(e,"callee")||"[object Arguments]"==c.call(e))}(e)||!!(d&&e&&e[d])}function m(e){if("string"==typeof e||function(e){return"symbol"==typeof e||g(e)&&"[object Symbol]"==c.call(e)}(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var y=Array.isArray;function g(e){return!!e&&"object"==typeof e}var b,v,_=(b=function(e,t){return null==e?{}:function(e,t){return function(e,t,n){for(var r=-1,o=t.length,i={};++r<o;){var s=t[r],a=e[s];n(a,s)&&(i[s]=a)}return i}(e=Object(e),t,(function(t,n){return n in e}))}(e,function(e,t){for(var n=-1,r=e?e.length:0,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(function e(t,n,r,o,i){var a=-1,u=t.length;for(r||(r=h),i||(i=[]);++a<u;){var c=t[a];n>0&&r(c)?n>1?e(c,n-1,r,o,i):s(i,c):o||(i[i.length]=c)}return i}(t,1),m))},v=p(void 0===v?b.length-1:v,0),function(){for(var e=arguments,t=-1,n=p(e.length-v,0),r=Array(n);++t<n;)r[t]=e[v+t];t=-1;for(var o=Array(v+1);++t<v;)o[t]=e[t];return o[v]=r,i(b,this,o)});e.exports=_}).call(this,n(8))},function(e,t,n){(function(e,n){var r="[object Arguments]",o="[object Map]",i="[object Object]",s="[object Set]",a=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[o]=c["[object Number]"]=c[i]=c["[object RegExp]"]=c[s]=c["[object String]"]=c["[object WeakMap]"]=!1;var l="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=l||f||Function("return this")(),p=t&&!t.nodeType&&t,h=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===p&&l.process,y=function(){try{return m&&m.binding("util")}catch(e){}}(),g=y&&y.isTypedArray;function b(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function v(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function _(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var S,C,E,I=Array.prototype,A=Function.prototype,T=Object.prototype,O=d["__core-js_shared__"],R=(S=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",j=A.toString,L=T.hasOwnProperty,D=T.toString,M=RegExp("^"+j.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=d.Symbol,P=d.Uint8Array,N=T.propertyIsEnumerable,x=I.splice,F=(C=Object.keys,E=Object,function(e){return C(E(e))}),W=le(d,"DataView"),B=le(d,"Map"),U=le(d,"Promise"),$=le(d,"Set"),V=le(d,"WeakMap"),q=le(Object,"create"),H=pe(W),G=pe(B),z=pe(U),Q=pe($),Y=pe(V),K=k?k.prototype:void 0,J=K?K.valueOf:void 0;function X(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Z(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ee(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function te(e){var t=-1,n=e?e.length:0;for(this.__data__=new ee;++t<n;)this.add(e[t])}function ne(e){this.__data__=new Z(e)}function re(e,t){var n=me(e)||function(e){return function(e){return _e(e)&&ye(e)}(e)&&L.call(e,"callee")&&(!N.call(e,"callee")||D.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=n.length,i=!!o;for(var s in e)!t&&!L.call(e,s)||i&&("length"==s||de(s,o))||n.push(s);return n}function oe(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function ie(e,t,n,a,u){return e===t||(null==e||null==t||!ve(e)&&!_e(t)?e!=e&&t!=t:function(e,t,n,a,u,c){var l=me(e),f=me(t),d="[object Array]",p="[object Array]";l||(d=(d=fe(e))==r?i:d);f||(p=(p=fe(t))==r?i:p);var h=d==i&&!v(e),m=p==i&&!v(t),y=d==p;if(y&&!h)return c||(c=new ne),l||we(e)?ue(e,t,n,a,u,c):function(e,t,n,r,i,a,u){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!r(new P(e),new P(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return he(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var c=_;case s:var l=2&a;if(c||(c=w),e.size!=t.size&&!l)return!1;var f=u.get(e);if(f)return f==t;a|=1,u.set(e,t);var d=ue(c(e),c(t),r,i,a,u);return u.delete(e),d;case"[object Symbol]":if(J)return J.call(e)==J.call(t)}return!1}(e,t,d,n,a,u,c);if(!(2&u)){var g=h&&L.call(e,"__wrapped__"),b=m&&L.call(t,"__wrapped__");if(g||b){var S=g?e.value():e,C=b?t.value():t;return c||(c=new ne),n(S,C,a,u,c)}}if(!y)return!1;return c||(c=new ne),function(e,t,n,r,o,i){var s=2&o,a=Se(e),u=a.length,c=Se(t).length;if(u!=c&&!s)return!1;var l=u;for(;l--;){var f=a[l];if(!(s?f in t:L.call(t,f)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);var h=s;for(;++l<u;){f=a[l];var m=e[f],y=t[f];if(r)var g=s?r(y,m,f,t,e,i):r(m,y,f,e,t,i);if(!(void 0===g?m===y||n(m,y,r,o,i):g)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,n,a,u,c)}(e,t,ie,n,a,u))}function se(e){return!(!ve(e)||function(e){return!!R&&R in e}(e))&&(ge(e)||v(e)?M:a).test(pe(e))}function ae(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||T,t!==r)return F(e);var t,n,r,o=[];for(var i in Object(e))L.call(e,i)&&"constructor"!=i&&o.push(i);return o}function ue(e,t,n,r,o,i){var s=2&o,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var l=-1,f=!0,d=1&o?new te:void 0;for(i.set(e,t),i.set(t,e);++l<a;){var p=e[l],h=t[l];if(r)var m=s?r(h,p,l,t,e,i):r(p,h,l,e,t,i);if(void 0!==m){if(m)continue;f=!1;break}if(d){if(!b(t,(function(e,t){if(!d.has(t)&&(p===e||n(p,e,r,o,i)))return d.add(t)}))){f=!1;break}}else if(p!==h&&!n(p,h,r,o,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function ce(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function le(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return se(n)?n:void 0}X.prototype.clear=function(){this.__data__=q?q(null):{}},X.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},X.prototype.get=function(e){var t=this.__data__;if(q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return L.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return q?void 0!==t[e]:L.call(t,e)},X.prototype.set=function(e,t){return this.__data__[e]=q&&void 0===t?"__lodash_hash_undefined__":t,this},Z.prototype.clear=function(){this.__data__=[]},Z.prototype.delete=function(e){var t=this.__data__,n=oe(t,e);return!(n<0)&&(n==t.length-1?t.pop():x.call(t,n,1),!0)},Z.prototype.get=function(e){var t=this.__data__,n=oe(t,e);return n<0?void 0:t[n][1]},Z.prototype.has=function(e){return oe(this.__data__,e)>-1},Z.prototype.set=function(e,t){var n=this.__data__,r=oe(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ee.prototype.clear=function(){this.__data__={hash:new X,map:new(B||Z),string:new X}},ee.prototype.delete=function(e){return ce(this,e).delete(e)},ee.prototype.get=function(e){return ce(this,e).get(e)},ee.prototype.has=function(e){return ce(this,e).has(e)},ee.prototype.set=function(e,t){return ce(this,e).set(e,t),this},te.prototype.add=te.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},te.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.clear=function(){this.__data__=new Z},ne.prototype.delete=function(e){return this.__data__.delete(e)},ne.prototype.get=function(e){return this.__data__.get(e)},ne.prototype.has=function(e){return this.__data__.has(e)},ne.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Z){var r=n.__data__;if(!B||r.length<199)return r.push([e,t]),this;n=this.__data__=new ee(r)}return n.set(e,t),this};var fe=function(e){return D.call(e)};function de(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function he(e,t){return e===t||e!=e&&t!=t}(W&&"[object DataView]"!=fe(new W(new ArrayBuffer(1)))||B&&fe(new B)!=o||U&&"[object Promise]"!=fe(U.resolve())||$&&fe(new $)!=s||V&&"[object WeakMap]"!=fe(new V))&&(fe=function(e){var t=D.call(e),n=t==i?e.constructor:void 0,r=n?pe(n):void 0;if(r)switch(r){case H:return"[object DataView]";case G:return o;case z:return"[object Promise]";case Q:return s;case Y:return"[object WeakMap]"}return t});var me=Array.isArray;function ye(e){return null!=e&&be(e.length)&&!ge(e)}function ge(e){var t=ve(e)?D.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ve(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _e(e){return!!e&&"object"==typeof e}var we=g?function(e){return function(t){return e(t)}}(g):function(e){return _e(e)&&be(e.length)&&!!c[D.call(e)]};function Se(e){return ye(e)?re(e):ae(e)}n.exports=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?ie(e,t,n):!!r}}).call(this,n(8),n(32)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new function(){let e=3;this.diagLevel=function(){return e},this.setDiagLevel=function(t){e=t},this.validationEnabled=function(){return e>=4}};t.default=r,e.exports=t.default},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,s,a,u=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&h(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[u]=o,r(u),u++},d.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(27))},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=s(n(10)),u=i(n(25));t.default=class{constructor(e,t){this.allowDelay=!1,this.delayed=!1,this.allowCancel=!1,this.canceled=!1,this.completed=!1,this.event=e.event,this.source=e.source,this.sourceType=e.sourceType,this.listenerGuid=e.listenerGuid,u[this.sourceType.toUpperCase()]&&u[this.sourceType.toUpperCase()].DELAYABLE_EVENTS.includes(this.event)&&(this.allowDelay=!0),u[this.sourceType.toUpperCase()]&&u[this.sourceType.toUpperCase()].CANCELABLE_EVENTS.includes(this.event)&&(this.allowCancel=!0),this.handler=e.handler,this.queryMessage=t,this.guid=t.data.guid,this.internalHandler()}async internalHandler(){this.data=this.queryMessage.data.data,this.handler&&await this.handler(this),this.delayed||this.canceled||this.completed||this.done()}cancel(){this.allowCancel&&(this.canceled=!0,this.done())}wait(){this.allowDelay?(this.delayed=!0,this.queryMessage.sendQueryResponse(null,{delayed:!0})):this.done()}done(e){this.completed=!0,this.delayed?a.default.transmit(`Finsemble.Listener.Done.${this.guid}.${this.listenerGuid}`,{canceled:this.canceled,data:e}):this.queryMessage.sendQueryResponse(null,{canceled:this.canceled,data:e})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(5),o=r(n(120)),i=r(n(4));i.default.start();let s=!1;IDBKeyRange.forPrefix=e=>{const t=(e=>{let t=e.length;for(;t>0;){const n=e.substring(0,t-1),r=e.charCodeAt(t-1);if(65535!==r)return n+String.fromCharCode(r+1);e=n,--t}return[]})(e);return void 0===t?IDBKeyRange.lowerBound(e):IDBKeyRange.bound(e,t,!1,!0)};const a=function(e){o.default.call(this,arguments),this.db,this.queue=[],i.default.system.log("InstrumentedIndexedDBAdapter init"),console.log("InstrumentedIndexedDBAdapter init");const t=window.indexedDB.open("finsemble",1);t.onupgradeneeded=e=>{this.db=e.target.result;this.db.createObjectStore("fsbl",{keyPath:"key"}).transaction.oncomplete=()=>{i.default.system.debug("InstrumentedIndexedDBAdapter object store created"),console.debug("InstrumentedIndexedDBAdapter object store created"),this.releaseQueue()}},t.onsuccess=e=>{i.default.system.log("InstrumentedIndexedDBAdapter initialized successfully"),console.log("InstrumentedIndexedDBAdapter initialized successfully"),this.initialSimulateErrorMode(),this.db=e.target.result,this.releaseQueue()},t.onerror=e=>{i.default.system.error("InstrumentedIndexedDBAdapter DB connection initialization failed, Error: ",e),console.error("InstrumentedIndexedDBAdapter DB connection initialization failed, Error: ",e)},this.getKeyPreface=e=>{const t="keyPrefix"in e?e.keyPrefix:"";return`${this.getUserPreface()}:${e.topic}:${t}`},this.getUserPreface=()=>`${this.baseName}:${this.userName}`,this.releaseQueue=()=>{for(s=!0,i.default.system.log(`InstrumentedIndexedDBAdapter.releaseQueue: ${this.queue.length} commands`),console.log(`InstrumentedIndexedDBAdapter.releaseQueue: ${this.queue.length} commands`);this.queue.length;){const e=this.queue.shift();this[e.method].apply(this,e.args)}},this.clearCache=(e,t)=>{if(!s)return i.default.system.debug("queuing","clearCache",[e,t]),console.debug("queuing","clearCache",[e,t]),void this.queue.push({method:"clearCache",args:[e,t]});const n=this.getUserPreface(this);i.default.system.log("InstrumentedIndexedDBAdapter.clearCache for userPreface="+n),console.log("InstrumentedIndexedDBAdapter.clearCache for userPreface="+n);const r=IDBKeyRange.forPrefix(n),o=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").delete(r);o.onsuccess=()=>{i.default.system.log("InstrumentedIndexedDBAdapter.clearCache Success: userPreface="+n),console.log("InstrumentedIndexedDBAdapter.clearCache Success: userPreface="+n),t(null,{status:"success"})},o.onerror=e=>{i.default.system.error("InstrumentedIndexedDBAdapter.clearCache failed Error",e,"userPreface="+n),console.error("InstrumentedIndexedDBAdapter.clearCache failed Error",e,"userPreface="+n),t(e,{status:"failed"})}},this.delete=async(e,t)=>{switch(await this.randomDelay(),this.simulateErrorMode){case 0:break;case 1:return i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.delete: error mode is "+this.simulateErrorMode),t("simulated error",{status:"failed"});case 2:return void i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.delete: error mode is "+this.simulateErrorMode)}if(!s)return i.default.system.debug("queuing","delete",[e,t]),console.debug("queuing","delete",[e,t]),void this.queue.push({method:"delete",args:[e,t]});const n=this.getCombinedKey(this,e);i.default.system.debug("InstrumentedIndexedDBAdapter.delete for key="+n),console.debug("InstrumentedIndexedDBAdapter.delete for key="+n);const r=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").delete(n);r.onsuccess=()=>{i.default.system.debug(`InstrumentedIndexedDBAdapter.delete key=${n}, Success`),console.debug(`InstrumentedIndexedDBAdapter.delete key=${n}, Success`),t(null,{status:"success"})},r.onerror=e=>{i.default.system.error(`InstrumentedIndexedDBAdapter.delete key=${n}, Error`,e),console.error(`InstrumentedIndexedDBAdapter.delete key=${n}, Error`,e),t(e,{status:"failed"})}},this.empty=e=>{if(!s)return i.default.system.debug("queuing","empty",[e]),console.debug("queuing","empty",[e]),void this.queue.push({method:"empty",args:[e]});i.default.system.log("InstrumentedIndexedDBAdapter.empty"),console.log("InstrumentedIndexedDBAdapter.empty");const t=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").clear();t.onerror=t=>(i.default.system.error("InstrumentedIndexedDBAdapter.empty failed Error",t),console.error("InstrumentedIndexedDBAdapter.empty failed Error",t),e(t,{status:"failed"})),t.onsuccess=()=>{i.default.system.log("InstrumentedIndexedDBAdapter.empty Success"),console.log("InstrumentedIndexedDBAdapter.empty Success"),e()}},this.randomDelay=()=>{if(this.delayUpperBoundInMilliseconds>0){let e=this.delayUpperBoundInMilliseconds-this.delayLowerBoundInMilliseconds,t=Math.floor(Math.random()*e)+this.delayLowerBoundInMilliseconds;return i.default.system.debug(`QAData: InstrumentedIndexedDBAdapter.randomDelay: ${t} millisecond delay added`),console.debug(`QAData: InstrumentedIndexedDBAdapter.randomDelay: ${t} millisecond delay added`),new Promise(e=>setTimeout(e,t))}return Promise.resolve()},this.get=async(e,t)=>{switch(await this.randomDelay(),this.simulateErrorMode){case 0:break;case 1:return i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.get: error mode is "+this.simulateErrorMode),i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.get: error mode is "+this.simulateErrorMode),t("simulated error",{status:"failed"});case 2:return i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.get: error mode is "+this.simulateErrorMode),void console.debug("QAData: InstrumentedIndexedDBAdapter.get: error mode is "+this.simulateErrorMode)}if(!s)return i.default.system.debug("queuing","get",[e,t]),console.debug("queuing","get",[e,t]),void this.queue.push({method:"get",args:[e,t]});i.default.system.debug("InstrumentedIndexedDBAdapter.get, params: ",e),console.debug("InstrumentedIndexedDBAdapter.get, params: ",e);const n=this.getCombinedKey(this,e),r=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").get(n);r.onsuccess=e=>{let r;e.target.result&&(r=e.target.result.value),i.default.system.debug(`InstrumentedIndexedDBAdapter.get for key=${n} data=`,r),console.debug(`InstrumentedIndexedDBAdapter.get for key=${n} data=`,r),t(null,r)},r.onerror=e=>{i.default.system.error(`InstrumentedIndexedDBAdapter.get key=${n}, Error`,e),console.error(`InstrumentedIndexedDBAdapter.get key=${n}, Error`,e),t(e,{status:"failed"})}},this.keys=(e,t)=>{if(!s)return i.default.system.debug("queuing","keys",[e,t]),console.debug("queuing","keys",[e,t]),void this.queue.push({method:"keys",args:[e,t]});const n=this.getKeyPreface(e),r=IDBKeyRange.forPrefix(n),o=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").getAllKeys(r);o.onsuccess=e=>{const r=(e.target.result?e.target.result:[]).map(e=>e.replace(n,""));i.default.system.debug(`InstrumentedIndexedDBAdapter.keys for keyPreface=${n} keys=`,r),console.debug(`InstrumentedIndexedDBAdapter.get keys keyPreface=${n} keys=`,r),t(null,r)},o.onerror=e=>{i.default.system.error(`Failed to retrieve InstrumentedIndexedDBAdapter.keys keyPreface=${n}, Error`,e),console.error(`Failed to retrieve InstrumentedIndexedDBAdapter.keys keyPreface=${n}, Error`,e),t(e,{status:"failed"})}},this.save=async(e,t)=>{switch(await this.randomDelay(),this.simulateErrorMode){case 0:break;case 1:return i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.save: error mode is "+this.simulateErrorMode),console.debug("QAData: InstrumentedIndexedDBAdapter.save: error mode is "+this.simulateErrorMode),t("simulated error",{status:"failed"});case 2:return i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.save: error mode is "+this.simulateErrorMode),void console.debug("QAData: InstrumentedIndexedDBAdapter.save: error mode is "+this.simulateErrorMode)}if(!s)return i.default.system.debug("queuing","save",[e,t]),console.debug("queuing","save",[e,t]),void this.queue.push({method:"save",args:[e,t]});i.default.system.debug("InstrumentedIndexedDBAdapter.save, params: ",e),console.debug("InstrumentedIndexedDBAdapter.save, params: ",e);const n=this.getCombinedKey(this,e),r=this.db.transaction(["fsbl"],"readwrite").objectStore("fsbl").put({key:n,value:e.value});r.onsuccess=()=>{i.default.system.debug("InstrumentedIndexedDBAdapter.save Request Succeeded"),console.debug("InstrumentedIndexedDBAdapter.save Request Succeeded"),t(null,{status:"success"})},r.onerror=e=>{i.default.system.error("InstrumentedIndexedDBAdapter.save Request Failed: ",e),console.error("InstrumentedIndexedDBAdapter.save Request Failed: ",e),t(e,{status:"failed"})}},this.initialSimulateErrorMode=()=>{this.simulateErrorMode=JSON.parse(localStorage.getItem("finsembleErrorMode")),this.delayLowerBoundInMilliseconds=JSON.parse(localStorage.getItem("finsembleDelayLowerBoundInMilliseconds")),this.delayUpperBoundInMilliseconds=JSON.parse(localStorage.getItem("finsembleDelayUpperBoundInMilliseconds")),i.default.system.debug(`QAData: InstrumentedIndexedDBAdapter.initialSimulateErrorMode: errorMode ${this.simulateErrorMode} lowerDelay ${this.delayLowerBoundInMilliseconds} upperDelay ${this.delayUpperBoundInMilliseconds}`),console.log(`QAData: InstrumentedIndexedDBAdapter.initialSimulateErrorMode: errorMode ${this.simulateErrorMode} lowerDelay ${this.delayLowerBoundInMilliseconds} upperDelay ${this.delayUpperBoundInMilliseconds}`)},this.setRandomDelayBounds=(e,t)=>{i.default.system.debug(`QAData: InstrumentedIndexedDBAdapter.setRandomDelayBounds: lower ${e} upper ${t}`),console.debug(`QAData: InstrumentedIndexedDBAdapter.setRandomDelayBounds: lower ${e} upper ${t}`),this.delayLowerBoundInMilliseconds=e,this.delayUpperBoundInMilliseconds=t,localStorage.setItem("finsembleDelayLowerBoundInMilliseconds",JSON.stringify(e)),localStorage.setItem("finsembleDelayUpperBoundInMilliseconds",JSON.stringify(t))},this.setErrorMode=e=>{i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.setErrorMode: mode "+e),console.debug("QAData: InstrumentedIndexedDBAdapter.setErrorMode: mode "+e),this.simulateErrorMode=e,localStorage.setItem("finsembleErrorMode",JSON.stringify(e))},this.clearErrorMode=()=>{i.default.system.debug("QAData: InstrumentedIndexedDBAdapter.clearErrorMode"),console.debug("QAData: InstrumentedIndexedDBAdapter.clearErrorMode"),this.setErrorMode(0)}};a.prototype=new o.default,new a("InstrumentedIndexedDBAdapter"),e.exports=a},function(e,t,n){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e)try{n.adapterReceiver?n.adapterReceiver.loaded(e[0],this):console.error("Global Adapter Receiver not found on the global object. Fatal error.")}catch(e){console.error("BaseStorage constructor",e)}this.setBaseName=function(e){this.baseName=e},this.setUser=function(e){this.userName=e},this.save=function(){console.warn("Save method not fulfilled in the active storage model.")},this.get=function(){console.warn("Get method not fulfilled in the active storage model.")},this.keys=function(){console.warn("Keys method not fulfilled in the active storage model.")},this.delete=function(){console.warn("Delete method not fulfilled in the active storage model.")},this.clearCache=function(){console.warn("Clear cache method not fulfilled in the active storage model.")},this.empty=function(){console.warn("Empty method not fulfilled in the active storage model.")},this.getMultiple=function(){},this.getCombinedKey=function(e,t){return`${e.baseName}:${e.userName}:${t.topic}:${t.key}`},this.getKeyPreface=function(e,t){let n=`${e.baseName}:${e.userName}:${t.topic}:`;return"keyPrefix"in t&&(n+=t.keyPrefix),n}};t.default=r,e.exports=t.default}).call(this,n(8))}]).default}));